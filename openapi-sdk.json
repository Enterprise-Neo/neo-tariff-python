{
  "openapi": "3.1.0",
  "info": {
    "title": "Neo Tariff API",
    "summary": "Tariff rate evaluation, HTS code lookup, and trade program APIs for U.S. imports",
    "description": "# Neo Tariff API\n\nThe Neo Tariff API provides comprehensive access to U.S. Harmonized Tariff Schedule (HTS) data,\ntariff rate calculations, and trade program information.\n\n## Authentication\n\nAll API requests require an API key passed in the `x-api-key` header:\n\n```bash\ncurl -H \"x-api-key: YOUR_API_KEY\" https://tariff-data.enterprise-neo.com/rates/entry\n```\n\nContact your administrator to obtain an API key.\n\n<!-- Redoc-Inject: <security-definitions> -->\n\n## Quick Start\n\n### Calculate Duty for an Import\n\n```bash\ncurl -X POST https://tariff-data.enterprise-neo.com/rates/entry \\\n  -H \"x-api-key: YOUR_API_KEY\" \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\"hts_code\": \"7208.10.15\", \"country_of_origin\": \"CN\", \"cost\": 10000, \"qty\": 1000}'\n```\n\n### Search for HTS Codes\n\n```bash\ncurl \"https://tariff-data.enterprise-neo.com/search/hts?query=steel%20plates\" \\\n  -H \"x-api-key: YOUR_API_KEY\"\n```\n\n## HTS Version Selection\n\nMany endpoints accept version parameters to query specific HTS revisions:\n\n| Parameter | Description | Example |\n|-----------|-------------|---------|\n| `hts_date` | Date to find effective version (YYYY-MM-DD) | `2025-04-01` |\n| `hts_year` | Specific year | `2025` |\n| `hts_version` | Revision number within year | `27` |\n\nIf not specified, the latest available version is used.\n\n## Response Format\n\nAll endpoints return a standard response envelope:\n\n```json\n{\n  \"success\": true,\n  \"meta\": {\n    \"operation\": \"endpoint_name\",\n    \"params\": {...},\n    \"hts_year\": 2025,\n    \"hts_version\": 27,\n    \"result_count\": 1\n  },\n  \"data\": {...}\n}\n```\n\n## Error Handling\n\n| Status Code | Description |\n|-------------|-------------|\n| `400` | Bad request - invalid parameters |\n| `401` | Unauthorized - missing or invalid API key |\n| `404` | Resource not found |\n| `422` | Validation error - request body failed validation |\n| `429` | Rate limit exceeded |\n| `500` | Internal server error |\n\n## Rate Limiting\n\n- 1000 requests per minute per API key\n- HTTP 429 returned when exceeded with `Retry-After` header\n\n## Support\n\nFor API support or to report issues, contact the development team.\n",
    "version": "2.0.0"
  },
  "paths": {
    "/rates/entry": {
      "post": {
        "tags": [
          "Duty Calculations"
        ],
        "summary": "Evaluate Single Entry",
        "description": "Evaluate tariff duty rates for a single import entry.\n\nThis is the primary endpoint for calculating total duties on imported goods.\nIt evaluates both base tariff rates and Chapter 99 reciprocal tariffs.\n\n## Features\n\n- **Standard duty calculation**: Ad valorem, specific, and compound rates\n- **Trade program qualification**: GSP, USMCA, and other preferential rates\n- **Reciprocal tariffs**: Section 201, 232, 301, and IEEPA additional duties\n- **Rules view**: Unified view of all applicable trade rules and conditions\n- **Materials composition**: Section 232 steel/aluminum evaluations\n\n## Required Fields\n\n| Field | Description |\n|-------|-------------|\n| `hts_code` | 4-10 digit HTS code (dotted or undotted) |\n| `country_of_origin` | ISO alpha-2 country code |\n| `cost` | Customs value in USD |\n| `qty` | Quantity of goods |\n\n## Response Structure\n\nThe response `data` object (`CalcResponse`) contains:\n\n| Field | Description |\n|-------|-------------|\n| `inputs` | Echo of normalized input parameters |\n| `inputs_context` | Derived context (country details, resolved dates, HTS revision) |\n| `totals` | Duty totals by category: `base`, `reciprocal`, `net` |\n| `components` | Line-item breakdown with applied rules and computed amounts |\n| `is_composite` | `true` if multiple material lines exist (steel/aluminum scenarios) |\n| `reciprocal` | Chapter 99 evaluation details (when `reciprocal=true`) |\n| `conditional_exemptions` | Exemptions that may apply based on product characteristics |\n| `rules` | Unified view of all applied rules (when `include_rules_view=true`) |\n| `summary` | High-level totals, effective rates, and valuation basis |\n| `breakdown` | Detailed duty breakdown with line-by-line charges |\n| `schema_version` | Response schema version identifier |\n\n## Example Request\n\n```json\n{\n  \"hts_code\": \"7208.10.15\",\n  \"country_of_origin\": \"CN\",\n  \"cost\": 10000,\n  \"qty\": 1000,\n  \"reciprocal\": true\n}\n```",
        "operationId": "evaluate_rate_entry_rates_entry_post",
        "security": [
          {
            "APIKeyHeader": []
          }
        ],
        "parameters": [
          {
            "name": "include_debug",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "description": "Include debug payloads and trace metadata in the response.",
              "default": false,
              "title": "Include Debug"
            },
            "description": "Include debug payloads and trace metadata in the response."
          },
          {
            "name": "include_reciprocal_debug",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "description": "Include verbose reciprocal evaluation metadata (matched rules, details, base summary).",
              "default": false,
              "title": "Include Reciprocal Debug"
            },
            "description": "Include verbose reciprocal evaluation metadata (matched rules, details, base summary)."
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CalcInputs-Input",
                "description": "Import entry details including HTS code, country of origin, value, and quantity for duty calculation"
              }
            }
          },
          "description": "Import entry details including HTS code, country of origin, value, and quantity for duty calculation"
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIResponse_CalcResponse_"
                },
                "example": {
                  "success": true,
                  "meta": {
                    "timestamp_unixts": 1736800000.0,
                    "operation": "evaluate_rate_entry",
                    "params": {},
                    "hts_year": 2025,
                    "hts_version": 27,
                    "result_count": 1
                  },
                  "data": {
                    "breakdown": [
                      {
                        "applies": true,
                        "description": "T-shirts, singlets, tank tops (cotton)",
                        "id": "base:6109100004:general:i=0",
                        "kind": "base",
                        "line_seq": 1,
                        "percent_of_cost": 0.165,
                        "source_ref": {
                          "hts_code": "6109.10.00.04",
                          "rate_column": "general"
                        },
                        "totals": {
                          "percent_based": 165.0,
                          "total": 165.0,
                          "unit_based": 0.0
                        }
                      },
                      {
                        "applies": true,
                        "description": "China/Hong Kong reciprocal tariff",
                        "id": "repl:9903.01.24",
                        "kind": "reciprocal",
                        "line_seq": 2,
                        "percent_of_cost": 0.1,
                        "source_ref": {
                          "rule_code": "9903.01.24"
                        },
                        "totals": {
                          "percent_based": 100.0,
                          "total": 100.0,
                          "unit_based": 0.0
                        }
                      },
                      {
                        "applies": true,
                        "description": "Universal reciprocal tariff",
                        "id": "repl:9903.01.25",
                        "kind": "reciprocal",
                        "line_seq": 3,
                        "percent_of_cost": 0.1,
                        "source_ref": {
                          "rule_code": "9903.01.25"
                        },
                        "totals": {
                          "percent_based": 100.0,
                          "total": 100.0,
                          "unit_based": 0.0
                        }
                      },
                      {
                        "applies": true,
                        "description": "Section 301 China tariff (List 4A)",
                        "id": "repl:9903.88.15",
                        "kind": "reciprocal",
                        "line_seq": 4,
                        "percent_of_cost": 0.075,
                        "source_ref": {
                          "rule_code": "9903.88.15"
                        },
                        "totals": {
                          "percent_based": 75.0,
                          "total": 75.0,
                          "unit_based": 0.0
                        }
                      },
                      {
                        "applies": true,
                        "description": "Net total (base + reciprocal)",
                        "id": "total:net",
                        "kind": "total",
                        "line_seq": 5,
                        "percent_of_cost": 0.44,
                        "totals": {
                          "percent_based": 440.0,
                          "total": 440.0,
                          "unit_based": 0.0
                        }
                      }
                    ],
                    "components": [
                      {
                        "line_country": "CN",
                        "line_number": 1,
                        "line_percent": 100.0,
                        "line_total_duty": 440.0,
                        "line_value": 1000.0,
                        "rules": [
                          {
                            "description": "T-shirts, singlets, tank tops and similar garments, knitted or crocheted",
                            "duty_advalorem": 165.0,
                            "duty_specific": 0.0,
                            "duty_total": 165.0,
                            "hts_code": "6109.10.00.04",
                            "listed_hts_code": "6109.10.00.00",
                            "listed_rate_text": "16.5%",
                            "programs": [],
                            "rate_basis": "advalorem",
                            "rate_column": "general",
                            "rate_usage": "base",
                            "rate_value": 0.165
                          },
                          {
                            "description": "China/Hong Kong reciprocal tariff",
                            "duty_advalorem": 100.0,
                            "duty_total": 100.0,
                            "hts_code": "9903.01.24",
                            "listed_rate_text": "10%",
                            "rate_basis": "advalorem",
                            "rate_column": "general",
                            "rate_usage": "additional",
                            "rate_value": 0.1
                          },
                          {
                            "description": "Universal reciprocal tariff",
                            "duty_advalorem": 100.0,
                            "duty_total": 100.0,
                            "hts_code": "9903.01.25",
                            "listed_rate_text": "10%",
                            "rate_basis": "advalorem",
                            "rate_column": "general",
                            "rate_usage": "additional",
                            "rate_value": 0.1
                          },
                          {
                            "description": "Section 301 China tariff (List 4A)",
                            "duty_advalorem": 75.0,
                            "duty_total": 75.0,
                            "hts_code": "9903.88.15",
                            "listed_rate_text": "7.5%",
                            "rate_basis": "advalorem",
                            "rate_column": "general",
                            "rate_usage": "additional",
                            "rate_value": 0.075
                          }
                        ]
                      }
                    ],
                    "conditional_exemptions": [],
                    "inputs": {
                      "admitted_to_ftz": false,
                      "cost": 1000.0,
                      "country_of_origin": "CN",
                      "currency_code": "USD",
                      "hts_code": "6109100004",
                      "import_date": "2025-11-28",
                      "include_rules_view": true,
                      "is_civil_aircraft": false,
                      "is_donation": false,
                      "is_informational": false,
                      "is_personal_baggage": false,
                      "loading_date": "2025-11-28",
                      "materials": [],
                      "program_qualified": true,
                      "qty": 1000.0,
                      "qty_uom": "NO",
                      "reciprocal": true,
                      "usmca_claim": false
                    },
                    "inputs_context": {
                      "country": {
                        "common_name": "china",
                        "country_code": "156",
                        "country_name": "people's republic of china",
                        "iso_alpha2": "cn",
                        "iso_alpha3": "chn",
                        "official_name": "people's republic of china",
                        "programs": [
                          {
                            "abbrev": "c",
                            "code": "c",
                            "name": "Agreement on Trade in Civil Aircraft"
                          }
                        ]
                      },
                      "dates": {
                        "import_date_resolved": "2025-11-28",
                        "loading_date_resolved": "2025-11-28"
                      },
                      "hts_revision": {
                        "hts_version": 31,
                        "hts_year": 2025,
                        "source_id": 12
                      },
                      "version_selection": {
                        "effective_start": "2025-11-28",
                        "release_date": "2025-11-28",
                        "selection_method": "import_date",
                        "source_id": 12,
                        "version": 31,
                        "warnings": [],
                        "year": 2025
                      }
                    },
                    "is_composite": false,
                    "reciprocal": {
                      "conditional_exemptions": [],
                      "context": {
                        "base_ad_valorem_rate": 0.165,
                        "country_of_origin": "CN",
                        "hts_code": "6109100004",
                        "import_date": "2025-11-28",
                        "quantity": 1000.0,
                        "rate_column": "general",
                        "value": 1000.0
                      },
                      "rules": [
                        {
                          "additional_duty_rate": 0.1,
                          "applies": true,
                          "computed_amount": 100.0,
                          "description": "China/Hong Kong reciprocal tariff",
                          "rule_code": "9903.01.24"
                        },
                        {
                          "additional_duty_rate": 0.1,
                          "applies": true,
                          "computed_amount": 100.0,
                          "description": "Universal reciprocal tariff",
                          "rule_code": "9903.01.25"
                        },
                        {
                          "additional_duty_rate": 0.075,
                          "applies": true,
                          "computed_amount": 75.0,
                          "description": "Section 301 China tariff (List 4A)",
                          "rule_code": "9903.88.15"
                        }
                      ],
                      "totals": {
                        "additional_duty_amount": 275.0,
                        "additional_rate": 0.275
                      }
                    },
                    "rules": {
                      "base": [
                        {
                          "code": "6109100004",
                          "computed_amount": 165.0,
                          "description": "16.5%",
                          "id": "base:6109100004:general:i=0",
                          "rate_basis": "advalorem",
                          "rate_column": "general",
                          "rate_value": 0.165,
                          "source": "schedule",
                          "type": "base"
                        }
                      ],
                      "reciprocal": [
                        {
                          "applies": true,
                          "code": "9903.01.24",
                          "computed_amount": 100.0,
                          "description": "China/Hong Kong reciprocal tariff",
                          "rate_basis": "advalorem",
                          "rate_value": 0.1,
                          "type": "reciprocal"
                        },
                        {
                          "applies": true,
                          "code": "9903.01.25",
                          "computed_amount": 100.0,
                          "description": "Universal reciprocal tariff",
                          "rate_basis": "advalorem",
                          "rate_value": 0.1,
                          "type": "reciprocal"
                        },
                        {
                          "applies": true,
                          "code": "9903.88.15",
                          "computed_amount": 75.0,
                          "description": "Section 301 China tariff (List 4A)",
                          "rate_basis": "advalorem",
                          "rate_value": 0.075,
                          "type": "reciprocal"
                        }
                      ]
                    },
                    "schema_version": "3.0",
                    "summary": {
                      "cargo_value": {
                        "amount": 1000.0,
                        "currency": "USD",
                        "qty_uom": "NO",
                        "quantity": 1000.0
                      },
                      "currency_code": "USD",
                      "duty_totals": {
                        "base": {
                          "percent_based": 165.0,
                          "total": 165.0,
                          "unit_based": 0.0
                        },
                        "net": {
                          "percent_based": 440.0,
                          "total": 440.0,
                          "unit_based": 0.0
                        },
                        "reciprocal": {
                          "percent_based": 275.0,
                          "total": 275.0,
                          "unit_based": 0.0
                        }
                      },
                      "effective_rates": {
                        "base": {
                          "percent_based": 0.165,
                          "total": 0.165,
                          "unit_based": 0.0
                        },
                        "net": {
                          "percent_based": 0.44,
                          "total": 0.44,
                          "unit_based": 0.0
                        },
                        "reciprocal": {
                          "percent_based": 0.275,
                          "total": 0.275,
                          "unit_based": 0.0
                        }
                      },
                      "flags": {
                        "calculation_methods": [
                          "simple"
                        ],
                        "has_quota": false,
                        "has_reciprocal": true
                      },
                      "valuation_basis": {
                        "amount": 1000.0,
                        "currency": "USD",
                        "label": "declared_value",
                        "notes": []
                      }
                    },
                    "totals": {
                      "base": {
                        "ad_valorem": 165.0,
                        "specific": 0.0,
                        "total": 165.0
                      },
                      "net": {
                        "ad_valorem": 440.0,
                        "specific": 0.0,
                        "total": 440.0
                      },
                      "reciprocal": {
                        "ad_valorem": 275.0,
                        "specific": 0.0,
                        "total": 275.0
                      }
                    }
                  },
                  "errors": null
                }
              }
            }
          },
          "404": {
            "description": "HTS code not found"
          },
          "422": {
            "description": "Validation error - missing or invalid fields"
          }
        }
      }
    },
    "/rates/entries": {
      "post": {
        "tags": [
          "Duty Calculations"
        ],
        "summary": "Evaluate Multiple Entries (Batch)",
        "description": "Evaluate tariff duty rates for multiple import entries in a single request.\n\nProcesses up to 1000 entries in parallel for optimal performance.\nEach entry supports the full feature set of single entry evaluation.\n\n## Features\n\n- **Parallel processing**: All entries evaluated concurrently\n- **Record correlation**: Use `rec_id` to match requests to responses\n- **Shared defaults**: Set `hts_date`/`hts_year`/`hts_version` at batch level\n- **Per-entry overrides**: Each entry can override batch-level defaults\n\n## Request Structure\n\n```json\n{\n  \"data\": [\n    {\"hts_code\": \"7208.10.15\", \"country_of_origin\": \"CN\", \"cost\": 10000, \"qty\": 100},\n    {\"hts_code\": \"8471.30.01\", \"country_of_origin\": \"MX\", \"cost\": 5000, \"qty\": 50}\n  ],\n  \"hts_year\": 2025\n}\n```\n\n## Response\n\nReturns an array of `CalcResponse` objects (same structure as `/rates/entry`)\nin the same order as input entries. Each result contains the full duty\ncalculation including `inputs`, `totals`, `components`, `summary`, and\n`breakdown` fields. See `/rates/entry` documentation for complete field details.",
        "operationId": "evaluate_rate_entries_rates_entries_post",
        "security": [
          {
            "APIKeyHeader": []
          }
        ],
        "parameters": [
          {
            "name": "include_debug",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "description": "Include debug payloads and trace metadata in the response.",
              "default": false,
              "title": "Include Debug"
            },
            "description": "Include debug payloads and trace metadata in the response."
          },
          {
            "name": "include_reciprocal_debug",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "description": "Include verbose reciprocal evaluation metadata (matched rules, details, base summary).",
              "default": false,
              "title": "Include Reciprocal Debug"
            },
            "description": "Include verbose reciprocal evaluation metadata (matched rules, details, base summary)."
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CalcBatchInputs",
                "description": "Batch of import entries for parallel duty calculation (max 1000 entries)"
              }
            }
          },
          "description": "Batch of import entries (max 1000) for parallel duty calculation"
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIResponse_list_CalcResponse__"
                },
                "example": {
                  "success": true,
                  "meta": {
                    "timestamp_unixts": 1736800000.0,
                    "operation": "evaluate_rate_entries",
                    "params": {},
                    "hts_year": 2025,
                    "hts_version": 27,
                    "result_count": 1
                  },
                  "data": [
                    {
                      "breakdown": [
                        {
                          "applies": true,
                          "description": "T-shirts, singlets, tank tops (cotton)",
                          "id": "base:6109100004:general:i=0",
                          "kind": "base",
                          "line_seq": 1,
                          "percent_of_cost": 0.165,
                          "source_ref": {
                            "hts_code": "6109.10.00.04",
                            "rate_column": "general"
                          },
                          "totals": {
                            "percent_based": 165.0,
                            "total": 165.0,
                            "unit_based": 0.0
                          }
                        },
                        {
                          "applies": true,
                          "description": "China/Hong Kong reciprocal tariff",
                          "id": "repl:9903.01.24",
                          "kind": "reciprocal",
                          "line_seq": 2,
                          "percent_of_cost": 0.1,
                          "source_ref": {
                            "rule_code": "9903.01.24"
                          },
                          "totals": {
                            "percent_based": 100.0,
                            "total": 100.0,
                            "unit_based": 0.0
                          }
                        },
                        {
                          "applies": true,
                          "description": "Universal reciprocal tariff",
                          "id": "repl:9903.01.25",
                          "kind": "reciprocal",
                          "line_seq": 3,
                          "percent_of_cost": 0.1,
                          "source_ref": {
                            "rule_code": "9903.01.25"
                          },
                          "totals": {
                            "percent_based": 100.0,
                            "total": 100.0,
                            "unit_based": 0.0
                          }
                        },
                        {
                          "applies": true,
                          "description": "Section 301 China tariff (List 4A)",
                          "id": "repl:9903.88.15",
                          "kind": "reciprocal",
                          "line_seq": 4,
                          "percent_of_cost": 0.075,
                          "source_ref": {
                            "rule_code": "9903.88.15"
                          },
                          "totals": {
                            "percent_based": 75.0,
                            "total": 75.0,
                            "unit_based": 0.0
                          }
                        },
                        {
                          "applies": true,
                          "description": "Net total (base + reciprocal)",
                          "id": "total:net",
                          "kind": "total",
                          "line_seq": 5,
                          "percent_of_cost": 0.44,
                          "totals": {
                            "percent_based": 440.0,
                            "total": 440.0,
                            "unit_based": 0.0
                          }
                        }
                      ],
                      "components": [
                        {
                          "line_country": "CN",
                          "line_number": 1,
                          "line_percent": 100.0,
                          "line_total_duty": 440.0,
                          "line_value": 1000.0,
                          "rules": [
                            {
                              "description": "T-shirts, singlets, tank tops and similar garments, knitted or crocheted",
                              "duty_advalorem": 165.0,
                              "duty_specific": 0.0,
                              "duty_total": 165.0,
                              "hts_code": "6109.10.00.04",
                              "listed_hts_code": "6109.10.00.00",
                              "listed_rate_text": "16.5%",
                              "programs": [],
                              "rate_basis": "advalorem",
                              "rate_column": "general",
                              "rate_usage": "base",
                              "rate_value": 0.165
                            },
                            {
                              "description": "China/Hong Kong reciprocal tariff",
                              "duty_advalorem": 100.0,
                              "duty_total": 100.0,
                              "hts_code": "9903.01.24",
                              "listed_rate_text": "10%",
                              "rate_basis": "advalorem",
                              "rate_column": "general",
                              "rate_usage": "additional",
                              "rate_value": 0.1
                            },
                            {
                              "description": "Universal reciprocal tariff",
                              "duty_advalorem": 100.0,
                              "duty_total": 100.0,
                              "hts_code": "9903.01.25",
                              "listed_rate_text": "10%",
                              "rate_basis": "advalorem",
                              "rate_column": "general",
                              "rate_usage": "additional",
                              "rate_value": 0.1
                            },
                            {
                              "description": "Section 301 China tariff (List 4A)",
                              "duty_advalorem": 75.0,
                              "duty_total": 75.0,
                              "hts_code": "9903.88.15",
                              "listed_rate_text": "7.5%",
                              "rate_basis": "advalorem",
                              "rate_column": "general",
                              "rate_usage": "additional",
                              "rate_value": 0.075
                            }
                          ]
                        }
                      ],
                      "conditional_exemptions": [],
                      "inputs": {
                        "admitted_to_ftz": false,
                        "cost": 1000.0,
                        "country_of_origin": "CN",
                        "currency_code": "USD",
                        "hts_code": "6109100004",
                        "import_date": "2025-11-28",
                        "include_rules_view": true,
                        "is_civil_aircraft": false,
                        "is_donation": false,
                        "is_informational": false,
                        "is_personal_baggage": false,
                        "loading_date": "2025-11-28",
                        "materials": [],
                        "program_qualified": true,
                        "qty": 1000.0,
                        "qty_uom": "NO",
                        "reciprocal": true,
                        "usmca_claim": false
                      },
                      "inputs_context": {
                        "country": {
                          "common_name": "china",
                          "country_code": "156",
                          "country_name": "people's republic of china",
                          "iso_alpha2": "cn",
                          "iso_alpha3": "chn",
                          "official_name": "people's republic of china",
                          "programs": [
                            {
                              "abbrev": "c",
                              "code": "c",
                              "name": "Agreement on Trade in Civil Aircraft"
                            }
                          ]
                        },
                        "dates": {
                          "import_date_resolved": "2025-11-28",
                          "loading_date_resolved": "2025-11-28"
                        },
                        "hts_revision": {
                          "hts_version": 31,
                          "hts_year": 2025,
                          "source_id": 12
                        },
                        "version_selection": {
                          "effective_start": "2025-11-28",
                          "release_date": "2025-11-28",
                          "selection_method": "import_date",
                          "source_id": 12,
                          "version": 31,
                          "warnings": [],
                          "year": 2025
                        }
                      },
                      "is_composite": false,
                      "reciprocal": {
                        "conditional_exemptions": [],
                        "context": {
                          "base_ad_valorem_rate": 0.165,
                          "country_of_origin": "CN",
                          "hts_code": "6109100004",
                          "import_date": "2025-11-28",
                          "quantity": 1000.0,
                          "rate_column": "general",
                          "value": 1000.0
                        },
                        "rules": [
                          {
                            "additional_duty_rate": 0.1,
                            "applies": true,
                            "computed_amount": 100.0,
                            "description": "China/Hong Kong reciprocal tariff",
                            "rule_code": "9903.01.24"
                          },
                          {
                            "additional_duty_rate": 0.1,
                            "applies": true,
                            "computed_amount": 100.0,
                            "description": "Universal reciprocal tariff",
                            "rule_code": "9903.01.25"
                          },
                          {
                            "additional_duty_rate": 0.075,
                            "applies": true,
                            "computed_amount": 75.0,
                            "description": "Section 301 China tariff (List 4A)",
                            "rule_code": "9903.88.15"
                          }
                        ],
                        "totals": {
                          "additional_duty_amount": 275.0,
                          "additional_rate": 0.275
                        }
                      },
                      "rules": {
                        "base": [
                          {
                            "code": "6109100004",
                            "computed_amount": 165.0,
                            "description": "16.5%",
                            "id": "base:6109100004:general:i=0",
                            "rate_basis": "advalorem",
                            "rate_column": "general",
                            "rate_value": 0.165,
                            "source": "schedule",
                            "type": "base"
                          }
                        ],
                        "reciprocal": [
                          {
                            "applies": true,
                            "code": "9903.01.24",
                            "computed_amount": 100.0,
                            "description": "China/Hong Kong reciprocal tariff",
                            "rate_basis": "advalorem",
                            "rate_value": 0.1,
                            "type": "reciprocal"
                          },
                          {
                            "applies": true,
                            "code": "9903.01.25",
                            "computed_amount": 100.0,
                            "description": "Universal reciprocal tariff",
                            "rate_basis": "advalorem",
                            "rate_value": 0.1,
                            "type": "reciprocal"
                          },
                          {
                            "applies": true,
                            "code": "9903.88.15",
                            "computed_amount": 75.0,
                            "description": "Section 301 China tariff (List 4A)",
                            "rate_basis": "advalorem",
                            "rate_value": 0.075,
                            "type": "reciprocal"
                          }
                        ]
                      },
                      "schema_version": "3.0",
                      "summary": {
                        "cargo_value": {
                          "amount": 1000.0,
                          "currency": "USD",
                          "qty_uom": "NO",
                          "quantity": 1000.0
                        },
                        "currency_code": "USD",
                        "duty_totals": {
                          "base": {
                            "percent_based": 165.0,
                            "total": 165.0,
                            "unit_based": 0.0
                          },
                          "net": {
                            "percent_based": 440.0,
                            "total": 440.0,
                            "unit_based": 0.0
                          },
                          "reciprocal": {
                            "percent_based": 275.0,
                            "total": 275.0,
                            "unit_based": 0.0
                          }
                        },
                        "effective_rates": {
                          "base": {
                            "percent_based": 0.165,
                            "total": 0.165,
                            "unit_based": 0.0
                          },
                          "net": {
                            "percent_based": 0.44,
                            "total": 0.44,
                            "unit_based": 0.0
                          },
                          "reciprocal": {
                            "percent_based": 0.275,
                            "total": 0.275,
                            "unit_based": 0.0
                          }
                        },
                        "flags": {
                          "calculation_methods": [
                            "simple"
                          ],
                          "has_quota": false,
                          "has_reciprocal": true
                        },
                        "valuation_basis": {
                          "amount": 1000.0,
                          "currency": "USD",
                          "label": "declared_value",
                          "notes": []
                        }
                      },
                      "totals": {
                        "base": {
                          "ad_valorem": 165.0,
                          "specific": 0.0,
                          "total": 165.0
                        },
                        "net": {
                          "ad_valorem": 440.0,
                          "specific": 0.0,
                          "total": 440.0
                        },
                        "reciprocal": {
                          "ad_valorem": 275.0,
                          "specific": 0.0,
                          "total": 275.0
                        }
                      }
                    }
                  ],
                  "errors": null
                }
              }
            }
          },
          "404": {
            "description": "One or more HTS codes not found"
          },
          "422": {
            "description": "Validation error - missing or invalid fields"
          }
        }
      }
    },
    "/rates/multicountry": {
      "post": {
        "tags": [
          "Duty Calculations"
        ],
        "summary": "Evaluate Single Entry Across Multiple Countries",
        "description": "Evaluate tariff duty rates for a single product across multiple countries of origin.\n\nUseful for sourcing decisions and country comparison analysis.\nReturns full evaluation for each specified country.\n\n## Country Keywords\n\nUse special keywords to evaluate against predefined country sets:\n\n| Keyword | Description |\n|---------|-------------|\n| `all` | All countries (~195) |\n| `all-50` | Top 50 US trading partners |\n| `all-75` | Top 75 US trading partners |\n| `all-100` | Top 100 US trading partners |\n| `all-N` | First N countries (max 100) |\n\nKeywords only work when the countries list has exactly one item.\n\n## Example Request\n\n```json\n{\n  \"hts_code\": \"7208.10.15\",\n  \"countries\": [\"all-50\"],\n  \"cost\": 10000,\n  \"qty\": 1000\n}\n```\n\n## Response\n\nReturns an array of calculation results, one per country.",
        "operationId": "evaluate_rate_multicountry_rates_multicountry_post",
        "security": [
          {
            "APIKeyHeader": []
          }
        ],
        "parameters": [
          {
            "name": "include_debug",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "description": "Include debug payloads and trace metadata in the response.",
              "default": false,
              "title": "Include Debug"
            },
            "description": "Include debug payloads and trace metadata in the response."
          },
          {
            "name": "include_reciprocal_debug",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "description": "Include verbose reciprocal evaluation metadata (matched rules, details, base summary).",
              "default": false,
              "title": "Include Reciprocal Debug"
            },
            "description": "Include verbose reciprocal evaluation metadata (matched rules, details, base summary)."
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/APIReqMultiCountry",
                "description": "Single product entry with keyword to evaluate across multiple countries of origin"
              }
            }
          },
          "description": "Single product entry with keyword to evaluate across multiple countries of origin"
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIResponse_list_CalcResponse__"
                },
                "example": {
                  "success": true,
                  "meta": {
                    "timestamp_unixts": 1736800000.0,
                    "operation": "evaluate_rate_multicountry",
                    "params": {},
                    "hts_year": 2025,
                    "hts_version": 27,
                    "result_count": 1
                  },
                  "data": [
                    {
                      "breakdown": [
                        {
                          "applies": true,
                          "description": "T-shirts, singlets, tank tops (cotton)",
                          "id": "base:6109100004:general:i=0",
                          "kind": "base",
                          "line_seq": 1,
                          "percent_of_cost": 0.165,
                          "source_ref": {
                            "hts_code": "6109.10.00.04",
                            "rate_column": "general"
                          },
                          "totals": {
                            "percent_based": 165.0,
                            "total": 165.0,
                            "unit_based": 0.0
                          }
                        },
                        {
                          "applies": true,
                          "description": "China/Hong Kong reciprocal tariff",
                          "id": "repl:9903.01.24",
                          "kind": "reciprocal",
                          "line_seq": 2,
                          "percent_of_cost": 0.1,
                          "source_ref": {
                            "rule_code": "9903.01.24"
                          },
                          "totals": {
                            "percent_based": 100.0,
                            "total": 100.0,
                            "unit_based": 0.0
                          }
                        },
                        {
                          "applies": true,
                          "description": "Universal reciprocal tariff",
                          "id": "repl:9903.01.25",
                          "kind": "reciprocal",
                          "line_seq": 3,
                          "percent_of_cost": 0.1,
                          "source_ref": {
                            "rule_code": "9903.01.25"
                          },
                          "totals": {
                            "percent_based": 100.0,
                            "total": 100.0,
                            "unit_based": 0.0
                          }
                        },
                        {
                          "applies": true,
                          "description": "Section 301 China tariff (List 4A)",
                          "id": "repl:9903.88.15",
                          "kind": "reciprocal",
                          "line_seq": 4,
                          "percent_of_cost": 0.075,
                          "source_ref": {
                            "rule_code": "9903.88.15"
                          },
                          "totals": {
                            "percent_based": 75.0,
                            "total": 75.0,
                            "unit_based": 0.0
                          }
                        },
                        {
                          "applies": true,
                          "description": "Net total (base + reciprocal)",
                          "id": "total:net",
                          "kind": "total",
                          "line_seq": 5,
                          "percent_of_cost": 0.44,
                          "totals": {
                            "percent_based": 440.0,
                            "total": 440.0,
                            "unit_based": 0.0
                          }
                        }
                      ],
                      "components": [
                        {
                          "line_country": "CN",
                          "line_number": 1,
                          "line_percent": 100.0,
                          "line_total_duty": 440.0,
                          "line_value": 1000.0,
                          "rules": [
                            {
                              "description": "T-shirts, singlets, tank tops and similar garments, knitted or crocheted",
                              "duty_advalorem": 165.0,
                              "duty_specific": 0.0,
                              "duty_total": 165.0,
                              "hts_code": "6109.10.00.04",
                              "listed_hts_code": "6109.10.00.00",
                              "listed_rate_text": "16.5%",
                              "programs": [],
                              "rate_basis": "advalorem",
                              "rate_column": "general",
                              "rate_usage": "base",
                              "rate_value": 0.165
                            },
                            {
                              "description": "China/Hong Kong reciprocal tariff",
                              "duty_advalorem": 100.0,
                              "duty_total": 100.0,
                              "hts_code": "9903.01.24",
                              "listed_rate_text": "10%",
                              "rate_basis": "advalorem",
                              "rate_column": "general",
                              "rate_usage": "additional",
                              "rate_value": 0.1
                            },
                            {
                              "description": "Universal reciprocal tariff",
                              "duty_advalorem": 100.0,
                              "duty_total": 100.0,
                              "hts_code": "9903.01.25",
                              "listed_rate_text": "10%",
                              "rate_basis": "advalorem",
                              "rate_column": "general",
                              "rate_usage": "additional",
                              "rate_value": 0.1
                            },
                            {
                              "description": "Section 301 China tariff (List 4A)",
                              "duty_advalorem": 75.0,
                              "duty_total": 75.0,
                              "hts_code": "9903.88.15",
                              "listed_rate_text": "7.5%",
                              "rate_basis": "advalorem",
                              "rate_column": "general",
                              "rate_usage": "additional",
                              "rate_value": 0.075
                            }
                          ]
                        }
                      ],
                      "conditional_exemptions": [],
                      "inputs": {
                        "admitted_to_ftz": false,
                        "cost": 1000.0,
                        "country_of_origin": "CN",
                        "currency_code": "USD",
                        "hts_code": "6109100004",
                        "import_date": "2025-11-28",
                        "include_rules_view": true,
                        "is_civil_aircraft": false,
                        "is_donation": false,
                        "is_informational": false,
                        "is_personal_baggage": false,
                        "loading_date": "2025-11-28",
                        "materials": [],
                        "program_qualified": true,
                        "qty": 1000.0,
                        "qty_uom": "NO",
                        "reciprocal": true,
                        "usmca_claim": false
                      },
                      "inputs_context": {
                        "country": {
                          "common_name": "china",
                          "country_code": "156",
                          "country_name": "people's republic of china",
                          "iso_alpha2": "cn",
                          "iso_alpha3": "chn",
                          "official_name": "people's republic of china",
                          "programs": [
                            {
                              "abbrev": "c",
                              "code": "c",
                              "name": "Agreement on Trade in Civil Aircraft"
                            }
                          ]
                        },
                        "dates": {
                          "import_date_resolved": "2025-11-28",
                          "loading_date_resolved": "2025-11-28"
                        },
                        "hts_revision": {
                          "hts_version": 31,
                          "hts_year": 2025,
                          "source_id": 12
                        },
                        "version_selection": {
                          "effective_start": "2025-11-28",
                          "release_date": "2025-11-28",
                          "selection_method": "import_date",
                          "source_id": 12,
                          "version": 31,
                          "warnings": [],
                          "year": 2025
                        }
                      },
                      "is_composite": false,
                      "reciprocal": {
                        "conditional_exemptions": [],
                        "context": {
                          "base_ad_valorem_rate": 0.165,
                          "country_of_origin": "CN",
                          "hts_code": "6109100004",
                          "import_date": "2025-11-28",
                          "quantity": 1000.0,
                          "rate_column": "general",
                          "value": 1000.0
                        },
                        "rules": [
                          {
                            "additional_duty_rate": 0.1,
                            "applies": true,
                            "computed_amount": 100.0,
                            "description": "China/Hong Kong reciprocal tariff",
                            "rule_code": "9903.01.24"
                          },
                          {
                            "additional_duty_rate": 0.1,
                            "applies": true,
                            "computed_amount": 100.0,
                            "description": "Universal reciprocal tariff",
                            "rule_code": "9903.01.25"
                          },
                          {
                            "additional_duty_rate": 0.075,
                            "applies": true,
                            "computed_amount": 75.0,
                            "description": "Section 301 China tariff (List 4A)",
                            "rule_code": "9903.88.15"
                          }
                        ],
                        "totals": {
                          "additional_duty_amount": 275.0,
                          "additional_rate": 0.275
                        }
                      },
                      "rules": {
                        "base": [
                          {
                            "code": "6109100004",
                            "computed_amount": 165.0,
                            "description": "16.5%",
                            "id": "base:6109100004:general:i=0",
                            "rate_basis": "advalorem",
                            "rate_column": "general",
                            "rate_value": 0.165,
                            "source": "schedule",
                            "type": "base"
                          }
                        ],
                        "reciprocal": [
                          {
                            "applies": true,
                            "code": "9903.01.24",
                            "computed_amount": 100.0,
                            "description": "China/Hong Kong reciprocal tariff",
                            "rate_basis": "advalorem",
                            "rate_value": 0.1,
                            "type": "reciprocal"
                          },
                          {
                            "applies": true,
                            "code": "9903.01.25",
                            "computed_amount": 100.0,
                            "description": "Universal reciprocal tariff",
                            "rate_basis": "advalorem",
                            "rate_value": 0.1,
                            "type": "reciprocal"
                          },
                          {
                            "applies": true,
                            "code": "9903.88.15",
                            "computed_amount": 75.0,
                            "description": "Section 301 China tariff (List 4A)",
                            "rate_basis": "advalorem",
                            "rate_value": 0.075,
                            "type": "reciprocal"
                          }
                        ]
                      },
                      "schema_version": "3.0",
                      "summary": {
                        "cargo_value": {
                          "amount": 1000.0,
                          "currency": "USD",
                          "qty_uom": "NO",
                          "quantity": 1000.0
                        },
                        "currency_code": "USD",
                        "duty_totals": {
                          "base": {
                            "percent_based": 165.0,
                            "total": 165.0,
                            "unit_based": 0.0
                          },
                          "net": {
                            "percent_based": 440.0,
                            "total": 440.0,
                            "unit_based": 0.0
                          },
                          "reciprocal": {
                            "percent_based": 275.0,
                            "total": 275.0,
                            "unit_based": 0.0
                          }
                        },
                        "effective_rates": {
                          "base": {
                            "percent_based": 0.165,
                            "total": 0.165,
                            "unit_based": 0.0
                          },
                          "net": {
                            "percent_based": 0.44,
                            "total": 0.44,
                            "unit_based": 0.0
                          },
                          "reciprocal": {
                            "percent_based": 0.275,
                            "total": 0.275,
                            "unit_based": 0.0
                          }
                        },
                        "flags": {
                          "calculation_methods": [
                            "simple"
                          ],
                          "has_quota": false,
                          "has_reciprocal": true
                        },
                        "valuation_basis": {
                          "amount": 1000.0,
                          "currency": "USD",
                          "label": "declared_value",
                          "notes": []
                        }
                      },
                      "totals": {
                        "base": {
                          "ad_valorem": 165.0,
                          "specific": 0.0,
                          "total": 165.0
                        },
                        "net": {
                          "ad_valorem": 440.0,
                          "specific": 0.0,
                          "total": 440.0
                        },
                        "reciprocal": {
                          "ad_valorem": 275.0,
                          "specific": 0.0,
                          "total": 275.0
                        }
                      }
                    }
                  ],
                  "errors": null
                }
              }
            }
          },
          "400": {
            "description": "Invalid country keyword"
          },
          "404": {
            "description": "HTS code not found"
          },
          "422": {
            "description": "Validation error"
          }
        }
      }
    },
    "/compare/tariff": {
      "post": {
        "tags": [
          "Duty Calculations"
        ],
        "summary": "Compare Multi-Country Tariffs",
        "description": "Compare tariff duties for a single HTS code across multiple countries.\n\nCalculates duty amounts for the same product imported from different\ncountries of origin. Useful for sourcing decisions and trade optimization.\n\n## Use Cases\n\n- **Sourcing decisions**: Compare duty costs across potential suppliers\n- **Trade planning**: Identify lowest-duty import options\n- **Compliance**: Verify country-specific rate variations\n\n## Request Body\n\n- `hts_code`: The HTS code to evaluate (required)\n- `countries`: List of ISO alpha-2 country codes to compare (required)\n- `cost`: Product value for ad valorem duty calculation (required)\n- `qty`: Quantity for specific rate calculations (required)\n- `currency_code`: Currency for cost value (default: USD)\n- `qty_uom`: Unit of measure for quantity\n\n## Response\n\nReturns a dictionary keyed by country code, with each value containing\nthe full duty calculation result (same structure as `/rates/entry`).\n\n## Example Request\n\n```json\n{\n  \"hts_code\": \"7208.10.15\",\n  \"countries\": [\"CN\", \"VN\", \"MX\"],\n  \"cost\": 10000,\n  \"qty\": 1000\n}\n```\n\n## Errors\n\n- **422**: Validation error if required fields are missing",
        "operationId": "compare_tariff_duties_compare_tariff_post",
        "requestBody": {
          "description": "HTS code with list of countries to compare duty rates across",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/APIReqCompareTariff",
                "description": "HTS code with list of countries to compare duty rates across"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful comparison",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIResponse_dict_str__CalcResponse__"
                },
                "example": {
                  "success": true,
                  "meta": {
                    "operation": "compare_tariff",
                    "params": {
                      "hts_code": "7208.10.15",
                      "countries": [
                        "CN",
                        "MX",
                        "VN"
                      ],
                      "cost": 10000,
                      "qty": 1000
                    },
                    "result_count": 3
                  },
                  "data": {
                    "CN": {
                      "duty_total": 2500.0,
                      "effective_rate": 0.25
                    },
                    "MX": {
                      "duty_total": 0.0,
                      "effective_rate": 0.0
                    },
                    "VN": {
                      "duty_total": 500.0,
                      "effective_rate": 0.05
                    }
                  }
                }
              }
            }
          },
          "422": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "example": {
                  "detail": [
                    {
                      "loc": [
                        "body",
                        "hts_code"
                      ],
                      "msg": "field required",
                      "type": "value_error.missing"
                    }
                  ]
                }
              }
            }
          }
        },
        "security": [
          {
            "APIKeyHeader": []
          }
        ]
      }
    },
    "/compare/hts/{hts_code}": {
      "get": {
        "tags": [
          "Version Comparison"
        ],
        "summary": "Compare HTS Rates",
        "description": "Compare duty rates for a single HTS code between two HTS revisions.\n\nTrack how rates for a specific product classification have changed between\ntwo versions of the HTS. Useful for monitoring regulatory changes and\nunderstanding rate evolution over time.\n\n## Use Cases\n\n- **Regulatory tracking**: Monitor rate changes across HTS updates\n- **Impact analysis**: Understand how specific codes were affected by updates\n- **Historical research**: Compare current rates to historical baselines\n\n## Path Parameters\n\n- `hts_code`: The HTS code to compare (e.g., \"7208.10.15\" or \"7208101500\")\n\n## Query Parameters\n\n- `year_a`, `version_a`: First (baseline) HTS revision (required)\n- `year_b`, `version_b`: Second HTS revision (optional, defaults to latest)\n- `include_summary`: Include human-readable change summary\n\n## Response\n\nReturns a comparison object containing:\n- `hts_code`: The compared code\n- `source_a`, `source_b`: Version identifiers\n- `before_rates`, `after_rates`: Full rate details for each version\n- `summary`: Optional text description of changes\n\n## Example\n\nCompare rates between version 15 and 27 of 2025:\n```\nGET /compare/hts/7208.10.15?year_a=2025&version_a=15&year_b=2025&version_b=27\n```\n\n## Errors\n\n- **404**: HTS code not found in one or both revisions\n- **422**: Invalid revision parameters",
        "operationId": "compare_hts_rates_compare_hts__hts_code__get",
        "security": [
          {
            "APIKeyHeader": []
          }
        ],
        "parameters": [
          {
            "name": "hts_code",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "HTS code to compare (dotted or undotted format)",
              "title": "Hts Code"
            },
            "description": "HTS code to compare (dotted or undotted format)"
          },
          {
            "name": "year_a",
            "in": "query",
            "required": true,
            "schema": {
              "type": "integer",
              "maximum": 2030,
              "minimum": 2020,
              "title": "Year A"
            },
            "description": "Year of the first (baseline) HTS revision."
          },
          {
            "name": "version_a",
            "in": "query",
            "required": true,
            "schema": {
              "type": "integer",
              "maximum": 99,
              "minimum": 1,
              "title": "Version A"
            },
            "description": "Version number of the first (baseline) HTS revision."
          },
          {
            "name": "year_b",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer",
                  "maximum": 2030,
                  "minimum": 2020
                },
                {
                  "type": "null"
                }
              ],
              "title": "Year B"
            },
            "description": "Year of the second HTS revision. If not provided, defaults to latest year."
          },
          {
            "name": "version_b",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer",
                  "maximum": 99,
                  "minimum": 1
                },
                {
                  "type": "null"
                }
              ],
              "title": "Version B"
            },
            "description": "Version of the second HTS revision. If not provided, defaults to latest version."
          },
          {
            "name": "include_summary",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "boolean"
                },
                {
                  "type": "null"
                }
              ],
              "default": false,
              "title": "Include Summary"
            },
            "description": "Include a human-readable summary of the changes."
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIResponse_APIRespCompareRate_"
                },
                "example": {
                  "success": true,
                  "meta": {
                    "timestamp_unixts": 1736800000.0,
                    "operation": "compare_hts_rates",
                    "params": {},
                    "hts_year": 2025,
                    "hts_version": 27,
                    "result_count": 1
                  },
                  "data": {
                    "after_rates": {
                      "chapter_name": "Iron and Steel",
                      "description": "Flat-rolled products, pickled",
                      "hts_code": "7208101500",
                      "htsno": "7208.10.15.00",
                      "indent_level": 2,
                      "parent_hts_code": "7208100000",
                      "section_name": "Base Metals and Articles of Base Metal",
                      "units_of_measures": [
                        "kg"
                      ]
                    },
                    "before_rates": {
                      "chapter_name": "Iron and Steel",
                      "description": "Flat-rolled products, pickled",
                      "hts_code": "7208101500",
                      "htsno": "7208.10.15.00",
                      "indent_level": 2,
                      "parent_hts_code": "7208100000",
                      "section_name": "Base Metals and Articles of Base Metal",
                      "units_of_measures": [
                        "kg"
                      ]
                    },
                    "hts_code": "7208101500",
                    "source_a": "2025-v27",
                    "source_b": "2025-v31",
                    "summary": "No rate changes detected"
                  },
                  "errors": null
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/compare/sources": {
      "get": {
        "tags": [
          "Version Comparison"
        ],
        "summary": "Compare Source Versions",
        "description": "Compare two complete HTS source revisions.\n\nPerforms a comprehensive diff between two HTS source versions, identifying\nall codes that were added, removed, or modified. Useful for understanding\nthe full scope of changes between HTS updates.\n\n## Use Cases\n\n- **Release notes**: Generate change summaries for HTS updates\n- **Compliance audits**: Track all regulatory changes between versions\n- **System updates**: Identify data that needs refreshing\n\n## Query Parameters\n\n- `year_a`, `version_a`: First (baseline) HTS revision (required)\n- `year_b`, `version_b`: Second HTS revision (optional, defaults to latest)\n- `include_summary`: Include human-readable summary of all changes\n\n## Response\n\nReturns a comprehensive diff containing:\n- `source_a`, `source_b`: Version identifiers compared\n- `changes`: Categorized changes (added, removed, modified codes)\n- `summary`: Optional text summary of changes\n\n## Example\n\nCompare consecutive versions:\n```\nGET /compare/sources?year_a=2025&version_a=26&year_b=2025&version_b=27\n```\n\n## Notes\n\n- Large comparisons may take several seconds\n- Response size varies based on number of changes\n\n## Errors\n\n- **404**: One or both HTS revisions not found\n- **422**: Invalid revision parameters",
        "operationId": "compare_source_versions_compare_sources_get",
        "security": [
          {
            "APIKeyHeader": []
          }
        ],
        "parameters": [
          {
            "name": "year_a",
            "in": "query",
            "required": true,
            "schema": {
              "type": "integer",
              "maximum": 2030,
              "minimum": 2020,
              "title": "Year A"
            },
            "description": "Year of the first (baseline) HTS revision."
          },
          {
            "name": "version_a",
            "in": "query",
            "required": true,
            "schema": {
              "type": "integer",
              "maximum": 99,
              "minimum": 1,
              "title": "Version A"
            },
            "description": "Version number of the first (baseline) HTS revision."
          },
          {
            "name": "year_b",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer",
                  "maximum": 2030,
                  "minimum": 2020
                },
                {
                  "type": "null"
                }
              ],
              "title": "Year B"
            },
            "description": "Year of the second HTS revision. If not provided, defaults to latest year."
          },
          {
            "name": "version_b",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer",
                  "maximum": 99,
                  "minimum": 1
                },
                {
                  "type": "null"
                }
              ],
              "title": "Version B"
            },
            "description": "Version of the second HTS revision. If not provided, defaults to latest version."
          },
          {
            "name": "include_summary",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "boolean"
                },
                {
                  "type": "null"
                }
              ],
              "default": false,
              "title": "Include Summary"
            },
            "description": "Include a human-readable summary of all changes."
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIResponse_APIRespCompareSources_"
                },
                "example": {
                  "success": true,
                  "meta": {
                    "timestamp_unixts": 1736800000.0,
                    "operation": "compare_source_versions",
                    "params": {},
                    "hts_year": 2025,
                    "hts_version": 27,
                    "result_count": 1
                  },
                  "data": {
                    "changes": {
                      "added": [
                        "9903.01.50"
                      ],
                      "modified": [
                        "7208101500"
                      ],
                      "removed": []
                    },
                    "source_a": "2025-v27",
                    "source_b": "2025-v31",
                    "summary": "1 code added, 0 removed, 1 modified"
                  },
                  "errors": null
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/context/hts/sections": {
      "get": {
        "tags": [
          "Schedule Navigation"
        ],
        "summary": "List HTS Sections",
        "description": "Return a list of all HTS sections with enhanced metadata.\n\nReturns section information including:\n- section_id: Section alias (e.g., \"section_1\")\n- section_number: Numeric section identifier\n- section_label: Human-readable display label\n- chapter_count: Number of chapters in the section\n- chapter_range: String representation of chapter range (e.g., \"1-5\")\n- children: (optional) List of chapter details when include_children=True",
        "operationId": "list_hts_sections_context_hts_sections_get",
        "security": [
          {
            "APIKeyHeader": []
          }
        ],
        "parameters": [
          {
            "name": "hts_date",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Hts Date"
            },
            "description": "Date to find the effective HTS revision (YYYY-MM-DD format). Returns the revision that was in effect on this date."
          },
          {
            "name": "hts_year",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer",
                  "maximum": 2030,
                  "minimum": 2020
                },
                {
                  "type": "null"
                }
              ],
              "title": "Hts Year"
            },
            "description": "HTS revision year. Use with `hts_version` for a specific revision, or alone to get the latest version for that year."
          },
          {
            "name": "hts_version",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer",
                  "maximum": 99,
                  "minimum": 0
                },
                {
                  "type": "null"
                }
              ],
              "title": "Hts Version"
            },
            "description": "HTS revision version number within the year. For example, version 27 of 2025 would be referenced as '2025-v27'."
          },
          {
            "name": "include_children",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "default": false,
              "title": "Include Children"
            },
            "description": "Include chapter details nested under each section."
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIResponse_list_APIRespHtsSection__"
                },
                "example": {
                  "success": true,
                  "meta": {
                    "timestamp_unixts": 1736800000.0,
                    "operation": "list_hts_sections",
                    "params": {},
                    "hts_year": 2025,
                    "hts_version": 27,
                    "result_count": 1
                  },
                  "data": [
                    {
                      "chapter_count": 5,
                      "chapter_range": "1-5",
                      "children": [
                        {
                          "chapter_id": "chapter_1",
                          "chapter_label": "live animals",
                          "chapter_number": 1,
                          "subchapter_count": 0
                        },
                        {
                          "chapter_id": "chapter_2",
                          "chapter_label": "meat and edible meat offal",
                          "chapter_number": 2,
                          "subchapter_count": 0
                        },
                        {
                          "chapter_id": "chapter_3",
                          "chapter_label": "fish and crustaceans, molluscs and other aquatic invertebrates",
                          "chapter_number": 3,
                          "subchapter_count": 0
                        },
                        {
                          "chapter_id": "chapter_4",
                          "chapter_label": "dairy produce; birds eggs; natural honey; edible products of animal origin, n.e.s.o.i.",
                          "chapter_number": 4,
                          "subchapter_count": 0
                        },
                        {
                          "chapter_id": "chapter_5",
                          "chapter_label": "products of animal origin, n.e.s.o.i.",
                          "chapter_number": 5,
                          "subchapter_count": 0
                        }
                      ],
                      "section_id": "section_1",
                      "section_label": "live animals; animal products",
                      "section_number": 1
                    }
                  ],
                  "errors": null
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/context/hts/sections/{section_name}/chapters": {
      "get": {
        "tags": [
          "Schedule Navigation"
        ],
        "summary": "List Chapters by Section",
        "description": "Get all chapters within a specific HTS section.\n\nReturns detailed chapter information for a given section, optionally\nincluding chapter notes/context and HTS codes within each chapter.\n\n## Path Parameters\n\n- `section_name`: Section identifier (e.g., \"section_15\" or \"15\")\n\n## Query Parameters\n\n- `include_context`: Include chapter notes and context text\n- `include_hts_codes`: Include HTS codes within each chapter\n\n## Response\n\nArray of chapter objects with:\n- Chapter number and name\n- Optional notes and context\n- Optional HTS codes\n\n## Errors\n\n- **404**: Section not found or has no chapters",
        "operationId": "list_chapters_by_section_context_hts_sections__section_name__chapters_get",
        "security": [
          {
            "APIKeyHeader": []
          }
        ],
        "parameters": [
          {
            "name": "section_name",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Section identifier (e.g., 'section_1' or '1')",
              "title": "Section Name"
            },
            "description": "Section identifier (e.g., 'section_1' or '1')"
          },
          {
            "name": "hts_date",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Hts Date"
            },
            "description": "Date to find the effective HTS revision (YYYY-MM-DD format). Returns the revision that was in effect on this date."
          },
          {
            "name": "hts_year",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer",
                  "maximum": 2030,
                  "minimum": 2020
                },
                {
                  "type": "null"
                }
              ],
              "title": "Hts Year"
            },
            "description": "HTS revision year. Use with `hts_version` for a specific revision, or alone to get the latest version for that year."
          },
          {
            "name": "hts_version",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer",
                  "maximum": 99,
                  "minimum": 0
                },
                {
                  "type": "null"
                }
              ],
              "title": "Hts Version"
            },
            "description": "HTS revision version number within the year. For example, version 27 of 2025 would be referenced as '2025-v27'."
          },
          {
            "name": "bool_context",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "default": false,
              "title": "Bool Context"
            },
            "description": "Include chapter notes and context information."
          },
          {
            "name": "bool_hts_codes",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "default": false,
              "title": "Bool Hts Codes"
            },
            "description": "Include HTS codes nested under each chapter."
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIResponse_list_APIRespChapterBySection__"
                },
                "example": {
                  "success": true,
                  "meta": {
                    "timestamp_unixts": 1736800000.0,
                    "operation": "list_chapters_by",
                    "params": {},
                    "hts_year": 2025,
                    "hts_version": 27,
                    "result_count": 1
                  },
                  "data": [
                    {
                      "chapter": "chapter_72",
                      "name": "iron and steel",
                      "number": 72,
                      "source_url": "https://hts.usitc.gov/reststop/file?release=2025HTSRev31&filename=Chapter%2072"
                    }
                  ],
                  "errors": null
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/context/hts/batch": {
      "post": {
        "tags": [
          "HTS Codes"
        ],
        "summary": "Get HTS Context Hub (Batch)",
        "description": "Get consolidated context hub for multiple HTS codes in batch.\n\nReturns the same schema as /context/hts/{hts_code}/hub for each code,\norganized as a dictionary keyed by normalized HTS code. This is more\nefficient than making multiple individual requests.\n\nParameters\n----------\nreq : APIReqHtsContextBatch\n    Request body containing:\n    - hts_codes: List of HTS codes to retrieve (max 100)\n    - include: Optional comma-separated sections to include (e.g., \"basic,rates,notes\")\n    - history_lookback: Number of versions to look back for history (default 2)\n    - hts_date, hts_year, hts_version: Revision selectors\n\nReturns\n-------\nAPIResponse\n    Dictionary where keys are normalized HTS codes and values are hub response\n    objects (same schema as /context/hts/{hts_code}/hub). Codes that are not\n    found will have null values.\n\nExample Request:\n    POST /context/hts/batch\n    {\n        \"hts_codes\": [\"7208.10.15.00\", \"6110.20.20.30\", \"9903.88.03\"],\n        \"include\": \"basic,rates\",\n        \"history_lookback\": 2\n    }\n\nExample Response:\n    {\n        \"success\": true,\n        \"meta\": {...},\n        \"data\": {\n            \"7208101500\": {\"hts_code\": \"7208101500\", \"code_type\": \"base\", ...},\n            \"6110202030\": {\"hts_code\": \"6110202030\", \"code_type\": \"base\", ...},\n            \"9903880300\": {\"hts_code\": \"9903880300\", \"code_type\": \"ch99_rule\", ...}\n        }\n    }",
        "operationId": "get_hts_context_hub_batch_context_hts_batch_post",
        "requestBody": {
          "description": "List of HTS codes to retrieve context hub data for (max 100 codes)",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/APIReqHtsContextBatch",
                "description": "List of HTS codes to retrieve context hub data for (max 100 codes)"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIResponse_dict_str__APIRespHtsContextHub__"
                },
                "example": {
                  "success": true,
                  "meta": {
                    "timestamp_unixts": 1736800000.0,
                    "operation": "get_hts_context",
                    "params": {},
                    "hts_year": 2025,
                    "hts_version": 27,
                    "result_count": 1
                  },
                  "data": {
                    "example_key": {
                      "basic": {
                        "code": "7208101500",
                        "description": "Flat-rolled iron/steel, pickled",
                        "formatted_code": "7208.10.15.00"
                      },
                      "code_type": "base",
                      "hts_code": "7208101500"
                    }
                  },
                  "errors": null
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "APIKeyHeader": []
          }
        ]
      }
    },
    "/context/hts/document-index": {
      "get": {
        "tags": [
          "Document Navigation"
        ],
        "summary": "Get Document Navigation Index",
        "description": "Get the complete HTS document navigation index.\n\nReturns a structured index of all document segments:\n- intro: Introductory pages (cover, preface, toc, etc.)\n- general_notes: General notes 1-36 plus rules of interpretation\n- schedule: Sections and chapters (optional, controlled by include_schedule)\n- appendices: Chemical, pharma, and other appendices\n\nThis endpoint provides everything needed to render a full document\nnavigation tree in the HTS Document Browser.\n\nParameters\n----------\nparams : APIReqDocumentIndex\n    Revision information and optional include_schedule flag.\n\nReturns\n-------\nAPIResponse\n    {\n        \"intro\": {label, segment_code, items: [...]},\n        \"general_notes\": {label, segment_code, items: [...]},\n        \"schedule\": {label, segment_code, sections: [...], total_chapters},\n        \"appendices\": {label, segment_code, items: [...]}\n    }",
        "operationId": "get_document_index_context_hts_document_index_get",
        "security": [
          {
            "APIKeyHeader": []
          }
        ],
        "parameters": [
          {
            "name": "hts_date",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Hts Date"
            },
            "description": "Date to find the effective HTS revision (YYYY-MM-DD format). Returns the revision that was in effect on this date."
          },
          {
            "name": "hts_year",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer",
                  "maximum": 2030,
                  "minimum": 2020
                },
                {
                  "type": "null"
                }
              ],
              "title": "Hts Year"
            },
            "description": "HTS revision year. Use with `hts_version` for a specific revision, or alone to get the latest version for that year."
          },
          {
            "name": "hts_version",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer",
                  "maximum": 99,
                  "minimum": 0
                },
                {
                  "type": "null"
                }
              ],
              "title": "Hts Version"
            },
            "description": "HTS revision version number within the year. For example, version 27 of 2025 would be referenced as '2025-v27'."
          },
          {
            "name": "include_schedule",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "default": true,
              "title": "Include Schedule"
            },
            "description": "Include schedule sections and chapters in the index"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIResponse_APIRespDocumentIndex_"
                },
                "example": {
                  "success": true,
                  "meta": {
                    "timestamp_unixts": 1736800000.0,
                    "operation": "get_document_index",
                    "params": {},
                    "hts_year": 2025,
                    "hts_version": 27,
                    "result_count": 1
                  },
                  "data": {
                    "appendices": {
                      "item_count": 4,
                      "items": [
                        {
                          "alias": "chemical_appendix",
                          "id": "apx:01",
                          "title": "Chemical Appendix"
                        }
                      ],
                      "label": "Appendices",
                      "segment_code": "apx"
                    },
                    "general_notes": {
                      "item_count": 38,
                      "items": [
                        {
                          "alias": "general_note_1",
                          "id": "gen:01",
                          "title": "General Note 1"
                        }
                      ],
                      "label": "General Notes",
                      "segment_code": "gen"
                    },
                    "intro": {
                      "item_count": 6,
                      "items": [
                        {
                          "alias": "cover",
                          "id": "int:01",
                          "title": "Cover"
                        }
                      ],
                      "label": "Introductory Pages",
                      "segment_code": "int"
                    }
                  },
                  "errors": null
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/context/document/{document_id}": {
      "get": {
        "tags": [
          "Notes & Documents"
        ],
        "summary": "Get Document Content",
        "description": "Get the full content for a non-chapter document.\n\nSupports three document segments:\n- Intro pages: int:01 (cover), int:02 (change_record), int:03 (preface), etc.\n- General notes: gen:00 (rules), gen:01-36 (numbered notes), gen:99 (statistical)\n- Appendices: apx:01 (chemical), apx:02 (pharma), apx:03 (inter_chemical), apx:04 (statistical)\n\nThe response includes full text content, navigation links to previous/next\ndocuments, and metadata.\n\nTo access section/chapter content, use:\n- /context/notes/content for all notes for a given chapter, section, or subchapter\n- /context/hts/chapter/{chapter_number} for a given chapters hts code schedule information\n\nParameters\n----------\ndocument_id : str\n    Document unique ID in format \"{segment}:{number}\".\nparams : APIReqDocumentContent\n    Revision information (hts_year, hts_version, hts_date).\n\nReturns\n-------\nAPIResponse\n    {\n        \"document_id\": \"gen:11\",\n        \"document_type\": \"general_note\",\n        \"alias\": \"general_note_11\",\n        \"title\": \"General Note 11\",\n        \"content\": \"...\",\n        \"content_lines\": [...],\n        \"related_documents\": [{id, title, position}...],\n        \"metadata\": {...}\n    }",
        "operationId": "get_document_content_context_document__document_id__get",
        "security": [
          {
            "APIKeyHeader": []
          }
        ],
        "parameters": [
          {
            "name": "document_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Document unique ID (e.g., 'int:01', 'gen:11', 'apx:01')",
              "examples": [
                "int:01",
                "gen:11",
                "apx:01"
              ],
              "title": "Document Id"
            },
            "description": "Document unique ID (e.g., 'int:01', 'gen:11', 'apx:01')"
          },
          {
            "name": "hts_date",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Hts Date"
            },
            "description": "Date to find the effective HTS revision (YYYY-MM-DD format). Returns the revision that was in effect on this date."
          },
          {
            "name": "hts_year",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer",
                  "maximum": 2030,
                  "minimum": 2020
                },
                {
                  "type": "null"
                }
              ],
              "title": "Hts Year"
            },
            "description": "HTS revision year. Use with `hts_version` for a specific revision, or alone to get the latest version for that year."
          },
          {
            "name": "hts_version",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer",
                  "maximum": 99,
                  "minimum": 0
                },
                {
                  "type": "null"
                }
              ],
              "title": "Hts Version"
            },
            "description": "HTS revision version number within the year. For example, version 27 of 2025 would be referenced as '2025-v27'."
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIResponse_APIRespDocumentContent_"
                },
                "example": {
                  "success": true,
                  "meta": {
                    "timestamp_unixts": 1736800000.0,
                    "operation": "get_document_content",
                    "params": {},
                    "hts_year": 2025,
                    "hts_version": 27,
                    "result_count": 1
                  },
                  "data": {
                    "alias": "general_note_1",
                    "content": "Tariff Treatment of Imported Goods...",
                    "content_lines": [
                      "Tariff Treatment of Imported Goods..."
                    ],
                    "document_id": "gen:01",
                    "document_type": "general_note",
                    "metadata": {
                      "source_url": "https://hts.usitc.gov/..."
                    },
                    "related_documents": [
                      {
                        "id": "gen:00",
                        "position": "previous",
                        "title": "Rules of Interpretation"
                      },
                      {
                        "id": "gen:02",
                        "position": "next",
                        "title": "General Note 2"
                      }
                    ],
                    "title": "General Note 1"
                  },
                  "errors": null
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/context/hts/{hts_code}": {
      "get": {
        "tags": [
          "HTS Codes"
        ],
        "summary": "Get HTS Code Context",
        "description": "Get detailed context for a specific HTS code.\n\nReturns comprehensive information about an HTS code including its description,\nposition in the hierarchy, and optionally reciprocal rate evaluation.\n\n## Response Includes\n\n- **Basic info**: HTS code, description, indent level, section/chapter context\n- **Rates**: Available duty rate components (general, special, column 2)\n- **Hierarchy**: Parent code, section/chapter/heading names\n- **Reciprocal** (optional): Full Chapter 99 rate evaluation when `reciprocal=true`\n\n## Reciprocal Rate Evaluation\n\nWhen `reciprocal=true`, additional parameters unlock full duty calculation:\n- `country_of_origin`: Required for reciprocal evaluation\n- `value` (customs value), `quantity`: For calculating actual duty amounts\n- `import_date`, `loading_date`: For date-sensitive exclusions\n- Special flags: `admitted_to_ftz`, `usmca_claim`, `is_donation`, etc.\n\n## Examples\n\nBasic context:\n```\nGET /context/hts/7208.10.15\n```\n\nWith reciprocal evaluation:\n```\nGET /context/hts/7208.10.15?reciprocal=true&country_of_origin=CN&value=10000\n```\n\n## Errors\n\n- **404**: HTS code not found\n- **400**: Invalid parameters for reciprocal evaluation",
        "operationId": "get_hts_code_context_context_hts__hts_code__get",
        "security": [
          {
            "APIKeyHeader": []
          }
        ],
        "parameters": [
          {
            "name": "hts_code",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "HTS code (dotted or undotted format)",
              "title": "Hts Code"
            },
            "description": "HTS code (dotted or undotted format)"
          },
          {
            "name": "hts_date",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Hts Date"
            },
            "description": "Date to find the effective HTS revision (YYYY-MM-DD format). Returns the revision that was in effect on this date."
          },
          {
            "name": "hts_year",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer",
                  "maximum": 2030,
                  "minimum": 2020
                },
                {
                  "type": "null"
                }
              ],
              "title": "Hts Year"
            },
            "description": "HTS revision year. Use with `hts_version` for a specific revision, or alone to get the latest version for that year."
          },
          {
            "name": "hts_version",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer",
                  "maximum": 99,
                  "minimum": 0
                },
                {
                  "type": "null"
                }
              ],
              "title": "Hts Version"
            },
            "description": "HTS revision version number within the year. For example, version 27 of 2025 would be referenced as '2025-v27'."
          },
          {
            "name": "reciprocal",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "default": false,
              "title": "Reciprocal"
            },
            "description": "Include reciprocal rate evaluation in the response."
          },
          {
            "name": "country_of_origin",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Country Of Origin"
            },
            "description": "Country of origin used for rate selection and reciprocity. Required when reciprocal=true."
          },
          {
            "name": "import_date",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string",
                  "format": "date"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Import Date"
            },
            "description": "Import date (YYYY-MM-DD) used for reciprocal rate evaluation."
          },
          {
            "name": "loading_date",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string",
                  "format": "date"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Loading Date"
            },
            "description": "Transit loading date (YYYY-MM-DD) used for reciprocal exclusions."
          },
          {
            "name": "rate_column",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Rate Column"
            },
            "description": "Specific rate column to evaluate (defaults to the base rate column)."
          },
          {
            "name": "value",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "number"
                },
                {
                  "type": "string",
                  "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Value"
            },
            "description": "Customs value used when computing reciprocal duty amounts. Required for duty amount calculations when reciprocal=true. Query parameter name: value."
          },
          {
            "name": "quantity",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "number"
                },
                {
                  "type": "string",
                  "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Quantity"
            },
            "description": "Quantity value for rate computations. When reciprocal=true, quantity must be a whole number."
          },
          {
            "name": "admitted_to_ftz",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "default": false,
              "title": "Admitted To Ftz"
            },
            "description": "Whether the goods are admitted to a foreign trade zone."
          },
          {
            "name": "materials",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Materials"
            },
            "description": "JSON-encoded array of material components (steel, aluminum, etc.) with value and process metadata. URL-encode the JSON string when using GET."
          },
          {
            "name": "include_reciprocal_debug",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "default": false,
              "title": "Include Reciprocal Debug"
            },
            "description": "Return verbose reciprocal metadata (matched rules, details, base summary)."
          },
          {
            "name": "is_donation",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "default": false,
              "title": "Is Donation"
            },
            "description": "Treat the shipment as a qualifying humanitarian donation."
          },
          {
            "name": "is_informational",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "default": false,
              "title": "Is Informational"
            },
            "description": "Indicates that the goods are informational materials."
          },
          {
            "name": "is_personal_baggage",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "default": false,
              "title": "Is Personal Baggage"
            },
            "description": "Flag shipments consisting of personal accompanied baggage."
          },
          {
            "name": "usmca_claim",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "default": false,
              "title": "Usmca Claim"
            },
            "description": "Preferential treatment claimed under USMCA."
          },
          {
            "name": "program_qualified",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "default": true,
              "title": "Program Qualified"
            },
            "description": "Declarant affirms eligibility for special program claims. When false, special program rates are ignored."
          },
          {
            "name": "chapter98_provision",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Chapter98 Provision"
            },
            "description": "Specific Chapter 98 provision claimed for the entry, when any."
          },
          {
            "name": "is_civil_aircraft",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "default": false,
              "title": "Is Civil Aircraft"
            },
            "description": "Flag for civil aircraft parts eligible for Note 35 exemptions (9903.96.01, 9903.96.02)."
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIResponse_APIRespDataHtsCodeHub_"
                },
                "example": {
                  "success": true,
                  "meta": {
                    "timestamp_unixts": 1736800000.0,
                    "operation": "get_hts_code",
                    "params": {},
                    "hts_year": 2025,
                    "hts_version": 27,
                    "result_count": 1
                  },
                  "data": {
                    "details": {
                      "chapter_name": "iron and steel",
                      "description": "pickled",
                      "footnotes": {
                        "general": [
                          {
                            "hts_refs": [],
                            "type": "endnote",
                            "value": "See U.S. note 16 to subchapter III, chapter 99."
                          },
                          {
                            "hts_refs": [
                              "9903.91.01"
                            ],
                            "type": "endnote",
                            "value": "See 9903.91.01."
                          }
                        ]
                      },
                      "heading_name": "flatrolled products of iron or nonalloy steel of a width of 600 mm or more hotrolled not clad plated or coated",
                      "hts_code": "7208101500",
                      "htsno": "7208.10.15.00",
                      "indent_level": 2,
                      "parent_hts_code": "7208100000",
                      "rate_components": [],
                      "section_name": "base metals and articles of base metal",
                      "subheading_name": "in coils not further worked than hotrolled with patterns in relief",
                      "suffix_name": "pickled",
                      "units_of_measures": [
                        "kg"
                      ]
                    },
                    "rates": [
                      {
                        "base_text": "free",
                        "component_text": "free",
                        "conditions": [],
                        "hts_code": "7208101500",
                        "htsno": "7208.10.15.00",
                        "lst_footnotes_hts_refs": [
                          "9903.91.01"
                        ],
                        "lst_footnotes_text": [
                          "See U.S. note 16 to subchapter III, chapter 99.",
                          "See 9903.91.01."
                        ],
                        "lst_hts_refs": [],
                        "lst_programs": [],
                        "match_scenario": "free",
                        "rate_basis": "free",
                        "rate_column": "general",
                        "rate_usage": "base"
                      }
                    ]
                  },
                  "errors": null
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/context/hts/{hts_code}/details": {
      "get": {
        "tags": [
          "HTS Codes"
        ],
        "summary": "Get HTS Code Details",
        "description": "Get comprehensive details for a single HTS code.\n\nReturns description, rates, units of measure, and all related information\nin a flat structure optimized for single-code retrieval.\n\nParameters\n----------\nhts_code:\n    The HTS code to retrieve details for.\nparams:\n    Revision information such as ``hts_year`` and ``hts_version``.\nengine:\n    Database query engine used to fetch the details.\n\nReturns\n-------\nOptional[APIResponse]\n    The fetched HTS record with all details and rates in a flat structure.",
        "operationId": "get_hts_code_details_context_hts__hts_code__details_get",
        "security": [
          {
            "APIKeyHeader": []
          }
        ],
        "parameters": [
          {
            "name": "hts_code",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "HTS code to retrieve",
              "title": "Hts Code"
            },
            "description": "HTS code to retrieve"
          },
          {
            "name": "hts_date",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Hts Date"
            },
            "description": "Date to find the effective HTS revision (YYYY-MM-DD format). Returns the revision that was in effect on this date."
          },
          {
            "name": "hts_year",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer",
                  "maximum": 2030,
                  "minimum": 2020
                },
                {
                  "type": "null"
                }
              ],
              "title": "Hts Year"
            },
            "description": "HTS revision year. Use with `hts_version` for a specific revision, or alone to get the latest version for that year."
          },
          {
            "name": "hts_version",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer",
                  "maximum": 99,
                  "minimum": 0
                },
                {
                  "type": "null"
                }
              ],
              "title": "Hts Version"
            },
            "description": "HTS revision version number within the year. For example, version 27 of 2025 would be referenced as '2025-v27'."
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIResponse_APIRespDataHtsCodeContext_"
                },
                "example": {
                  "success": true,
                  "meta": {
                    "timestamp_unixts": 1736800000.0,
                    "operation": "get_hts_code",
                    "params": {},
                    "hts_year": 2025,
                    "hts_version": 27,
                    "result_count": 1
                  },
                  "data": {
                    "chapter_name": "iron and steel",
                    "description": "pickled",
                    "footnotes": {
                      "general": [
                        {
                          "hts_refs": [],
                          "type": "endnote",
                          "value": "See U.S. note 16 to subchapter III, chapter 99."
                        },
                        {
                          "hts_refs": [
                            "9903.91.01"
                          ],
                          "type": "endnote",
                          "value": "See 9903.91.01."
                        }
                      ]
                    },
                    "heading_name": "flatrolled products of iron or nonalloy steel of a width of 600 mm or more hotrolled not clad plated or coated",
                    "hts_code": "7208101500",
                    "htsno": "7208.10.15.00",
                    "indent_level": 2,
                    "parent_hts_code": "7208100000",
                    "rates": [
                      {
                        "base_text": "free",
                        "component_text": "free",
                        "conditions": [],
                        "hts_code": "7208101500",
                        "htsno": "7208.10.15.00",
                        "lst_footnotes_hts_refs": [
                          "9903.91.01"
                        ],
                        "lst_footnotes_text": [
                          "See U.S. note 16 to subchapter III, chapter 99.",
                          "See 9903.91.01."
                        ],
                        "lst_hts_refs": [],
                        "lst_programs": [],
                        "match_scenario": "free",
                        "rate_basis": "free",
                        "rate_column": "general",
                        "rate_usage": "base"
                      },
                      {
                        "base_text": "0.4c/kg + 20%",
                        "component_text": "0.4c/kg",
                        "conditions": [],
                        "hts_code": "7208101500",
                        "htsno": "7208.10.15.00",
                        "lst_footnotes_hts_refs": [],
                        "lst_footnotes_text": [],
                        "lst_hts_refs": [],
                        "lst_programs": [],
                        "match_scenario": "specific_rate_pattern_1",
                        "rate_basis": "specific",
                        "rate_column": "other",
                        "rate_usage": "base",
                        "rate_value": 0.004,
                        "uom": "kilogram",
                        "uom_extra": ""
                      }
                    ],
                    "section_name": "base metals and articles of base metal",
                    "subheading_name": "in coils not further worked than hotrolled with patterns in relief",
                    "suffix_name": "pickled",
                    "units_of_measures": [
                      "kg"
                    ]
                  },
                  "errors": null
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/context/hts/{hts_code}/hub": {
      "get": {
        "tags": [
          "HTS Codes"
        ],
        "summary": "Get HTS Context Hub",
        "description": "Get consolidated context hub for any HTS code.\n\nReturns comprehensive context information based on code type:\n- **Base codes (chapters 1-98):** rates, notes, materials, footnotes, history\n- **Ch99 rules (chapter 99):** rule details, country/product scope, interactions\n\nParameters\n----------\nhts_code:\n    The HTS code to retrieve context for (with or without dots)\ninclude:\n    Comma-separated list of sections to include (e.g., \"basic,rates,notes\").\n    If not provided, all sections are returned.\nhistory_lookback:\n    Number of versions to look back for the history timeline.\n    Default is 2. Forward versions (to latest) are always included; lookback\n    is only applied when the requested version is the latest.\nparams:\n    Revision information such as ``hts_year`` and ``hts_version``.\n\nReturns\n-------\nAPIResponse\n    Consolidated context hub with sections based on code type.\n\nExample Response (Base Code):\n    {\n        \"hts_code\": \"6110202030\",\n        \"code_type\": \"base\",\n        \"basic\": {...},\n        \"rates\": {...},\n        \"notes\": {...},\n        \"materials\": {...},\n        ...\n    }\n\nExample Response (Ch99 Rule):\n    {\n        \"hts_code\": \"9903880300\",\n        \"code_type\": \"ch99_rule\",\n        \"basic\": {...},\n        \"rule\": {...},\n        \"country_scope\": {...},\n        \"product_scope\": {...},\n        ...\n    }",
        "operationId": "get_hts_context_hub_context_hts__hts_code__hub_get",
        "security": [
          {
            "APIKeyHeader": []
          }
        ],
        "parameters": [
          {
            "name": "hts_code",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "HTS code to retrieve context for",
              "title": "Hts Code"
            },
            "description": "HTS code to retrieve context for"
          },
          {
            "name": "include",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Comma-separated list of hub sections to include (e.g., 'basic,rates,notes'). If not provided, all sections are returned. Supported values: basic, rates, classification, notes, materials, footnotes, units_of_measure, history, rules (Ch99 only).",
              "examples": [
                "basic,rates,notes"
              ],
              "title": "Include"
            },
            "description": "Comma-separated list of hub sections to include (e.g., 'basic,rates,notes'). If not provided, all sections are returned. Supported values: basic, rates, classification, notes, materials, footnotes, units_of_measure, history, rules (Ch99 only)."
          },
          {
            "name": "history_lookback",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 10,
              "minimum": 0,
              "description": "Number of versions to look back when the requested version is the latest.",
              "default": 2,
              "title": "History Lookback"
            },
            "description": "Number of versions to look back when the requested version is the latest."
          },
          {
            "name": "hts_date",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Hts Date"
            },
            "description": "Date to find the effective HTS revision (YYYY-MM-DD format). Returns the revision that was in effect on this date."
          },
          {
            "name": "hts_year",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer",
                  "maximum": 2030,
                  "minimum": 2020
                },
                {
                  "type": "null"
                }
              ],
              "title": "Hts Year"
            },
            "description": "HTS revision year. Use with `hts_version` for a specific revision, or alone to get the latest version for that year."
          },
          {
            "name": "hts_version",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer",
                  "maximum": 99,
                  "minimum": 0
                },
                {
                  "type": "null"
                }
              ],
              "title": "Hts Version"
            },
            "description": "HTS revision version number within the year. For example, version 27 of 2025 would be referenced as '2025-v27'."
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIResponse_APIRespHtsContextHub_"
                },
                "example": {
                  "success": true,
                  "meta": {
                    "timestamp_unixts": 1736800000.0,
                    "operation": "get_hts_context",
                    "params": {},
                    "hts_year": 2025,
                    "hts_version": 27,
                    "result_count": 1
                  },
                  "data": {
                    "basic": {
                      "code": "7208101500",
                      "description": "Flat-rolled iron/steel, pickled",
                      "formatted_code": "7208.10.15.00"
                    },
                    "code_type": "base",
                    "hts_code": "7208101500"
                  },
                  "errors": null
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/context/hts/{hts_code}/history": {
      "get": {
        "tags": [
          "Version Comparison"
        ],
        "summary": "Get HTS Code History",
        "description": "Return the revision history for a specific HTS code across all versions.",
        "operationId": "get_hts_code_history_context_hts__hts_code__history_get",
        "security": [
          {
            "APIKeyHeader": []
          }
        ],
        "parameters": [
          {
            "name": "hts_code",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "HTS code to retrieve",
              "title": "Hts Code"
            },
            "description": "HTS code to retrieve"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIResponse_list_APIRespDataHtsCodeHistory__"
                },
                "example": {
                  "success": true,
                  "meta": {
                    "timestamp_unixts": 1736800000.0,
                    "operation": "get_hts_code",
                    "params": {},
                    "hts_year": 2025,
                    "hts_version": 27,
                    "result_count": 1
                  },
                  "data": [
                    {
                      "hts_entry": {
                        "description": "T-shirts, singlets, tank tops and similar garments, knitted or crocheted",
                        "hts_code": "6109100004",
                        "htsno": "6109.10.00.04"
                      },
                      "version": 31,
                      "year": 2025
                    }
                  ],
                  "errors": null
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/context/hts/chapter/{chapter_number}": {
      "get": {
        "tags": [
          "Schedule"
        ],
        "summary": "Get Chapter Details",
        "description": "Return metadata, notes, and HTS codes for a given HTS chapter.\n\nParameters\n----------\nchapter_number:\n    Numeric chapter identifier to fetch.\nparams:\n    Revision context and options including:\n    - hts_year, hts_version, hts_date: Revision selectors\n    - include_context: Include chapter notes/context (default False, can be large)\n    - include_rates: Include full rate component details (default True)\nengine:\n    Database query engine dependency used for retrieval.\n\nReturns\n-------\nOptional[APIResponse]\n    API response with the chapter details including enriched HTS codes with:\n    - context: Chapter notes (only when include_context=True)\n    - rates: Object with general/special/other columns containing rate components\n    - rate_summary: Aggregated flags and all programs\n    - hierarchy: Section/chapter/heading/subheading names",
        "operationId": "get_hts_chapter_details_context_hts_chapter__chapter_number__get",
        "security": [
          {
            "APIKeyHeader": []
          }
        ],
        "parameters": [
          {
            "name": "chapter_number",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "description": "HTS chapter number",
              "title": "Chapter Number"
            },
            "description": "HTS chapter number"
          },
          {
            "name": "hts_date",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Hts Date"
            },
            "description": "Date to find the effective HTS revision (YYYY-MM-DD format). Returns the revision that was in effect on this date."
          },
          {
            "name": "hts_year",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer",
                  "maximum": 2030,
                  "minimum": 2020
                },
                {
                  "type": "null"
                }
              ],
              "title": "Hts Year"
            },
            "description": "HTS revision year. Use with `hts_version` for a specific revision, or alone to get the latest version for that year."
          },
          {
            "name": "hts_version",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer",
                  "maximum": 99,
                  "minimum": 0
                },
                {
                  "type": "null"
                }
              ],
              "title": "Hts Version"
            },
            "description": "HTS revision version number within the year. For example, version 27 of 2025 would be referenced as '2025-v27'."
          },
          {
            "name": "subchapter_number",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Subchapter Number"
            },
            "description": "Filter to a specific subchapter (e.g., 3 for 9903.xx.xx codes). Only applicable for Chapter 99."
          },
          {
            "name": "hts_code",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Hts Code"
            },
            "description": "Filter to a specific HTS code (e.g., '9903.88.03' or '9903880300'). When provided, returns only that code if it exists in the chapter. Useful for lazy-loading specific codes that may be outside the current pagination window."
          },
          {
            "name": "include_context",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "default": false,
              "title": "Include Context"
            },
            "description": "Include chapter notes/context (can be large). Default False."
          },
          {
            "name": "include_rates",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "default": true,
              "title": "Include Rates"
            },
            "description": "Include full rate component details for each HTS code."
          },
          {
            "name": "include_deprecated",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "default": false,
              "title": "Include Deprecated"
            },
            "description": "Include deprecated HTS codes in response. Default False (excludes deprecated)."
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer",
                  "maximum": 5000,
                  "minimum": 1
                },
                {
                  "type": "null"
                }
              ],
              "title": "Limit"
            },
            "description": "Maximum number of HTS codes to return. If not set, returns all codes."
          },
          {
            "name": "offset",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer",
                  "minimum": 0
                },
                {
                  "type": "null"
                }
              ],
              "title": "Offset"
            },
            "description": "Number of HTS codes to skip before returning results. Used with limit for pagination."
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIResponse_APIRespDataChapterContext_"
                },
                "example": {
                  "success": true,
                  "meta": {
                    "timestamp_unixts": 1736800000.0,
                    "operation": "get_hts_chapter",
                    "params": {},
                    "hts_year": 2025,
                    "hts_version": 27,
                    "result_count": 1
                  },
                  "data": {
                    "chapter": "chapter_72",
                    "name": "Iron and Steel",
                    "number": 72
                  },
                  "errors": null
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/context/hts/section/{section_number}": {
      "get": {
        "tags": [
          "Schedule"
        ],
        "summary": "Get Section Details",
        "description": "Return details for a specific HTS section.\n\nParameters\n----------\nsection_number:\n    Section identifier (1-22) to fetch.\nparams:\n    Additional revision options controlling which dataset is queried.\nengine:\n    Query engine instance used to pull the section data.\n\nReturns\n-------\nOptional[APIResponse]\n    Structured response containing section metadata, or ``None`` if the\n    requested section does not exist.",
        "operationId": "get_hts_section_details_context_hts_section__section_number__get",
        "security": [
          {
            "APIKeyHeader": []
          }
        ],
        "parameters": [
          {
            "name": "section_number",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "description": "HTS section number",
              "title": "Section Number"
            },
            "description": "HTS section number"
          },
          {
            "name": "hts_date",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Hts Date"
            },
            "description": "Date to find the effective HTS revision (YYYY-MM-DD format). Returns the revision that was in effect on this date."
          },
          {
            "name": "hts_year",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer",
                  "maximum": 2030,
                  "minimum": 2020
                },
                {
                  "type": "null"
                }
              ],
              "title": "Hts Year"
            },
            "description": "HTS revision year. Use with `hts_version` for a specific revision, or alone to get the latest version for that year."
          },
          {
            "name": "hts_version",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer",
                  "maximum": 99,
                  "minimum": 0
                },
                {
                  "type": "null"
                }
              ],
              "title": "Hts Version"
            },
            "description": "HTS revision version number within the year. For example, version 27 of 2025 would be referenced as '2025-v27'."
          },
          {
            "name": "include_chapter_details",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "default": false,
              "title": "Include Chapter Details"
            },
            "description": "Include detailed chapter information nested under the section."
          },
          {
            "name": "include_tariff_schedules",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "default": false,
              "title": "Include Tariff Schedules"
            },
            "description": "Include tariff schedule entries for each chapter in the section."
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIResponse_APIRespDataSectionContext_"
                },
                "example": {
                  "success": true,
                  "meta": {
                    "timestamp_unixts": 1736800000.0,
                    "operation": "get_hts_section",
                    "params": {},
                    "hts_year": 2025,
                    "hts_version": 27,
                    "result_count": 1
                  },
                  "data": {
                    "chapters": [],
                    "name": "Base Metals and Articles of Base Metal",
                    "number": 15,
                    "section": "section_15"
                  },
                  "errors": null
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/context/countries/{identifier}": {
      "get": {
        "tags": [
          "Countries"
        ],
        "summary": "Get Country Details",
        "description": "Get detailed reference information for a specific country.\n\nReturns normalized country data including ISO codes, official names,\ntrade program eligibility, and sanction status.\n\n## Path Parameters\n\n- **identifier**: Country code (ISO alpha-2 or alpha-3) or country name\n\n## Response\n\nReturns a `CountryRecord` with:\n- ISO codes (alpha-2, alpha-3, numeric)\n- Official and common names\n- Eligible trade programs\n- Sanction status (if any)\n\n## Examples\n\n```\nGET /context/countries/CN\nGET /context/countries/USA\nGET /context/countries/Germany\n```",
        "operationId": "get_country_details_context_countries__identifier__get",
        "security": [
          {
            "APIKeyHeader": []
          }
        ],
        "parameters": [
          {
            "name": "identifier",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Country name or code",
              "title": "Identifier"
            },
            "description": "Country name or code"
          },
          {
            "name": "hts_date",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Hts Date"
            },
            "description": "Date to find the effective HTS revision (YYYY-MM-DD format). Returns the revision that was in effect on this date."
          },
          {
            "name": "hts_year",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer",
                  "maximum": 2030,
                  "minimum": 2020
                },
                {
                  "type": "null"
                }
              ],
              "title": "Hts Year"
            },
            "description": "HTS revision year. Use with `hts_version` for a specific revision, or alone to get the latest version for that year."
          },
          {
            "name": "hts_version",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer",
                  "maximum": 99,
                  "minimum": 0
                },
                {
                  "type": "null"
                }
              ],
              "title": "Hts Version"
            },
            "description": "HTS revision version number within the year. For example, version 27 of 2025 would be referenced as '2025-v27'."
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIResponse_CountryRecord_"
                },
                "example": {
                  "success": true,
                  "meta": {
                    "timestamp_unixts": 1736800000.0,
                    "operation": "get_country_details",
                    "params": {},
                    "hts_year": 2025,
                    "hts_version": 27,
                    "result_count": 1
                  },
                  "data": {
                    "aliases": [
                      "cn",
                      "chn",
                      "156",
                      "china",
                      "people's republic of china"
                    ],
                    "common_name": "china",
                    "country_code": "156",
                    "country_name": "china",
                    "iso_alpha2": "CN",
                    "iso_alpha3": "CHN",
                    "official_name": "people's republic of china",
                    "programs": []
                  },
                  "errors": null
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/context/countries": {
      "get": {
        "tags": [
          "Countries"
        ],
        "summary": "List All Countries",
        "description": "Fetch reference information for all countries.",
        "operationId": "list_countries_context_countries_get",
        "security": [
          {
            "APIKeyHeader": []
          }
        ],
        "parameters": [
          {
            "name": "hts_date",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Hts Date"
            },
            "description": "Date to find the effective HTS revision (YYYY-MM-DD format). Returns the revision that was in effect on this date."
          },
          {
            "name": "hts_year",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer",
                  "maximum": 2030,
                  "minimum": 2020
                },
                {
                  "type": "null"
                }
              ],
              "title": "Hts Year"
            },
            "description": "HTS revision year. Use with `hts_version` for a specific revision, or alone to get the latest version for that year."
          },
          {
            "name": "hts_version",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer",
                  "maximum": 99,
                  "minimum": 0
                },
                {
                  "type": "null"
                }
              ],
              "title": "Hts Version"
            },
            "description": "HTS revision version number within the year. For example, version 27 of 2025 would be referenced as '2025-v27'."
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIResponse_list_CountryRecord__"
                },
                "example": {
                  "success": true,
                  "meta": {
                    "timestamp_unixts": 1736800000.0,
                    "operation": "list_countries_context",
                    "params": {},
                    "hts_year": 2025,
                    "hts_version": 27,
                    "result_count": 1
                  },
                  "data": [
                    {
                      "aliases": [
                        "cn",
                        "chn",
                        "156",
                        "china",
                        "people's republic of china"
                      ],
                      "common_name": "china",
                      "country_code": "156",
                      "country_name": "china",
                      "iso_alpha2": "CN",
                      "iso_alpha3": "CHN",
                      "official_name": "people's republic of china",
                      "programs": []
                    }
                  ],
                  "errors": null
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/context/countries/batch": {
      "post": {
        "tags": [
          "Countries"
        ],
        "summary": "Get Countries (Batch)",
        "description": "Fetch reference information for multiple countries.",
        "operationId": "get_countries_batch_context_countries_batch_post",
        "requestBody": {
          "description": "List of country identifiers (ISO codes or names) to retrieve reference data for",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/APIReqCountryBatch",
                "description": "List of country identifiers (ISO codes or names) to retrieve reference data for"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIResponse_dict_str__CountryRecord__"
                },
                "example": {
                  "success": true,
                  "meta": {
                    "timestamp_unixts": 1736800000.0,
                    "operation": "get_countries_batch",
                    "params": {},
                    "hts_year": 2025,
                    "hts_version": 27,
                    "result_count": 1
                  },
                  "data": {
                    "example_key": {
                      "aliases": [
                        "cn",
                        "chn",
                        "156",
                        "china",
                        "people's republic of china"
                      ],
                      "common_name": "china",
                      "country_code": "156",
                      "country_name": "china",
                      "iso_alpha2": "CN",
                      "iso_alpha3": "CHN",
                      "official_name": "people's republic of china",
                      "programs": []
                    }
                  },
                  "errors": null
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "APIKeyHeader": []
          }
        ]
      }
    },
    "/context/programs": {
      "get": {
        "tags": [
          "Trade Programs"
        ],
        "summary": "List Trade Programs",
        "description": "Get overview of all tariff preference programs.\n\nReturns a comprehensive list of trade programs with membership\ncounts, expiration dates, and sanction information.\n\n## Response\n\nReturns an object with a `programs` array, each containing:\n- **program_code**: Program identifier (e.g., \"A\", \"CA\")\n- **program_name**: Full program name\n- **program_abbrev**: Common abbreviation\n- **expiration_date**: When the program expires (if applicable)\n- **has_expired**: Whether the program is currently expired\n- **country_count**: Number of participating countries\n- **countries**: List of participating countries (when include_countries=true)\n\n## Query Parameters\n\n- **search**: Filter programs by name or code\n- **include_countries**: Include full country lists (default: false)",
        "operationId": "get_trade_programs_context_programs_get",
        "security": [
          {
            "APIKeyHeader": []
          }
        ],
        "parameters": [
          {
            "name": "hts_date",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Hts Date"
            },
            "description": "Date to determine program effectivity (YYYY-MM-DD). Programs expired before this date can be excluded."
          },
          {
            "name": "search",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Search"
            },
            "description": "Filter programs by name or code containing this text."
          },
          {
            "name": "region",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Region"
            },
            "description": "Filter to programs for a specific geographic region."
          },
          {
            "name": "include_expired",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "default": false,
              "title": "Include Expired"
            },
            "description": "Include expired programs in results. Default excludes expired."
          },
          {
            "name": "include_country_details",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "default": true,
              "title": "Include Country Details"
            },
            "description": "Include full country details for each program's member countries."
          },
          {
            "name": "include_links",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "default": false,
              "title": "Include Links"
            },
            "description": "Include reference links to official program documentation."
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "anyOf": [
                  {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  },
                  {
                    "type": "null"
                  }
                ],
                "title": "Filter On Countries"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIResponse_APIRespProgramsOverview_"
                },
                "example": {
                  "success": true,
                  "meta": {
                    "timestamp_unixts": 1736800000.0,
                    "operation": "get_trade_programs",
                    "params": {},
                    "hts_year": 2025,
                    "hts_version": 27,
                    "result_count": 1
                  },
                  "data": {
                    "programs": [
                      {
                        "is_sanctioned": false,
                        "member_count": 119,
                        "program_code": "A",
                        "program_name": "Generalized System of Preferences (GSP)"
                      },
                      {
                        "is_sanctioned": false,
                        "member_count": 1,
                        "program_code": "AU",
                        "program_name": "United States-Australia Free Trade Agreement"
                      }
                    ]
                  },
                  "errors": null
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/context/programs/{program_code}/countries": {
      "get": {
        "tags": [
          "Trade Programs"
        ],
        "summary": "Get Program Countries",
        "description": "List the countries that participate in a tariff program.\n\nParameters\n----------\nprogram_code:\n    Tariff preference program identifier (for example ``A`` or ``GSP``).\nparams:\n    Revision data used to select the appropriate dataset.\nengine:\n    Database query engine responsible for retrieving the program mapping.\n\nReturns\n-------\nOptional[APIResponse]\n    Response containing an array of countries that are eligible for the\n    given program.",
        "operationId": "get_program_countries_context_programs__program_code__countries_get",
        "security": [
          {
            "APIKeyHeader": []
          }
        ],
        "parameters": [
          {
            "name": "program_code",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Tariff program code",
              "title": "Program Code"
            },
            "description": "Tariff program code"
          },
          {
            "name": "hts_date",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Hts Date"
            },
            "description": "Date to find the effective HTS revision (YYYY-MM-DD format). Returns the revision that was in effect on this date."
          },
          {
            "name": "hts_year",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer",
                  "maximum": 2030,
                  "minimum": 2020
                },
                {
                  "type": "null"
                }
              ],
              "title": "Hts Year"
            },
            "description": "HTS revision year. Use with `hts_version` for a specific revision, or alone to get the latest version for that year."
          },
          {
            "name": "hts_version",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer",
                  "maximum": 99,
                  "minimum": 0
                },
                {
                  "type": "null"
                }
              ],
              "title": "Hts Version"
            },
            "description": "HTS revision version number within the year. For example, version 27 of 2025 would be referenced as '2025-v27'."
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIResponse_list_APIRespProgramCountry__"
                },
                "example": {
                  "success": true,
                  "meta": {
                    "timestamp_unixts": 1736800000.0,
                    "operation": "get_program_countries",
                    "params": {},
                    "hts_year": 2025,
                    "hts_version": 27,
                    "result_count": 1
                  },
                  "data": [
                    {
                      "common_name": "Mexico",
                      "country_code": "MX",
                      "country_name": "Mexico",
                      "iso_alpha2": "MX",
                      "iso_alpha3": "MEX",
                      "official_name": "United Mexican States"
                    }
                  ],
                  "errors": null
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/context/notes": {
      "get": {
        "tags": [
          "Notes & Documents"
        ],
        "summary": "Get Notes",
        "description": "Retrieve notes from HS schedule by various filter criteria.\n\nSupports filtering by chapter, subchapter, section, note type, note number,\nand position/subdivisions. Can include child notes and related HTS codes.\n\nParameters\n----------\nparams:\n    Filter criteria including chapter, subchapter, section, note_type,\n    note_number, position, and flags for including children and HTS codes.\nengine:\n    Database query engine used to fetch the notes.\n\nReturns\n-------\nOptional[APIResponse]\n    List of notes matching the filter criteria.",
        "operationId": "get_notes_context_notes_get",
        "security": [
          {
            "APIKeyHeader": []
          }
        ],
        "parameters": [
          {
            "name": "hts_date",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Hts Date"
            },
            "description": "Date to find the effective HTS revision (YYYY-MM-DD format). Returns the revision that was in effect on this date."
          },
          {
            "name": "hts_year",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer",
                  "maximum": 2030,
                  "minimum": 2020
                },
                {
                  "type": "null"
                }
              ],
              "title": "Hts Year"
            },
            "description": "HTS revision year. Use with `hts_version` for a specific revision, or alone to get the latest version for that year."
          },
          {
            "name": "hts_version",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer",
                  "maximum": 99,
                  "minimum": 0
                },
                {
                  "type": "null"
                }
              ],
              "title": "Hts Version"
            },
            "description": "HTS revision version number within the year. For example, version 27 of 2025 would be referenced as '2025-v27'."
          },
          {
            "name": "note_unique_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Note Unique Id"
            },
            "description": "Direct lookup by note_unique_id (e.g., '99:3:c:99:us_note:2:b'). When provided, other filter params are ignored."
          },
          {
            "name": "chapter_number",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Chapter Number"
            },
            "description": "Chapter number to filter by"
          },
          {
            "name": "subchapter_number",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Subchapter Number"
            },
            "description": "Subchapter number to filter by"
          },
          {
            "name": "section_number",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Section Number"
            },
            "description": "Section number to filter by"
          },
          {
            "name": "note_type",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Note Type"
            },
            "description": "Type of note (e.g., 'us_note', 'chapter_note')"
          },
          {
            "name": "note_number",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Note Number"
            },
            "description": "Note number to filter by"
          },
          {
            "name": "position",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Position"
            },
            "description": "Position/subdivisions (e.g., '2:b:III' or '3:8')"
          },
          {
            "name": "include_children",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "default": false,
              "title": "Include Children"
            },
            "description": "Whether to recursively include child notes"
          },
          {
            "name": "include_hts_codes",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "default": false,
              "title": "Include Hts Codes"
            },
            "description": "Whether to include related HTS codes"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIResponse_list_APIRespNoteItem__"
                },
                "example": {
                  "success": true,
                  "meta": {
                    "timestamp_unixts": 1736800000.0,
                    "operation": "get_notes_context",
                    "params": {},
                    "hts_year": 2025,
                    "hts_version": 27,
                    "result_count": 1
                  },
                  "data": [
                    {
                      "chapter_number": 2,
                      "children": [],
                      "note_bullets": [],
                      "note_content": "The term 'processed' covers meats which have been ground or comminuted...",
                      "note_id": 68186,
                      "note_level": 1,
                      "note_lines": [
                        "The term 'processed' covers meats which have been ground or comminuted..."
                      ],
                      "note_metadata": {},
                      "note_number": "a",
                      "note_type": "additional_us_note",
                      "note_unique_id": "2:0:c:2:additional_us_note:1:a",
                      "related_hts_codes": [],
                      "subchapter_number": 0
                    }
                  ],
                  "errors": null
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/context/notes/tree": {
      "get": {
        "tags": [
          "Document Navigation"
        ],
        "summary": "Get Notes Tree",
        "description": "Get lightweight notes tree structure for navigation.\n\nReturns tree skeleton with note IDs, types, levels, and counts but NO content.\nOptimized for fast initial page load (~10-50KB payload).\n\nUse this API first to populate navigation, then use /notes/content to\nload full content for visible notes as user scrolls.\n\nSupports filtering by document segment for non-chapter content:\n- document_segment='int': Intro/about pages (cover, preface, toc, etc.)\n- document_segment='gen': General notes (1-36, rules, statistical)\n- document_segment='sch': Schedule notes (chapter/section notes)\n- document_segment='apx': Appendices\n\nParameters\n----------\nparams : APIReqNotesTree\n    Filter criteria including chapter, subchapter, section, document_segment, and version.\n\nReturns\n-------\nAPIResponse\n    {\n        \"tree\": [nested tree nodes],\n        \"sections\": [section groupings],\n        \"summary\": {total_notes, max_depth, total_related_codes}\n    }",
        "operationId": "get_notes_tree_context_notes_tree_get",
        "security": [
          {
            "APIKeyHeader": []
          }
        ],
        "parameters": [
          {
            "name": "hts_date",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Hts Date"
            },
            "description": "Date to find the effective HTS revision (YYYY-MM-DD format). Returns the revision that was in effect on this date."
          },
          {
            "name": "hts_year",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer",
                  "maximum": 2030,
                  "minimum": 2020
                },
                {
                  "type": "null"
                }
              ],
              "title": "Hts Year"
            },
            "description": "HTS revision year. Use with `hts_version` for a specific revision, or alone to get the latest version for that year."
          },
          {
            "name": "hts_version",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer",
                  "maximum": 99,
                  "minimum": 0
                },
                {
                  "type": "null"
                }
              ],
              "title": "Hts Version"
            },
            "description": "HTS revision version number within the year. For example, version 27 of 2025 would be referenced as '2025-v27'."
          },
          {
            "name": "chapter_number",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Chapter Number"
            },
            "description": "Chapter number to filter by"
          },
          {
            "name": "subchapter_number",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Subchapter Number"
            },
            "description": "Subchapter number to filter by"
          },
          {
            "name": "section_number",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Section Number"
            },
            "description": "Section number to filter by"
          },
          {
            "name": "document_segment",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "enum": [
                    "int",
                    "gen",
                    "sch",
                    "apx"
                  ],
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Document Segment"
            },
            "description": "Document segment filter: 'int' (intro/abouts), 'gen' (general notes), 'sch' (schedule/chapters), 'apx' (appendices). If not provided, defaults to chapter-based filtering."
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIResponse_APIRespNotesTreeData_"
                },
                "example": {
                  "success": true,
                  "meta": {
                    "timestamp_unixts": 1736800000.0,
                    "operation": "get_notes_tree",
                    "params": {},
                    "hts_year": 2025,
                    "hts_version": 27,
                    "result_count": 1
                  },
                  "data": {
                    "sections": [
                      {
                        "first_note_id": "72:0:c:72:note:1",
                        "note_count": 42,
                        "note_type": "note",
                        "section_label": "Notes"
                      }
                    ],
                    "summary": {
                      "max_depth": 3,
                      "total_notes": 42,
                      "total_related_codes": 150
                    },
                    "tree": [
                      {
                        "children": [
                          {
                            "children": [],
                            "children_count": 0,
                            "content_line_count": 1,
                            "has_content": true,
                            "note_level": 2,
                            "note_number": "a",
                            "note_sort_key": "3:15.072:1:n001.l001",
                            "note_type": "note",
                            "note_unique_id": "72:0:c:72:note:1:a",
                            "parent_note_id": "72:0:c:72:note:1",
                            "related_codes_count": 4
                          }
                        ],
                        "children_count": 3,
                        "content_line_count": 1,
                        "has_content": true,
                        "note_level": 1,
                        "note_number": "1",
                        "note_sort_key": "3:15.072:1:n001",
                        "note_type": "note",
                        "note_unique_id": "72:0:c:72:note:1",
                        "parent_note_id": "72:0:c:72:note",
                        "related_codes_count": 0
                      }
                    ]
                  },
                  "errors": null
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/context/notes/content": {
      "get": {
        "tags": [
          "Notes & Documents"
        ],
        "summary": "Get Notes Content",
        "description": "Get full content for specific notes.\n\nSupports three query modes:\n1. By specific note_ids (comma-separated unique IDs)\n2. By sort_key range (from_sort_key to to_sort_key)\n3. Window around a note (around_note_id with window_size)\n\nUse this API after loading the tree to fetch content for notes\nas the user scrolls or clicks navigation items.\n\nParameters\n----------\nparams : APIReqNotesContent\n    Query parameters including chapter, note selection mode, and version.\n\nReturns\n-------\nAPIResponse\n    data: [full content for each note]\n    meta.window_info: {navigation context for scrolling}",
        "operationId": "get_notes_content_context_notes_content_get",
        "security": [
          {
            "APIKeyHeader": []
          }
        ],
        "parameters": [
          {
            "name": "hts_date",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Hts Date"
            },
            "description": "Date to find the effective HTS revision (YYYY-MM-DD format). Returns the revision that was in effect on this date."
          },
          {
            "name": "hts_year",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer",
                  "maximum": 2030,
                  "minimum": 2020
                },
                {
                  "type": "null"
                }
              ],
              "title": "Hts Year"
            },
            "description": "HTS revision year. Use with `hts_version` for a specific revision, or alone to get the latest version for that year."
          },
          {
            "name": "hts_version",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer",
                  "maximum": 99,
                  "minimum": 0
                },
                {
                  "type": "null"
                }
              ],
              "title": "Hts Version"
            },
            "description": "HTS revision version number within the year. For example, version 27 of 2025 would be referenced as '2025-v27'."
          },
          {
            "name": "chapter_number",
            "in": "query",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Chapter Number"
            },
            "description": "Chapter number to filter by"
          },
          {
            "name": "subchapter_number",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Subchapter Number"
            },
            "description": "Subchapter number to filter by"
          },
          {
            "name": "note_ids",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Note Ids"
            },
            "description": "Comma-separated list of note_unique_id values to fetch"
          },
          {
            "name": "from_sort_key",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "From Sort Key"
            },
            "description": "Start of sort key range (inclusive)"
          },
          {
            "name": "to_sort_key",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "To Sort Key"
            },
            "description": "End of sort key range (inclusive)"
          },
          {
            "name": "around_note_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Around Note Id"
            },
            "description": "Center note_unique_id for window-based loading"
          },
          {
            "name": "window_size",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 100,
              "minimum": 1,
              "default": 25,
              "title": "Window Size"
            },
            "description": "Number of notes before/after center when using around_note_id"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIResponse_list_APIRespNoteContent__"
                },
                "example": {
                  "success": true,
                  "meta": {
                    "timestamp_unixts": 1736800000.0,
                    "operation": "get_notes_content",
                    "params": {},
                    "hts_year": 2025,
                    "hts_version": 27,
                    "result_count": 1
                  },
                  "data": [
                    {
                      "note_bullets": [],
                      "note_content": "The term 'processed' covers meats which have been ground or comminuted...",
                      "note_level": 1,
                      "note_lines": [
                        "The term 'processed' covers meats which have been ground or comminuted..."
                      ],
                      "note_metadata": {},
                      "note_number": "a",
                      "note_sort_key": "3:01.002:3:n001.l001",
                      "note_type": "additional_us_note",
                      "note_unique_id": "2:0:c:2:additional_us_note:1:a",
                      "related_hts_codes": []
                    }
                  ],
                  "errors": null
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/context/materials/{hts_code}": {
      "get": {
        "tags": [
          "Materials"
        ],
        "summary": "Get Materials for HTS Code",
        "description": "Get material compositions for a specific HTS code.\n\nIdentifies which material types (steel, aluminum, copper, wood, vehicle)\napply to the given HTS code for Section 232 tariff evaluations.\n\n## Use Cases\n\n- **Section 232 evaluation**: Determine if steel/aluminum tariffs apply\n- **Material classification**: Identify product material composition\n\n## Path Parameters\n\n- **hts_code**: The HTS code to lookup (e.g., \"7208.10.15\" or \"7208101500\")\n\n## Response\n\nReturns an object with:\n- **hts_code**: The queried HTS code\n- **materials**: List of applicable material types\n- **details**: Classification details with source notes and rules\n\n## Example\n\n```\nGET /context/materials/7208.10.15\n```\n\nResponse:\n```json\n{\n  \"hts_code\": \"7208.10.15.00\",\n  \"materials\": [\"steel\"],\n  \"details\": [{\"material\": \"steel\", \"source_note\": \"note_16\", \"source_rule\": \"9903.81.87\"}]\n}\n```",
        "operationId": "get_materials_for_hts_code_context_materials__hts_code__get",
        "security": [
          {
            "APIKeyHeader": []
          }
        ],
        "parameters": [
          {
            "name": "hts_code",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "HTS code to lookup materials for",
              "title": "Hts Code"
            },
            "description": "HTS code to lookup materials for"
          },
          {
            "name": "hts_date",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Hts Date"
            },
            "description": "Date to find the effective HTS revision (YYYY-MM-DD format). Returns the revision that was in effect on this date."
          },
          {
            "name": "hts_year",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer",
                  "maximum": 2030,
                  "minimum": 2020
                },
                {
                  "type": "null"
                }
              ],
              "title": "Hts Year"
            },
            "description": "HTS revision year. Use with `hts_version` for a specific revision, or alone to get the latest version for that year."
          },
          {
            "name": "hts_version",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer",
                  "maximum": 99,
                  "minimum": 0
                },
                {
                  "type": "null"
                }
              ],
              "title": "Hts Version"
            },
            "description": "HTS revision version number within the year. For example, version 27 of 2025 would be referenced as '2025-v27'."
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIResponse_APIRespMaterialForHtsCode_"
                },
                "example": {
                  "success": true,
                  "meta": {
                    "timestamp_unixts": 1736800000.0,
                    "operation": "get_materials_for",
                    "params": {},
                    "hts_year": 2025,
                    "hts_version": 27,
                    "result_count": 1
                  },
                  "data": {
                    "details": [
                      {
                        "material": "steel",
                        "source_note": "chapter 72 note"
                      }
                    ],
                    "hts_code": "7208101500",
                    "materials": [
                      "steel"
                    ]
                  },
                  "errors": null
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/context/materials": {
      "get": {
        "tags": [
          "Materials"
        ],
        "summary": "Get All Material Compositions",
        "description": "Get all HTS codes grouped by material type.\n\nReturns a complete mapping of material types to their applicable HTS codes,\nuseful for bulk Section 232 material classification lookups.\n\n## Query Parameters\n\n- **material_type**: Filter to a specific material type (optional)\n\n## Supported Material Types\n\n- **steel**: Iron and steel products (Ch. 72-73)\n- **aluminum**: Aluminum products (Ch. 76)\n- **copper**: Copper products\n- **wood**: Wood products\n- **vehicle**: Automotive products\n\n## Response\n\nReturns an object with material types as keys and arrays of HTS codes as values:\n\n```json\n{\n  \"steel\": [\"7206.10.00\", \"7207.11.00\", ...],\n  \"aluminum\": [\"7601.10.30\", ...],\n  \"copper\": [...],\n  \"wood\": [...],\n  \"vehicle\": [...]\n}\n```",
        "operationId": "get_all_material_compositions_context_materials_get",
        "security": [
          {
            "APIKeyHeader": []
          }
        ],
        "parameters": [
          {
            "name": "material_type",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Material Type"
            }
          },
          {
            "name": "hts_date",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Hts Date"
            },
            "description": "Date to find the effective HTS revision (YYYY-MM-DD format). Returns the revision that was in effect on this date."
          },
          {
            "name": "hts_year",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer",
                  "maximum": 2030,
                  "minimum": 2020
                },
                {
                  "type": "null"
                }
              ],
              "title": "Hts Year"
            },
            "description": "HTS revision year. Use with `hts_version` for a specific revision, or alone to get the latest version for that year."
          },
          {
            "name": "hts_version",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer",
                  "maximum": 99,
                  "minimum": 0
                },
                {
                  "type": "null"
                }
              ],
              "title": "Hts Version"
            },
            "description": "HTS revision version number within the year. For example, version 27 of 2025 would be referenced as '2025-v27'."
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIResponse_APIRespMaterialCompositions_"
                },
                "example": {
                  "success": true,
                  "meta": {
                    "timestamp_unixts": 1736800000.0,
                    "operation": "get_all_material",
                    "params": {},
                    "hts_year": 2025,
                    "hts_version": 27,
                    "result_count": 1
                  },
                  "data": {
                    "steel": [
                      "7208101500",
                      "7208102500",
                      "7208103000"
                    ]
                  },
                  "errors": null
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/context/materials/types/summary": {
      "get": {
        "tags": [
          "Materials"
        ],
        "summary": "Get Material Types Summary",
        "description": "Get summary of material types and their HTS code counts.\n\nReturns an overview of all material types with counts, useful for\nunderstanding the scope of Section 232 material classifications.\n\n## Response\n\nReturns an array of material type summaries:\n\n| Field | Description |\n|-------|-------------|\n| `material_type` | Material category name |\n| `hts_code_count` | Number of HTS codes classified |\n| `sample_codes` | Example HTS codes (optional) |\n\n## Example Response\n\n```json\n[\n  {\"material_type\": \"steel\", \"hts_code_count\": 1234},\n  {\"material_type\": \"aluminum\", \"hts_code_count\": 567},\n  {\"material_type\": \"copper\", \"hts_code_count\": 89}\n]\n```",
        "operationId": "get_material_types_summary_context_materials_types_summary_get",
        "security": [
          {
            "APIKeyHeader": []
          }
        ],
        "parameters": [
          {
            "name": "hts_date",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Hts Date"
            },
            "description": "Date to find the effective HTS revision (YYYY-MM-DD format). Returns the revision that was in effect on this date."
          },
          {
            "name": "hts_year",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer",
                  "maximum": 2030,
                  "minimum": 2020
                },
                {
                  "type": "null"
                }
              ],
              "title": "Hts Year"
            },
            "description": "HTS revision year. Use with `hts_version` for a specific revision, or alone to get the latest version for that year."
          },
          {
            "name": "hts_version",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer",
                  "maximum": 99,
                  "minimum": 0
                },
                {
                  "type": "null"
                }
              ],
              "title": "Hts Version"
            },
            "description": "HTS revision version number within the year. For example, version 27 of 2025 would be referenced as '2025-v27'."
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIResponse_list_APIRespMaterialTypeSummary__"
                },
                "example": {
                  "success": true,
                  "meta": {
                    "timestamp_unixts": 1736800000.0,
                    "operation": "get_material_types",
                    "params": {},
                    "hts_year": 2025,
                    "hts_version": 27,
                    "result_count": 1
                  },
                  "data": [
                    {
                      "hts_code_count": 1234,
                      "material_type": "steel",
                      "sample_codes": [
                        "7208101500",
                        "7208102500"
                      ]
                    }
                  ],
                  "errors": null
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/search/hts-docs": {
      "get": {
        "tags": [
          "Documentation Search"
        ],
        "summary": "Search HTS Documentation",
        "description": "Unified search across HTS documentation: sections, chapters, codes, and notes.\n\nThis endpoint provides a single search interface for the HTS Docs Browser,\nsearching across all document types in parallel for optimal performance.\n\nFeatures:\n- **Parallel search**: Searches sections, chapters, codes, and notes simultaneously\n- **Auto-detection**: Automatically detects query intent (HTS code vs description)\n- **Quick navigation**: Returns direct navigation hints for chapter/section references\n- **Semantic search**: Optional semantic search for notes (adds ~100ms latency)\n\nQuery Type Detection:\n- \"72\", \"7208\", \"9903.88\"  HTS code prefix search\n- \"chapter 72\", \"ch72\"  Chapter reference (direct navigation)\n- \"section 15\", \"sec15\"  Section reference (direct navigation)\n- \"steel\", \"lumber products\"  Description/content search\n\nParameters\n----------\nparams:\n    Query parameters including:\n    - query: Search query string (required)\n    - types: Comma-separated types to search (default: \"sections,chapters,codes,notes\")\n    - limit: Default max results per category (default: 10)\n    - hint: Query type hint to override auto-detection\n    - semantic: Enable semantic search for notes (default: false)\n    - sections_limit, chapters_limit, codes_limit, notes_limit: Per-category overrides\nengine:\n    Database query engine used to perform the searches.\n\nReturns\n-------\nAPIResponse\n    Response containing:\n    - results: Categorized search results with nav_link for each item\n    - counts: Result counts by category\n    - quick_nav: Quick navigation hint for direct jumps (when applicable)\n    - search_meta: Search execution metadata including timing and detected query type\n\nExamples\n--------\nBasic search:\n    GET /search/hts-docs?q=steel\n\nCode prefix search:\n    GET /search/hts-docs?q=7208&types=codes\n\nWith semantic notes:\n    GET /search/hts-docs?q=steel tariffs&semantic=true\n\nChapter reference (returns quick_nav):\n    GET /search/hts-docs?q=chapter 72",
        "operationId": "unified_hts_docs_search_search_hts_docs_get",
        "security": [
          {
            "APIKeyHeader": []
          }
        ],
        "parameters": [
          {
            "name": "hts_date",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Hts Date"
            },
            "description": "Date to find the effective HTS revision (YYYY-MM-DD format). Returns the revision that was in effect on this date."
          },
          {
            "name": "hts_year",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer",
                  "maximum": 2030,
                  "minimum": 2020
                },
                {
                  "type": "null"
                }
              ],
              "title": "Hts Year"
            },
            "description": "HTS revision year. Use with `hts_version` for a specific revision, or alone to get the latest version for that year."
          },
          {
            "name": "hts_version",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer",
                  "maximum": 99,
                  "minimum": 0
                },
                {
                  "type": "null"
                }
              ],
              "title": "Hts Version"
            },
            "description": "HTS revision version number within the year. For example, version 27 of 2025 would be referenced as '2025-v27'."
          },
          {
            "name": "query",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "minLength": 1,
              "maxLength": 500,
              "title": "Query"
            },
            "description": "Search query string"
          },
          {
            "name": "types",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "default": "sections,chapters,codes,notes",
              "title": "Types"
            },
            "description": "Comma-separated document types to search: sections, chapters, codes, notes"
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 50,
              "minimum": 1,
              "default": 10,
              "title": "Limit"
            },
            "description": "Default max results per category (overridden by type-specific limits)"
          },
          {
            "name": "hint",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "enum": [
                    "code",
                    "description",
                    "notes"
                  ],
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Hint"
            },
            "description": "Query type hint to override auto-detection"
          },
          {
            "name": "semantic",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "default": false,
              "title": "Semantic"
            },
            "description": "Enable semantic search for notes (adds ~100ms latency)"
          },
          {
            "name": "sections_limit",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer",
                  "maximum": 10,
                  "minimum": 1
                },
                {
                  "type": "null"
                }
              ],
              "title": "Sections Limit"
            },
            "description": "Override: max section results (default 3)"
          },
          {
            "name": "chapters_limit",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer",
                  "maximum": 20,
                  "minimum": 1
                },
                {
                  "type": "null"
                }
              ],
              "title": "Chapters Limit"
            },
            "description": "Override: max chapter results (default 5)"
          },
          {
            "name": "codes_limit",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer",
                  "maximum": 100,
                  "minimum": 1
                },
                {
                  "type": "null"
                }
              ],
              "title": "Codes Limit"
            },
            "description": "Override: max HTS code results (default 15)"
          },
          {
            "name": "notes_limit",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer",
                  "maximum": 50,
                  "minimum": 1
                },
                {
                  "type": "null"
                }
              ],
              "title": "Notes Limit"
            },
            "description": "Override: max note results (default 10)"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIResponse_APIRespHtsDocsSearch_"
                },
                "example": {
                  "success": true,
                  "meta": {
                    "timestamp_unixts": 1736800000.0,
                    "operation": "unified_hts_docs",
                    "params": {},
                    "hts_year": 2025,
                    "hts_version": 27,
                    "result_count": 1
                  },
                  "data": {
                    "counts": {
                      "chapters": 2,
                      "codes": 15,
                      "notes": 5,
                      "sections": 0,
                      "total": 22
                    },
                    "query": "steel",
                    "results": {
                      "chapters": [
                        {
                          "chapter_label": "iron and steel",
                          "chapter_number": 72,
                          "match_score": 100.0,
                          "match_type": "exact",
                          "nav_link": "/chapters/72",
                          "section_number": 15,
                          "subchapter_count": 0
                        },
                        {
                          "chapter_label": "articles of iron or steel",
                          "chapter_number": 73,
                          "match_score": 100.0,
                          "match_type": "exact",
                          "nav_link": "/chapters/73",
                          "section_number": 15,
                          "subchapter_count": 0
                        }
                      ],
                      "codes": [
                        {
                          "chapter_number": 84,
                          "description": "of iron or steel",
                          "digit_length": 8,
                          "hts_code": "8481302000",
                          "htsno": "8481.30.20",
                          "match_score": 90.0,
                          "match_type": "description",
                          "nav_link": "/codes/8481302000"
                        }
                      ],
                      "notes": [
                        {
                          "chapter_number": 72,
                          "content_preview": "Steel Ferrous materials other than those of heading 7203...",
                          "match_score": 0.5,
                          "nav_link": "/notes/72:0:c:72:note:1:d",
                          "note_number": "d",
                          "note_type": "note",
                          "note_unique_id": "72:0:c:72:note:1:d",
                          "subchapter_number": 0
                        }
                      ],
                      "sections": []
                    },
                    "search_meta": {
                      "query_type_detected": "description",
                      "search_time_ms": 45.2,
                      "semantic_enabled": false,
                      "types_searched": [
                        "sections",
                        "chapters",
                        "codes",
                        "notes"
                      ]
                    }
                  },
                  "errors": null
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/search/hts": {
      "get": {
        "tags": [
          "HTS Search"
        ],
        "summary": "Search HTS Codes",
        "description": "Search HTS codes by code prefix or description text.\n\nA flexible search endpoint that supports both HTS code prefix matching\nand natural language description search. At least one of `query` or\n`code` must be provided.\n\n## Search Modes\n\n- **Code prefix**: `?code=7208` returns all codes starting with 7208\n- **Description**: `?query=steel plates` searches description text\n- **Combined**: `?query=steel&chapter=72` filters text search by chapter\n\n## Features\n\n- **Fuzzy matching**: Enable with `fuzzy=true` for typo tolerance\n- **Semantic search**: Enable with `semantic=true` for AI-powered matching\n- **Notes inclusion**: Set `include_notes=true` to get related regulatory notes\n\n## Examples\n\n```\nGET /search/hts?query=steel%20plates&limit=20\nGET /search/hts?code=7208&limit=50\nGET /search/hts?query=carbon%20steel&chapter=72&fuzzy=true\n```\n\n## Errors\n\n- **404**: No matching HTS codes found\n- **422**: Neither `query` nor `code` provided",
        "operationId": "search_hts_search_hts_get",
        "security": [
          {
            "APIKeyHeader": []
          }
        ],
        "parameters": [
          {
            "name": "hts_date",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Hts Date"
            },
            "description": "Date to find the effective HTS revision (YYYY-MM-DD format). Returns the revision that was in effect on this date."
          },
          {
            "name": "hts_year",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer",
                  "maximum": 2030,
                  "minimum": 2020
                },
                {
                  "type": "null"
                }
              ],
              "title": "Hts Year"
            },
            "description": "HTS revision year. Use with `hts_version` for a specific revision, or alone to get the latest version for that year."
          },
          {
            "name": "hts_version",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer",
                  "maximum": 99,
                  "minimum": 0
                },
                {
                  "type": "null"
                }
              ],
              "title": "Hts Version"
            },
            "description": "HTS revision version number within the year. For example, version 27 of 2025 would be referenced as '2025-v27'."
          },
          {
            "name": "query",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string",
                  "maxLength": 500
                },
                {
                  "type": "null"
                }
              ],
              "title": "Query"
            },
            "description": "Natural language search term for HTS descriptions. Searches against the description text of HTS entries."
          },
          {
            "name": "code",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Code"
            },
            "description": "HTS code prefix to search. Accepts dotted (7208.10) or undotted (720810) format. Returns all codes starting with this prefix."
          },
          {
            "name": "fuzzy",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "default": false,
              "title": "Fuzzy"
            },
            "description": "Enable fuzzy matching for description search. Allows for typos and partial matches with reduced precision."
          },
          {
            "name": "section",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Section"
            },
            "description": "Filter results to a specific HTS section number (1-22)."
          },
          {
            "name": "chapter",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Chapter"
            },
            "description": "Filter results to a specific HTS chapter number (1-99)."
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 100,
              "minimum": 1,
              "default": 10,
              "title": "Limit"
            },
            "description": "Maximum number of results to return."
          },
          {
            "name": "include_notes",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "default": false,
              "title": "Include Notes"
            },
            "description": "Include related regulatory notes (section notes, chapter notes, US notes) with each result. Significantly increases response size."
          },
          {
            "name": "semantic",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "default": false,
              "title": "Semantic"
            },
            "description": "Use AI-powered semantic search instead of keyword matching. More accurate for natural language queries but adds ~100ms latency."
          }
        ],
        "responses": {
          "200": {
            "description": "Successful search",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIResponse_list_APIRespSearchHtsItem__"
                },
                "example": {
                  "success": true,
                  "meta": {
                    "operation": "search_hts",
                    "params": {
                      "query": "steel plates",
                      "limit": 10
                    },
                    "result_count": 3
                  },
                  "data": [
                    {
                      "hts_code": "7208101500",
                      "htsno": "7208.10.15",
                      "description": "Steel plates, hot-rolled",
                      "chapter": 72,
                      "section": 15
                    },
                    {
                      "hts_code": "7208103000",
                      "htsno": "7208.10.30",
                      "description": "Steel plates, cold-rolled",
                      "chapter": 72,
                      "section": 15
                    }
                  ]
                }
              }
            }
          },
          "404": {
            "description": "No results found",
            "content": {
              "application/json": {
                "example": {
                  "detail": "No HTS codes found matching the query"
                }
              }
            }
          },
          "422": {
            "description": "Validation error - query or code required",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Either query or code is required"
                }
              }
            }
          }
        }
      }
    },
    "/search/autocomplete/hts": {
      "get": {
        "tags": [
          "HTS Search"
        ],
        "summary": "Autocomplete HTS Codes",
        "description": "Lightweight autocomplete for HTS code lookup.\n\nReturns matching HTS codes for a given prefix, optimized for fast\nresponse times suitable for UI autocomplete components.\n\n## Query Parameters\n\n- **prefix**: HTS code prefix (e.g., \"7208\", \"9903.01\")\n- **limit**: Maximum results to return (default: 10)\n- **include_4_digit**: Include 4-digit codes (headings)\n- **include_6_digit**: Include 6-digit codes (subheadings)\n- **include_8_digit**: Include 8-digit codes\n- **include_10_digit**: Include 10-digit codes (full codes)\n\n## Response\n\nReturns a list of HTS codes with:\n- **hts_code**: The matching HTS code\n- **description**: Code description\n- **indent_level**: Hierarchy level\n\n## Examples\n\n```\nGET /search/autocomplete/hts?prefix=7208&limit=5\nGET /search/autocomplete/hts?prefix=9903.88&include_10_digit=true\n```",
        "operationId": "autocomplete_hts_codes_search_autocomplete_hts_get",
        "security": [
          {
            "APIKeyHeader": []
          }
        ],
        "parameters": [
          {
            "name": "hts_date",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Hts Date"
            },
            "description": "Date to find the effective HTS revision (YYYY-MM-DD format). Returns the revision that was in effect on this date."
          },
          {
            "name": "hts_year",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer",
                  "maximum": 2030,
                  "minimum": 2020
                },
                {
                  "type": "null"
                }
              ],
              "title": "Hts Year"
            },
            "description": "HTS revision year. Use with `hts_version` for a specific revision, or alone to get the latest version for that year."
          },
          {
            "name": "hts_version",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer",
                  "maximum": 99,
                  "minimum": 0
                },
                {
                  "type": "null"
                }
              ],
              "title": "Hts Version"
            },
            "description": "HTS revision version number within the year. For example, version 27 of 2025 would be referenced as '2025-v27'."
          },
          {
            "name": "prefix",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Prefix"
            },
            "description": "HTS code prefix to search for. Accepts dotted or undotted format."
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 100,
              "minimum": 1,
              "default": 10,
              "title": "Limit"
            },
            "description": "Maximum number of results"
          },
          {
            "name": "include_4_digit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "default": true,
              "title": "Include 4 Digit"
            },
            "description": "Include 4-digit HTS codes"
          },
          {
            "name": "include_6_digit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "default": true,
              "title": "Include 6 Digit"
            },
            "description": "Include 6-digit HTS codes"
          },
          {
            "name": "include_8_digit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "default": true,
              "title": "Include 8 Digit"
            },
            "description": "Include 8-digit HTS codes"
          },
          {
            "name": "include_10_digit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "default": true,
              "title": "Include 10 Digit"
            },
            "description": "Include 10-digit HTS codes"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIResponse_list_APIRespAutocompleteHtsItem__"
                },
                "example": {
                  "success": true,
                  "meta": {
                    "timestamp_unixts": 1736800000.0,
                    "operation": "autocomplete_hts_codes",
                    "params": {},
                    "hts_year": 2025,
                    "hts_version": 27,
                    "result_count": 1
                  },
                  "data": [
                    {
                      "chapter_name": "Iron and Steel",
                      "description": "Flat-rolled products of iron or nonalloy steel, of a width of 600 mm or more, hot-rolled, not clad, plated or coated, In coils, not further worked than hot-rolled, Of a thickness exceeding 10 mm",
                      "digit_length": 10,
                      "heading_name": "Flat-Rolled Iron/Steel Width >=600mm Hot-Rolled",
                      "hts_code": "7208101500",
                      "htsno": "7208.10.15",
                      "indent_level": 2,
                      "parent_hts_code": "7208100000",
                      "section_name": "Base Metals and Articles of Base Metal",
                      "subheading_name": "In coils, not further worked than hot-rolled",
                      "suffix_name": "Of a thickness exceeding 10 mm",
                      "units_of_measures": [
                        "kg"
                      ]
                    }
                  ],
                  "errors": null
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/search/hts/by-description": {
      "get": {
        "tags": [
          "HTS Search"
        ],
        "summary": "Search HTS by Description",
        "description": "Search HTS codes by natural language description.\n\nFinds HTS codes matching a text description, supporting fuzzy matching\nand optional semantic (AI-powered) search.\n\n## Query Parameters\n\n- **query**: Description text to search (e.g., \"steel plates\")\n- **limit**: Maximum results to return (default: 10)\n- **fuzzy**: Enable fuzzy matching for typo tolerance\n- **semantic**: Enable AI-powered semantic search\n- **include_X_digit**: Filter by code length (4/6/8/10 digit)\n\n## Search Modes\n\n- **Standard**: Exact text matching in descriptions\n- **Fuzzy**: Tolerates typos and variations (fuzzy=true)\n- **Semantic**: AI-powered meaning-based matching (semantic=true)\n\n## Examples\n\n```\nGET /search/hts/by-description?query=steel%20plates&limit=20\nGET /search/hts/by-description?query=aluminun&fuzzy=true\nGET /search/hts/by-description?query=metal%20products&semantic=true\n```",
        "operationId": "search_hts_by_description_search_hts_by_description_get",
        "security": [
          {
            "APIKeyHeader": []
          }
        ],
        "parameters": [
          {
            "name": "hts_date",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Hts Date"
            },
            "description": "Date to find the effective HTS revision (YYYY-MM-DD format). Returns the revision that was in effect on this date."
          },
          {
            "name": "hts_year",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer",
                  "maximum": 2030,
                  "minimum": 2020
                },
                {
                  "type": "null"
                }
              ],
              "title": "Hts Year"
            },
            "description": "HTS revision year. Use with `hts_version` for a specific revision, or alone to get the latest version for that year."
          },
          {
            "name": "hts_version",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer",
                  "maximum": 99,
                  "minimum": 0
                },
                {
                  "type": "null"
                }
              ],
              "title": "Hts Version"
            },
            "description": "HTS revision version number within the year. For example, version 27 of 2025 would be referenced as '2025-v27'."
          },
          {
            "name": "query",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Query"
            },
            "description": "Natural language search term for HTS descriptions. Searches against the description text of HTS entries."
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 100,
              "minimum": 1,
              "default": 10,
              "title": "Limit"
            },
            "description": "Maximum number of results to return."
          },
          {
            "name": "include_4_digit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "default": true,
              "title": "Include 4 Digit"
            },
            "description": "Include 4-digit HTS codes"
          },
          {
            "name": "include_6_digit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "default": true,
              "title": "Include 6 Digit"
            },
            "description": "Include 6-digit HTS codes"
          },
          {
            "name": "include_8_digit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "default": true,
              "title": "Include 8 Digit"
            },
            "description": "Include 8-digit HTS codes"
          },
          {
            "name": "include_10_digit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "default": true,
              "title": "Include 10 Digit"
            },
            "description": "Include 10-digit HTS codes"
          },
          {
            "name": "fuzzy",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "default": true,
              "title": "Fuzzy"
            },
            "description": "Enable fuzzy matching for description search. Allows for typos and partial matches with reduced precision."
          },
          {
            "name": "use_semantic",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "default": false,
              "title": "Use Semantic"
            },
            "description": "Use semantic search with embeddings"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIResponse_list_APIRespAutocompleteHtsItem__"
                },
                "example": {
                  "success": true,
                  "meta": {
                    "timestamp_unixts": 1736800000.0,
                    "operation": "search_hts_by",
                    "params": {},
                    "hts_year": 2025,
                    "hts_version": 27,
                    "result_count": 1
                  },
                  "data": [
                    {
                      "chapter_name": "Iron and Steel",
                      "description": "Flat-rolled products of iron or nonalloy steel, of a width of 600 mm or more, hot-rolled, not clad, plated or coated, In coils, not further worked than hot-rolled, Of a thickness exceeding 10 mm",
                      "digit_length": 10,
                      "heading_name": "Flat-Rolled Iron/Steel Width >=600mm Hot-Rolled",
                      "hts_code": "7208101500",
                      "htsno": "7208.10.15",
                      "indent_level": 2,
                      "parent_hts_code": "7208100000",
                      "section_name": "Base Metals and Articles of Base Metal",
                      "subheading_name": "In coils, not further worked than hot-rolled",
                      "suffix_name": "Of a thickness exceeding 10 mm",
                      "units_of_measures": [
                        "kg"
                      ]
                    }
                  ],
                  "errors": null
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/search/semantic/context": {
      "get": {
        "tags": [
          "Documentation Search"
        ],
        "summary": "Semantic Context Search",
        "description": "AI-powered semantic search across HTS documentation.\n\nPerforms semantic (meaning-based) search across notes, duty components,\nand optionally HTS schedule entries. Unlike keyword search, semantic\nsearch understands context and finds conceptually related content.\n\n## Data Sources\n\n- **Notes**: HTS notes, US notes, chapter notes, statistical notes\n- **Rate Components**: Duty rate explanations and conditions\n- **HTS Schedule**: HTS code descriptions (when `include_schedule=true`)\n\n## Use Cases\n\n- Find notes discussing specific trade concepts\n- Discover rate components related to a topic\n- Research regulatory guidance for product classifications\n\n## Key Parameters\n\n- `query`: Natural language search query (required)\n- `limit`: Default max results per category\n- `include_notes`, `include_rate_components`, `include_schedule`: Toggle data sources\n- `note_type`, `chapter`, `section`: Filter to specific areas\n\n## Example\n\n```\nGET /search/semantic/context?query=steel%20from%20china&include_notes=true\n```\n\n## Performance\n\n- Adds ~100-200ms latency compared to keyword search\n- Results ranked by semantic similarity score\n\n## Errors\n\n- **404**: No semantic matches found",
        "operationId": "semantic_context_search_semantic_context_get",
        "security": [
          {
            "APIKeyHeader": []
          }
        ],
        "parameters": [
          {
            "name": "hts_date",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Hts Date"
            },
            "description": "Date to find the effective HTS revision (YYYY-MM-DD format). Returns the revision that was in effect on this date."
          },
          {
            "name": "hts_year",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer",
                  "maximum": 2030,
                  "minimum": 2020
                },
                {
                  "type": "null"
                }
              ],
              "title": "Hts Year"
            },
            "description": "HTS revision year. Use with `hts_version` for a specific revision, or alone to get the latest version for that year."
          },
          {
            "name": "hts_version",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer",
                  "maximum": 99,
                  "minimum": 0
                },
                {
                  "type": "null"
                }
              ],
              "title": "Hts Version"
            },
            "description": "HTS revision version number within the year. For example, version 27 of 2025 would be referenced as '2025-v27'."
          },
          {
            "name": "query",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Query"
            },
            "description": "Natural language search prompt for semantic retrieval."
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 1,
              "default": 10,
              "title": "Limit"
            },
            "description": "Default maximum number of matches returned per category when overrides are not provided."
          },
          {
            "name": "notes_limit",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer",
                  "minimum": 1
                },
                {
                  "type": "null"
                }
              ],
              "title": "Notes Limit"
            },
            "description": "Override for the number of note matches to return."
          },
          {
            "name": "rate_limit",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer",
                  "minimum": 1
                },
                {
                  "type": "null"
                }
              ],
              "title": "Rate Limit"
            },
            "description": "Override for the number of duty component matches to return."
          },
          {
            "name": "schedule_limit",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer",
                  "minimum": 1
                },
                {
                  "type": "null"
                }
              ],
              "title": "Schedule Limit"
            },
            "description": "Override for the number of HTS schedule matches to return when enabled."
          },
          {
            "name": "include_notes",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "default": true,
              "title": "Include Notes"
            },
            "description": "Include semantic matches from the notes hierarchy."
          },
          {
            "name": "include_rate_components",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "default": true,
              "title": "Include Rate Components"
            },
            "description": "Include semantic matches from duty components."
          },
          {
            "name": "include_schedule",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "default": false,
              "title": "Include Schedule"
            },
            "description": "Include semantic matches from HTS schedule descriptions."
          },
          {
            "name": "note_type",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Note Type"
            },
            "description": "Filter notes by note_type (e.g., 'additional_us_note')."
          },
          {
            "name": "doc_type",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Doc Type"
            },
            "description": "Restrict notes to a specific document type (e.g., 'chapters')."
          },
          {
            "name": "doc_alias",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Doc Alias"
            },
            "description": "Restrict notes to a specific document alias (e.g., 'chapter_01')."
          },
          {
            "name": "section",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Section"
            },
            "description": "Filter matches to a particular section (numeric for notes, name for components)."
          },
          {
            "name": "chapter",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Chapter"
            },
            "description": "Filter matches to a particular chapter (numeric for notes, name for components)."
          },
          {
            "name": "hts_code",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Hts Code"
            },
            "description": "Restrict matches to notes or components linked to an HTS code prefix."
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIResponse_APIRespSemanticContext_"
                },
                "example": {
                  "success": true,
                  "meta": {
                    "timestamp_unixts": 1736800000.0,
                    "operation": "semantic_context_search",
                    "params": {},
                    "hts_year": 2025,
                    "hts_version": 27,
                    "result_count": 1
                  },
                  "data": {
                    "hts": [],
                    "notes": [
                      {
                        "content": "Steel note content...",
                        "note_id": "n_72_1",
                        "score": 0.85
                      }
                    ],
                    "query": "steel imports tariff",
                    "rate_components": [
                      {
                        "component_text": "Free",
                        "hts_code": "7208101500",
                        "score": 0.82
                      }
                    ]
                  },
                  "errors": null
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/versions": {
      "get": {
        "tags": [
          "Available Versions"
        ],
        "summary": "List HTS Versions",
        "description": "List all available HTS source versions.\n\nReturns metadata for all HTS revisions available in the system. Each revision\nrepresents a point-in-time snapshot of the Harmonized Tariff Schedule.\n\n## Response\n\nReturns an array of version objects, each containing:\n- `hts_year`: Year of the HTS revision (e.g., 2025)\n- `hts_version`: Version number within the year (e.g., 27)\n- `effective_date`: Date this revision became effective\n- `publication_date`: Date the revision was published\n- `is_latest`: Whether this is the most recent version\n\n## Use Cases\n\n- Build version selection dropdowns in your UI\n- Determine which version to use for a specific date\n- Track available data for compliance audits\n\n## Example Response\n\n```json\n{\n  \"success\": true,\n  \"data\": [\n    {\n      \"hts_year\": 2025,\n      \"hts_version\": 27,\n      \"effective_date\": \"2025-04-01\",\n      \"is_latest\": true\n    },\n    ...\n  ]\n}\n```",
        "operationId": "list_versions_versions_get",
        "responses": {
          "200": {
            "description": "List of available HTS revisions",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIResponse_list_HtsSourceVersion__"
                },
                "example": {
                  "success": true,
                  "meta": {
                    "operation": "list_source_versions",
                    "params": {},
                    "result_count": 5
                  },
                  "data": [
                    {
                      "hts_year": 2025,
                      "hts_version": 27,
                      "effective_date": "2025-04-01",
                      "is_latest": true
                    },
                    {
                      "hts_year": 2025,
                      "hts_version": 26,
                      "effective_date": "2025-03-01",
                      "is_latest": false
                    }
                  ]
                }
              }
            }
          }
        },
        "security": [
          {
            "APIKeyHeader": []
          }
        ]
      }
    },
    "/giq/organizations/search": {
      "post": {
        "tags": [
          "GIQ Organization Search"
        ],
        "summary": "Search organizations",
        "description": "Search for organizations by name, id, or capabilities (optionally similar).",
        "operationId": "search_organizations_giq_organizations_search_post",
        "security": [
          {
            "APIKeyHeader": []
          }
        ],
        "parameters": [
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 1,
              "description": "Maximum number of records to return",
              "default": 10,
              "title": "Limit"
            },
            "description": "Maximum number of records to return"
          },
          {
            "name": "skip",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 0,
              "description": "Number of records to skip",
              "default": 0,
              "title": "Skip"
            },
            "description": "Number of records to skip"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/GiqOrganizationSearchRequest"
              }
            }
          },
          "description": "Organization search parameters including name/id, filters, and similarity toggle."
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIResponse_GiqOrganizationListResponse_"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/giq/organizations/suggest": {
      "get": {
        "tags": [
          "GIQ Organization Search"
        ],
        "summary": "Suggest organizations",
        "operationId": "suggest_organizations_giq_organizations_suggest_get",
        "security": [
          {
            "APIKeyHeader": []
          }
        ],
        "parameters": [
          {
            "name": "name",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Partial name to search",
              "title": "Name"
            },
            "description": "Partial name to search"
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 1,
              "description": "Maximum number of records to return",
              "default": 20,
              "title": "Limit"
            },
            "description": "Maximum number of records to return"
          },
          {
            "name": "skip",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 0,
              "description": "Number of records to skip",
              "default": 0,
              "title": "Skip"
            },
            "description": "Number of records to skip"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIResponse_GiqOrganizationListResponse_"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/giq/organizations/capabilities": {
      "post": {
        "tags": [
          "GIQ Organization Search"
        ],
        "summary": "Extract organization capabilities",
        "description": "Extract product/capability terms associated with an organization.",
        "operationId": "extract_capabilities_giq_organizations_capabilities_post",
        "security": [
          {
            "APIKeyHeader": []
          }
        ],
        "parameters": [
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 1,
              "description": "Maximum number of records to return",
              "default": 20,
              "title": "Limit"
            },
            "description": "Maximum number of records to return"
          },
          {
            "name": "skip",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 0,
              "description": "Number of records to skip",
              "default": 0,
              "title": "Skip"
            },
            "description": "Number of records to skip"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/GiqOrganizationSearchRequest"
              }
            }
          },
          "description": "Organization identifier or filters used to extract capabilities."
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIResponse_GiqCapabilitiesResponse_"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/giq/organizations/facets": {
      "post": {
        "tags": [
          "GIQ Organization Search"
        ],
        "summary": "Organization facets",
        "description": "Fetch faceted aggregations for an organization search.",
        "operationId": "organization_facets_giq_organizations_facets_post",
        "security": [
          {
            "APIKeyHeader": []
          }
        ],
        "parameters": [
          {
            "name": "facet",
            "in": "query",
            "required": true,
            "schema": {
              "$ref": "#/components/schemas/GiqOrgFacetType",
              "description": "Facet to retrieve"
            },
            "description": "Facet to retrieve"
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 1,
              "description": "Maximum number of records to return",
              "default": 20,
              "title": "Limit"
            },
            "description": "Maximum number of records to return"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/GiqOrganizationSearchRequest"
              }
            }
          },
          "description": "Organization search parameters used to compute facet aggregations."
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIResponse_GiqFacetResponse_"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/giq/organizations/naics": {
      "post": {
        "tags": [
          "GIQ Organization Search"
        ],
        "summary": "Organization NAICS lookup",
        "description": "Retrieve NAICS classifications for organizations matching the search.",
        "operationId": "organization_naics_giq_organizations_naics_post",
        "security": [
          {
            "APIKeyHeader": []
          }
        ],
        "parameters": [
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 1,
              "description": "Maximum number of records to return",
              "default": 20,
              "title": "Limit"
            },
            "description": "Maximum number of records to return"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/GiqOrganizationSearchRequest"
              }
            }
          },
          "description": "Organization identifier or filters used to retrieve NAICS classifications."
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIResponse_GiqNaicsResponse_"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/giq/news/search": {
      "post": {
        "tags": [
          "GIQ News"
        ],
        "summary": "Search news",
        "description": "Search for news articles using standard filters.",
        "operationId": "search_news_giq_news_search_post",
        "security": [
          {
            "APIKeyHeader": []
          }
        ],
        "parameters": [
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 1,
              "description": "Maximum number of records to return",
              "default": 10,
              "title": "Limit"
            },
            "description": "Maximum number of records to return"
          },
          {
            "name": "skip",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 0,
              "description": "Number of records to skip",
              "default": 0,
              "title": "Skip"
            },
            "description": "Number of records to skip"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/GiqNewsSearchRequest"
              }
            }
          },
          "description": "News search parameters (keyword, categories, people/things, regions)."
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIResponse_GiqNewsListResponse_"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/giq/news/search/ai": {
      "post": {
        "tags": [
          "GIQ News"
        ],
        "summary": "AI-enhanced news search",
        "description": "Search news using AI-generated query parameters.",
        "operationId": "search_news_ai_post_giq_news_search_ai_post",
        "security": [
          {
            "APIKeyHeader": []
          }
        ],
        "parameters": [
          {
            "name": "include_tariff_news",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "description": "Include tariff keyword in news search",
              "default": true,
              "title": "Include Tariff News"
            },
            "description": "Include tariff keyword in news search"
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 1,
              "description": "Maximum number of records to return",
              "default": 10,
              "title": "Limit"
            },
            "description": "Maximum number of records to return"
          },
          {
            "name": "skip",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 0,
              "description": "Number of records to skip",
              "default": 0,
              "title": "Skip"
            },
            "description": "Number of records to skip"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/GiqNewsSearchParams"
              }
            }
          },
          "description": "AI search parameters (exact_phrase, best_match, exclusions, etc.)."
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIResponse_GiqNewsListResponse_"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "get": {
        "tags": [
          "GIQ News"
        ],
        "summary": "AI-enhanced news search (GET)",
        "description": "Search news using AI-generated query parameters (GET).",
        "operationId": "search_news_ai_get_giq_news_search_ai_get",
        "security": [
          {
            "APIKeyHeader": []
          }
        ],
        "parameters": [
          {
            "name": "include_tariff_news",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "description": "Include tariff keyword in news search",
              "default": true,
              "title": "Include Tariff News"
            },
            "description": "Include tariff keyword in news search"
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 1,
              "description": "Maximum number of records to return",
              "default": 10,
              "title": "Limit"
            },
            "description": "Maximum number of records to return"
          },
          {
            "name": "skip",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 0,
              "description": "Number of records to skip",
              "default": 0,
              "title": "Skip"
            },
            "description": "Number of records to skip"
          },
          {
            "name": "exact_phrase",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Exact Phrase"
            }
          },
          {
            "name": "duration",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Duration"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/Body_search_news_ai_get_giq_news_search_ai_get"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIResponse_GiqNewsListResponse_"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/giq/news/filters": {
      "post": {
        "tags": [
          "GIQ News"
        ],
        "summary": "News filters",
        "description": "Return available filter facets for news search.",
        "operationId": "news_filters_giq_news_filters_post",
        "security": [
          {
            "APIKeyHeader": []
          }
        ],
        "parameters": [
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 1,
              "description": "Maximum number of records to return",
              "default": 100,
              "title": "Limit"
            },
            "description": "Maximum number of records to return"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/GiqNewsSearchRequest"
              }
            }
          },
          "description": "News search parameters used to return available filter facets."
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIResponse_GiqFiltersResponse_"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/imports/hts/{hts_code}/by-country": {
      "get": {
        "tags": [
          "Import Data"
        ],
        "summary": "Top Importing Countries for HTS Code",
        "description": "Get the top importing countries for a specific 10-digit HTS code,\n    ranked by total customs value.\n\n    Returns aggregated import values with per-year breakdown.\n\n    **Default behavior:** Returns data for the latest year only.\n    Specify `years` parameter to include multiple years.",
        "operationId": "get_top_countries_for_hts_imports_hts__hts_code__by_country_get",
        "security": [
          {
            "APIKeyHeader": []
          }
        ],
        "parameters": [
          {
            "name": "hts_code",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "minLength": 8,
              "maxLength": 10,
              "description": "10-digit HTS code",
              "title": "Hts Code"
            },
            "description": "10-digit HTS code"
          },
          {
            "name": "years",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "array",
                  "items": {
                    "type": "integer"
                  }
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by years. Default: latest year only.",
              "title": "Years"
            },
            "description": "Filter by years. Default: latest year only."
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 100,
              "minimum": 1,
              "description": "Number of top countries to return",
              "default": 10,
              "title": "Limit"
            },
            "description": "Number of top countries to return"
          },
          {
            "name": "sort_by",
            "in": "query",
            "required": false,
            "schema": {
              "enum": [
                "value",
                "country"
              ],
              "type": "string",
              "description": "Sort by: 'value' (descending by import value) or 'country' (alphabetical)",
              "default": "value",
              "title": "Sort By"
            },
            "description": "Sort by: 'value' (descending by import value) or 'country' (alphabetical)"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIResponse_List_ImportCountrySummary__"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/imports/country/{country}/by-hts": {
      "get": {
        "tags": [
          "Import Data"
        ],
        "summary": "Top HTS Codes for Country",
        "description": "Get the top imported HTS codes for a specific country,\n    ranked by total customs value.\n\n    **Default behavior:** Returns data for the latest year only.\n    Specify `years` parameter to include multiple years.",
        "operationId": "get_top_hts_for_country_imports_country__country__by_hts_get",
        "security": [
          {
            "APIKeyHeader": []
          }
        ],
        "parameters": [
          {
            "name": "country",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Country name (e.g., 'China', 'Vietnam')",
              "title": "Country"
            },
            "description": "Country name (e.g., 'China', 'Vietnam')"
          },
          {
            "name": "years",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "array",
                  "items": {
                    "type": "integer"
                  }
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by years. Default: latest year only.",
              "title": "Years"
            },
            "description": "Filter by years. Default: latest year only."
          },
          {
            "name": "chapter",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by HTS chapter (2-digit prefix, e.g., '84')",
              "title": "Chapter"
            },
            "description": "Filter by HTS chapter (2-digit prefix, e.g., '84')"
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 100,
              "minimum": 1,
              "description": "Number of top HTS codes",
              "default": 10,
              "title": "Limit"
            },
            "description": "Number of top HTS codes"
          },
          {
            "name": "sort_by",
            "in": "query",
            "required": false,
            "schema": {
              "enum": [
                "value",
                "hts"
              ],
              "type": "string",
              "description": "Sort by: 'value' (descending by import value) or 'hts' (by HTS code)",
              "default": "value",
              "title": "Sort By"
            },
            "description": "Sort by: 'value' (descending by import value) or 'hts' (by HTS code)"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIResponse_List_ImportHtsSummary__"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/imports/summary": {
      "get": {
        "tags": [
          "Import Data"
        ],
        "summary": "Import Data Summary",
        "description": "Get summary statistics for import data, optionally filtered.",
        "operationId": "get_import_summary_imports_summary_get",
        "security": [
          {
            "APIKeyHeader": []
          }
        ],
        "parameters": [
          {
            "name": "hts_code",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by HTS code",
              "title": "Hts Code"
            },
            "description": "Filter by HTS code"
          },
          {
            "name": "country",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by country name",
              "title": "Country"
            },
            "description": "Filter by country name"
          },
          {
            "name": "years",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "array",
                  "items": {
                    "type": "integer"
                  }
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by years",
              "title": "Years"
            },
            "description": "Filter by years"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIResponse_ImportDataSummary_"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/imports/dimensions/years": {
      "get": {
        "tags": [
          "Import Data"
        ],
        "summary": "Available Import Years",
        "description": "Get list of years with import data available.",
        "operationId": "get_dimension_years_imports_dimensions_years_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIResponse_List_int__"
                }
              }
            }
          }
        },
        "security": [
          {
            "APIKeyHeader": []
          }
        ]
      }
    },
    "/imports/dimensions/countries": {
      "get": {
        "tags": [
          "Import Data"
        ],
        "summary": "Available Import Countries",
        "description": "Get list of countries with import data available.",
        "operationId": "get_dimension_countries_imports_dimensions_countries_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIResponse_List_str__"
                }
              }
            }
          }
        },
        "security": [
          {
            "APIKeyHeader": []
          }
        ]
      }
    },
    "/imports/dimensions/hts-codes": {
      "get": {
        "tags": [
          "Import Data"
        ],
        "summary": "Available HTS Codes by Chapter",
        "description": "Get list of HTS codes with import data for a specific chapter.",
        "operationId": "get_dimension_hts_codes_imports_dimensions_hts_codes_get",
        "security": [
          {
            "APIKeyHeader": []
          }
        ],
        "parameters": [
          {
            "name": "chapter",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "minLength": 1,
              "maxLength": 2,
              "description": "2-digit HTS chapter (required, e.g., '84')",
              "title": "Chapter"
            },
            "description": "2-digit HTS chapter (required, e.g., '84')"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIResponse_List_str__"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "APIMeta": {
        "properties": {
          "timestamp_unixts": {
            "type": "number",
            "title": "Timestamp Unixts",
            "description": "Request timestamp as Unix timestamp in seconds."
          },
          "operation": {
            "type": "string",
            "title": "Operation",
            "description": "Logical name of the API operation."
          },
          "params": {
            "additionalProperties": true,
            "type": "object",
            "title": "Params",
            "description": "Echo of request parameters."
          },
          "hts_year": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Hts Year",
            "description": "HTS revision year used for this request."
          },
          "hts_version": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Hts Version",
            "description": "HTS revision version number used for this request."
          },
          "pagination": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/APIPagination"
              },
              {
                "type": "null"
              }
            ],
            "description": "Pagination details for paginated responses."
          },
          "window_info": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Window Info",
            "description": "Window/scroll context for lazy-loaded content APIs."
          },
          "result_count": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Result Count",
            "description": "Count of items in data."
          }
        },
        "type": "object",
        "required": [
          "operation",
          "params"
        ],
        "title": "APIMeta",
        "description": "Metadata about the API request and response."
      },
      "APIPagination": {
        "properties": {
          "total": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Total",
            "description": "Total items available."
          },
          "limit": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Limit",
            "description": "Max items returned."
          },
          "offset": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Offset",
            "description": "Offset of this page."
          },
          "next_offset": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Next Offset",
            "description": "Offset for next page."
          },
          "has_more": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Has More",
            "description": "Whether more items exist beyond this page."
          },
          "returned_count": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Returned Count",
            "description": "Number of items returned in this response."
          },
          "deprecated_count": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Deprecated Count",
            "description": "Count of deprecated items (excluded from results)."
          }
        },
        "type": "object",
        "title": "APIPagination"
      },
      "APIReqAiClassifier": {
        "properties": {
          "description": {
            "type": "string",
            "title": "Description",
            "description": "Natural language product description to classify into HTS codes."
          }
        },
        "type": "object",
        "required": [
          "description"
        ],
        "title": "APIReqAiClassifier",
        "description": "Request parameters for AI HTS classification."
      },
      "APIReqAiExplain": {
        "properties": {
          "hts_code": {
            "type": "string",
            "title": "Hts Code",
            "description": "HTS code to explain"
          }
        },
        "type": "object",
        "required": [
          "hts_code"
        ],
        "title": "APIReqAiExplain"
      },
      "APIReqCompareTariff": {
        "properties": {
          "hts_date": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Hts Date",
            "description": "Date to find the effective HTS revision (YYYY-MM-DD format). Returns the revision that was in effect on this date.",
            "examples": [
              "2025-04-01",
              "2026-01-15"
            ]
          },
          "hts_year": {
            "anyOf": [
              {
                "type": "integer",
                "maximum": 2030.0,
                "minimum": 2020.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Hts Year",
            "description": "HTS revision year. Use with `hts_version` for a specific revision, or alone to get the latest version for that year.",
            "examples": [
              2025,
              2026
            ]
          },
          "hts_version": {
            "anyOf": [
              {
                "type": "integer",
                "maximum": 99.0,
                "minimum": 0.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Hts Version",
            "description": "HTS revision version number within the year. For example, version 27 of 2025 would be referenced as '2025-v27'.",
            "examples": [
              0,
              15,
              27
            ]
          },
          "hts_code": {
            "type": "string",
            "title": "Hts Code",
            "description": "HTS code to evaluate. Accepts dotted or undotted format.",
            "examples": [
              "7208.10.15",
              "7208101500"
            ]
          },
          "countries": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "maxItems": 50,
            "minItems": 1,
            "title": "Countries",
            "description": "List of ISO alpha-2 country codes to compare.",
            "examples": [
              [
                "CN",
                "VN",
                "MX"
              ],
              [
                "CA",
                "MX"
              ]
            ]
          },
          "cost": {
            "type": "number",
            "minimum": 0.0,
            "title": "Cost",
            "description": "Customs value of the goods for duty calculation.",
            "examples": [
              10000.0,
              50000.0
            ]
          },
          "qty": {
            "type": "number",
            "minimum": 0.0,
            "title": "Qty",
            "description": "Quantity of goods for specific rate calculations.",
            "examples": [
              100.0,
              1000.0
            ]
          },
          "currency_code": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Currency Code",
            "description": "ISO 4217 currency code for the cost value.",
            "default": "USD",
            "examples": [
              "USD",
              "EUR"
            ]
          },
          "qty_uom": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Qty Uom",
            "description": "Unit of measure for quantity. Uses HTS default if not specified.",
            "examples": [
              "KG",
              "LB",
              "NO"
            ]
          }
        },
        "type": "object",
        "required": [
          "hts_code",
          "countries",
          "cost",
          "qty"
        ],
        "title": "APIReqCompareTariff",
        "description": "Parameters for comparing tariff duties across multiple countries.\n\nCalculate and compare duty amounts for the same product imported from\ndifferent countries of origin. Useful for sourcing decisions.\n\n## Example\n\nCompare steel imports from China, Vietnam, and Mexico:\n```json\n{\n  \"hts_code\": \"7208.10.15\",\n  \"countries\": [\"CN\", \"VN\", \"MX\"],\n  \"cost\": 10000,\n  \"qty\": 1000\n}\n```"
      },
      "APIReqCountryBatch": {
        "properties": {
          "hts_date": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Hts Date",
            "description": "Date to find the effective HTS revision (YYYY-MM-DD format). Returns the revision that was in effect on this date.",
            "examples": [
              "2025-04-01",
              "2026-01-15"
            ]
          },
          "hts_year": {
            "anyOf": [
              {
                "type": "integer",
                "maximum": 2030.0,
                "minimum": 2020.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Hts Year",
            "description": "HTS revision year. Use with `hts_version` for a specific revision, or alone to get the latest version for that year.",
            "examples": [
              2025,
              2026
            ]
          },
          "hts_version": {
            "anyOf": [
              {
                "type": "integer",
                "maximum": 99.0,
                "minimum": 0.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Hts Version",
            "description": "HTS revision version number within the year. For example, version 27 of 2025 would be referenced as '2025-v27'.",
            "examples": [
              0,
              15,
              27
            ]
          },
          "identifiers": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "maxItems": 200,
            "minItems": 1,
            "title": "Identifiers",
            "description": "List of country identifiers to look up. Accepts ISO alpha-2 codes, ISO alpha-3 codes, or country names.",
            "examples": [
              [
                "US",
                "CN",
                "MX"
              ],
              [
                "United States",
                "China",
                "Mexico"
              ]
            ]
          }
        },
        "type": "object",
        "required": [
          "identifiers"
        ],
        "title": "APIReqCountryBatch",
        "description": "Request parameters for batch country lookup."
      },
      "APIReqHtsContextBatch": {
        "properties": {
          "hts_date": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Hts Date",
            "description": "Date to find the effective HTS revision (YYYY-MM-DD format). Returns the revision that was in effect on this date.",
            "examples": [
              "2025-04-01",
              "2026-01-15"
            ]
          },
          "hts_year": {
            "anyOf": [
              {
                "type": "integer",
                "maximum": 2030.0,
                "minimum": 2020.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Hts Year",
            "description": "HTS revision year. Use with `hts_version` for a specific revision, or alone to get the latest version for that year.",
            "examples": [
              2025,
              2026
            ]
          },
          "hts_version": {
            "anyOf": [
              {
                "type": "integer",
                "maximum": 99.0,
                "minimum": 0.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Hts Version",
            "description": "HTS revision version number within the year. For example, version 27 of 2025 would be referenced as '2025-v27'.",
            "examples": [
              0,
              15,
              27
            ]
          },
          "hts_codes": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "maxItems": 100,
            "minItems": 1,
            "title": "Hts Codes",
            "description": "List of HTS codes to retrieve context for (max 100)"
          },
          "include": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Include",
            "description": "Comma-separated list of hub sections to include (e.g., 'basic,rates,notes'). If not provided, all sections are returned. Supported values: basic, rates, classification, notes, materials, footnotes, units_of_measure, history, rules (Ch99 only)."
          },
          "history_lookback": {
            "type": "integer",
            "maximum": 10.0,
            "minimum": 0.0,
            "title": "History Lookback",
            "description": "Number of versions to look back for the history timeline. Only applied when the requested version is the latest for its year.",
            "default": 2
          }
        },
        "type": "object",
        "required": [
          "hts_codes"
        ],
        "title": "APIReqHtsContextBatch",
        "description": "Request model for batch HTS context hub retrieval.\n\nFetches hub-style context for multiple HTS codes in a single request.\nReturns the same schema as /context/hts/{hts_code}/hub for each code."
      },
      "APIReqMultiCountry": {
        "properties": {
          "hts_date": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Hts Date",
            "description": "Date to find the effective HTS revision (YYYY-MM-DD format). Returns the revision that was in effect on this date.",
            "examples": [
              "2025-04-01",
              "2026-01-15"
            ]
          },
          "hts_year": {
            "anyOf": [
              {
                "type": "integer",
                "maximum": 2030.0,
                "minimum": 2020.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Hts Year",
            "description": "HTS revision year. Use with `hts_version` for a specific revision, or alone to get the latest version for that year.",
            "examples": [
              2025,
              2026
            ]
          },
          "hts_version": {
            "anyOf": [
              {
                "type": "integer",
                "maximum": 99.0,
                "minimum": 0.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Hts Version",
            "description": "HTS revision version number within the year. For example, version 27 of 2025 would be referenced as '2025-v27'.",
            "examples": [
              0,
              15,
              27
            ]
          },
          "hts_code": {
            "type": "string",
            "title": "Hts Code",
            "description": "HTS code to evaluate. Accepts dotted or undotted format.",
            "examples": [
              "7208.10.15",
              "7208101500"
            ]
          },
          "countries": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "minItems": 1,
            "title": "Countries",
            "description": "List of ISO alpha-2 country codes, or a keyword like 'all-50'. Keywords only work when list has exactly 1 item.",
            "examples": [
              [
                "CN",
                "VN",
                "MX"
              ],
              [
                "all-50"
              ]
            ]
          },
          "cost": {
            "type": "number",
            "minimum": 0.0,
            "title": "Cost",
            "description": "Customs value of the goods for duty calculation.",
            "examples": [
              10000.0,
              50000.0
            ]
          },
          "qty": {
            "type": "number",
            "minimum": 0.0,
            "title": "Qty",
            "description": "Quantity of goods for specific rate calculations.",
            "examples": [
              100.0,
              1000.0
            ]
          },
          "currency_code": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Currency Code",
            "description": "ISO 4217 currency code for the cost value.",
            "default": "USD",
            "examples": [
              "USD"
            ]
          },
          "qty_uom": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Qty Uom",
            "description": "Unit of measure for quantity. Uses HTS default if not specified.",
            "examples": [
              "KG",
              "LB",
              "NO"
            ]
          },
          "reciprocal": {
            "type": "boolean",
            "title": "Reciprocal",
            "description": "Include Chapter 99 reciprocal rate evaluation (Section 232, 301, IEEPA, etc.).",
            "default": true
          },
          "include_rules_view": {
            "type": "boolean",
            "title": "Include Rules View",
            "description": "Include unified rules view showing all applicable trade rules and conditions.",
            "default": false
          },
          "import_date": {
            "anyOf": [
              {
                "type": "string",
                "format": "date"
              },
              {
                "type": "null"
              }
            ],
            "title": "Import Date",
            "description": "Import date (YYYY-MM-DD) for date-sensitive rate calculations."
          },
          "loading_date": {
            "anyOf": [
              {
                "type": "string",
                "format": "date"
              },
              {
                "type": "null"
              }
            ],
            "title": "Loading Date",
            "description": "Transit loading date (YYYY-MM-DD) for reciprocal rate exclusions."
          },
          "rate_column": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Rate Column",
            "description": "Specific rate column to evaluate: 'general', 'special', or 'other'.",
            "examples": [
              "general",
              "special"
            ]
          },
          "base_ad_valorem_rate": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Base Ad Valorem Rate",
            "description": "Override for base ad valorem rate when evaluating reciprocal rules."
          },
          "admitted_to_ftz": {
            "type": "boolean",
            "title": "Admitted To Ftz",
            "description": "Whether goods are admitted to a Foreign Trade Zone.",
            "default": false
          },
          "usmca_claim": {
            "type": "boolean",
            "title": "Usmca Claim",
            "description": "Claim preferential treatment under USMCA agreement.",
            "default": false
          },
          "program_qualified": {
            "type": "boolean",
            "title": "Program Qualified",
            "description": "Declarant affirms eligibility for special program claims. When False, special program rates are not applied.",
            "default": true
          },
          "is_donation": {
            "type": "boolean",
            "title": "Is Donation",
            "description": "Treat shipment as a qualifying humanitarian donation.",
            "default": false
          },
          "is_informational": {
            "type": "boolean",
            "title": "Is Informational",
            "description": "Goods consist primarily of informational materials.",
            "default": false
          },
          "is_personal_baggage": {
            "type": "boolean",
            "title": "Is Personal Baggage",
            "description": "Goods are personal accompanied baggage.",
            "default": false
          },
          "chapter98_provision": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Chapter98 Provision",
            "description": "Chapter 98 provision claimed for the entry (e.g., '9802.00.80').",
            "examples": [
              "9802.00.80",
              "9801.00.10"
            ]
          },
          "materials": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/MaterialComponent"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Materials",
            "description": "Material components for Section 232 steel/aluminum calculations."
          },
          "selected_code_conditions": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Selected Code Conditions",
            "description": "User-selected conditions for conditional exemption codes."
          },
          "product_usage": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Product Usage",
            "description": "Product usage context for conditional rate determination."
          }
        },
        "type": "object",
        "required": [
          "hts_code",
          "countries",
          "cost",
          "qty"
        ],
        "title": "APIReqMultiCountry",
        "description": "Request schema for multi-country tariff rate evaluation.\n\nEvaluates tariff rates for a single HTS code across multiple countries\nof origin in a single request. Returns the same detailed calculation\nresults as `/rates/entry` for each country.\n\n## Use Cases\n\n- **Sourcing decisions**: Compare total landed costs across suppliers\n- **Trade planning**: Identify lowest-duty import options\n- **What-if analysis**: Model scenarios with different program claims\n\n## Country Keywords\n\nSpecial keywords can be used instead of explicit country lists:\n- `[\"all\"]` - All countries (~195)\n- `[\"all-50\"]` - Top 50 trading partners by volume\n- `[\"all-75\"]` - Top 75 trading partners\n- `[\"all-100\"]` - Top 100 trading partners\n\n## Example\n\n```json\n{\n  \"hts_code\": \"7208.10.15\",\n  \"countries\": [\"CN\", \"VN\", \"MX\", \"IN\"],\n  \"cost\": 10000,\n  \"qty\": 1000,\n  \"reciprocal\": true\n}\n```"
      },
      "APIReqRateAdjustments": {
        "properties": {
          "result": {
            "additionalProperties": true,
            "type": "object",
            "title": "Result",
            "description": "The original CalcResponse payload to adjust. This should be the 'data' field from a /rates/entry response."
          },
          "adjustments": {
            "items": {
              "$ref": "#/components/schemas/RateAdjustment"
            },
            "type": "array",
            "minItems": 1,
            "title": "Adjustments",
            "description": "List of rate overrides to apply. Each override specifies an HTS 99 code and its new rate (complete replacement)."
          }
        },
        "type": "object",
        "required": [
          "result",
          "adjustments"
        ],
        "title": "APIReqRateAdjustments",
        "description": "Request model for applying rate overrides to a calculation result.\n\nSupports applying multiple rate overrides to an existing CalcResponse,\nenabling top-side rate forecasting for Chapter 99 codes.\n\nThe response is the same CalcResponse structure with modified values\nand an additional `adjustment_metadata` field."
      },
      "APIReqRateAdjustmentsBatch": {
        "properties": {
          "results": {
            "items": {
              "additionalProperties": true,
              "type": "object"
            },
            "type": "array",
            "minItems": 1,
            "title": "Results",
            "description": "List of CalcResponse payloads to adjust. These should be the items from the 'data' array of a /rates/entries response."
          },
          "adjustments": {
            "items": {
              "$ref": "#/components/schemas/RateAdjustment"
            },
            "type": "array",
            "minItems": 1,
            "title": "Adjustments",
            "description": "List of rate overrides to apply to ALL results. Each override specifies an HTS 99 code and its new rate (complete replacement)."
          }
        },
        "type": "object",
        "required": [
          "results",
          "adjustments"
        ],
        "title": "APIReqRateAdjustmentsBatch",
        "description": "Request model for applying rate overrides to multiple calculation results.\n\nSupports applying the same overrides to a batch of CalcResponses,\nenabling top-side rate forecasting across multiple entries.\n\nThe response is an array of CalcResponse objects, each with modified values\nand an individual `adjustment_metadata` field."
      },
      "APIRespAiClassifier": {
        "properties": {
          "product_description": {
            "type": "string",
            "title": "Product Description",
            "description": "The original product description provided by the user."
          },
          "result_type": {
            "type": "string",
            "enum": [
              "direct match",
              "potential matches",
              "clarification required",
              "error"
            ],
            "title": "Result Type",
            "description": "Type of result: 'direct match', 'potential matches', 'clarification required' or 'error'"
          },
          "clarify": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Clarify",
            "description": "List of clarification questions that would help better identify the right HTS code"
          },
          "reasoning": {
            "type": "string",
            "title": "Reasoning",
            "description": "Natural language description of why the best match was identified or not identified"
          },
          "direct_match": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/APIRespAiClassifierMatchSchema"
              },
              {
                "type": "null"
              }
            ],
            "description": "Details of the direct match if one is found"
          },
          "possible_matches": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/APIRespAiClassifierMatchSchema"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Possible Matches",
            "description": "List of potential matches if no direct match was identified"
          }
        },
        "type": "object",
        "required": [
          "product_description",
          "result_type",
          "reasoning"
        ],
        "title": "APIRespAiClassifier",
        "description": "Represents a response schema for an AI-based classifier that determines HTS codes.\n\nThis model serves as the response structure for an AI classifier system that aids\nin identifying the correct Harmonized Tariff Schedule (HTS) code based on input\nproduct descriptions. It includes direct match information, possible matches,\nclarification questions, and reasoning for classifications made. It handles\nvarious scenarios such as direct matches, potential matches, clarification-required\nscenarios, or errors.\n\nAttributes:\n    product_description (str): The original product description provided by the user.\n    result_type (HtsConstants.classifier_result_typeT): Type of result identifying the\n        classifier's response ('direct match', 'potential matches', 'clarification required',\n        or 'error').\n    clarify (List[str]): List of clarification questions aimed at helping determine the\n        correct HTS code with better accuracy.\n    reasoning (str): Natural language explanation detailing the rationale behind the\n        classification outcome.\n    direct_match (Optional[APIRespAiClassifierMatchSchema]): Details of the direct match\n        HTS classification if one was conclusively identified.\n    possible_matches (Optional[List[APIRespAiClassifierMatchSchema]]): List of potential\n        HTS matches when an exact match cannot be determined.",
        "examples": [
          {
            "clarify": [],
            "direct_match": {
              "chapter_name": "articles of iron or steel",
              "chapter_number": 73,
              "confidence_score": 0.95,
              "description": "stainless steel sinks with one or more drawn bowls",
              "heading_name": "sanitary ware",
              "hts_code": "7324100010",
              "section_name": "base metals and articles of base metal",
              "section_number": 15,
              "suffix_name": "stainless steel sinks"
            },
            "possible_matches": [],
            "product_description": "Stainless steel kitchen sinks",
            "reasoning": "The product is clearly described as a stainless steel kitchen sink.",
            "result_type": "direct match"
          }
        ]
      },
      "APIRespAiClassifierMatchSchema": {
        "properties": {
          "hts_code": {
            "type": "string",
            "title": "Hts Code",
            "description": "The 8 to 10-digit HTS code"
          },
          "description": {
            "type": "string",
            "title": "Description",
            "description": "Description of the classified item"
          },
          "section_number": {
            "type": "integer",
            "title": "Section Number",
            "description": "Section number of the HTS code (e.g., 1 for 'I' or 5 for 'V')"
          },
          "section_name": {
            "type": "string",
            "title": "Section Name",
            "description": "Name of the section"
          },
          "chapter_number": {
            "type": "integer",
            "title": "Chapter Number",
            "description": "Chapter number of the HTS code (e.g., 1, 2, 3, etc.)"
          },
          "chapter_name": {
            "type": "string",
            "title": "Chapter Name",
            "description": "Name of the chapter"
          },
          "heading_name": {
            "type": "string",
            "title": "Heading Name",
            "description": "Name of the heading"
          },
          "suffix_name": {
            "type": "string",
            "title": "Suffix Name",
            "description": "Name of the suffix/subheading"
          },
          "confidence_score": {
            "type": "number",
            "maximum": 1.0,
            "minimum": 0.0,
            "title": "Confidence Score",
            "description": "Confidence score for the match (0.0 to 1.0)"
          }
        },
        "type": "object",
        "required": [
          "hts_code",
          "description",
          "section_number",
          "section_name",
          "chapter_number",
          "chapter_name",
          "heading_name",
          "suffix_name",
          "confidence_score"
        ],
        "title": "APIRespAiClassifierMatchSchema",
        "description": "Represents a schema for AI-classified matches in relation to HTS codes.\n\nThis class is used to encapsulate detailed information about an HTS (Harmonized Tariff Schedule) code\nmatch that is identified through AI classification. Such matches include metadata about sections,\nchapters, headings, and provide a confidence score for the classification. It is useful within\ncustoms, trade, or any domain requiring HTS code classification.\n\nAttributes:\n    hts_code: The 8 to 10-digit HTS code.\n    description: Description of the classified item.\n    section_number: Section number of the HTS code (e.g., 1 for 'I' or 5 for 'V').\n    section_name: Name of the section.\n    chapter_number: Chapter number of the HTS code (e.g., 1, 2, 3, etc.).\n    chapter_name: Name of the chapter.\n    heading_name: Name of the heading.\n    suffix_name: Name of the suffix/subheading.\n    confidence_score: Confidence score for the match (0.0 to 1.0)."
      },
      "APIRespAiExplain": {
        "properties": {
          "hts_code": {
            "type": "string",
            "title": "Hts Code",
            "description": "The HTS code being explained"
          },
          "summary": {
            "type": "string",
            "title": "Summary",
            "description": "LLM generated summary for the code"
          },
          "disclaimer": {
            "type": "string",
            "title": "Disclaimer",
            "description": "Disclaimer about the AI generated content"
          }
        },
        "type": "object",
        "required": [
          "hts_code",
          "summary",
          "disclaimer"
        ],
        "title": "APIRespAiExplain",
        "examples": [
          {
            "disclaimer": "This summary is generated by AI for informational purposes only and does not constitute legal or professional advice.",
            "hts_code": "7208.10.15",
            "summary": "This code covers flat-rolled products of iron or nonalloy steel, of a width of 600 mm or more, hot-rolled, not clad, plated or coated, in coils, pickled."
          }
        ]
      },
      "APIRespAutocompleteHtsItem": {
        "properties": {
          "hts_code": {
            "type": "string",
            "title": "Hts Code",
            "description": "Normalized 10-digit HTS code (e.g., '7208101500')."
          },
          "htsno": {
            "type": "string",
            "title": "Htsno",
            "description": "Dotted HTS code format (e.g., '7208.10.15')."
          },
          "description": {
            "type": "string",
            "title": "Description",
            "description": "Full text description of the HTS code."
          },
          "digit_length": {
            "type": "integer",
            "title": "Digit Length",
            "description": "Effective digit length (4, 6, 8, or 10)."
          },
          "section_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Section Name",
            "description": "HTS section name."
          },
          "chapter_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Chapter Name",
            "description": "HTS chapter name."
          },
          "heading_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Heading Name",
            "description": "HTS heading name (4-digit level)."
          },
          "subheading_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Subheading Name",
            "description": "HTS subheading name (6-digit level)."
          },
          "suffix_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Suffix Name",
            "description": "HTS suffix name (8-10 digit level)."
          },
          "units_of_measures": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Units Of Measures",
            "description": "List of statistical units of measure."
          },
          "indent_level": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Indent Level",
            "description": "Hierarchy indent level (0-5)."
          },
          "parent_hts_code": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Parent Hts Code",
            "description": "Parent HTS code in hierarchy."
          },
          "score": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Score",
            "description": "Relevance score for fuzzy/semantic matches (when available)."
          }
        },
        "type": "object",
        "required": [
          "hts_code",
          "htsno",
          "description",
          "digit_length"
        ],
        "title": "APIRespAutocompleteHtsItem",
        "description": "Response model for a single HTS code in autocomplete results.",
        "examples": [
          {
            "chapter_name": "Iron and Steel",
            "description": "Flat-rolled products of iron or nonalloy steel, of a width of 600 mm or more, hot-rolled, not clad, plated or coated, In coils, not further worked than hot-rolled, Of a thickness exceeding 10 mm",
            "digit_length": 10,
            "heading_name": "Flat-Rolled Iron/Steel Width >=600mm Hot-Rolled",
            "hts_code": "7208101500",
            "htsno": "7208.10.15",
            "indent_level": 2,
            "parent_hts_code": "7208100000",
            "section_name": "Base Metals and Articles of Base Metal",
            "subheading_name": "In coils, not further worked than hot-rolled",
            "suffix_name": "Of a thickness exceeding 10 mm",
            "units_of_measures": [
              "kg"
            ]
          }
        ]
      },
      "APIRespChapterBySection": {
        "properties": {
          "chapter": {
            "type": "string",
            "title": "Chapter",
            "description": "Chapter alias identifier (e.g., 'chapter_72')."
          },
          "number": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Number",
            "description": "Chapter number (1-99)."
          },
          "name": {
            "type": "string",
            "title": "Name",
            "description": "Human-readable chapter display name."
          },
          "source_url": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Source Url",
            "description": "URL to the chapter PDF source document."
          },
          "context": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Context",
            "description": "Chapter notes and context text (when include_context=True)."
          },
          "hts_codes": {
            "anyOf": [
              {
                "items": {
                  "additionalProperties": true,
                  "type": "object"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Hts Codes",
            "description": "HTS codes within this chapter (when include_hts_codes=True)."
          }
        },
        "type": "object",
        "required": [
          "chapter",
          "name"
        ],
        "title": "APIRespChapterBySection",
        "description": "Chapter item from the chapters-by-section endpoint.",
        "examples": [
          {
            "chapter": "chapter_72",
            "name": "iron and steel",
            "number": 72,
            "source_url": "https://hts.usitc.gov/reststop/file?release=2025HTSRev31&filename=Chapter%2072"
          }
        ]
      },
      "APIRespCompareRate": {
        "properties": {
          "hts_code": {
            "type": "string",
            "title": "Hts Code",
            "description": "HTS code being compared."
          },
          "source_a": {
            "type": "string",
            "title": "Source A",
            "description": "First (baseline) HTS source identifier (e.g., '2025-v15')."
          },
          "source_b": {
            "type": "string",
            "title": "Source B",
            "description": "Second HTS source identifier (e.g., '2025-v27')."
          },
          "before_rates": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/HtsScheduleEntry"
              },
              {
                "type": "null"
              }
            ],
            "description": "Rate details from source_a."
          },
          "after_rates": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/HtsScheduleEntry"
              },
              {
                "type": "null"
              }
            ],
            "description": "Rate details from source_b."
          },
          "summary": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Summary",
            "description": "Human-readable summary of changes."
          }
        },
        "type": "object",
        "required": [
          "hts_code",
          "source_a",
          "source_b"
        ],
        "title": "APIRespCompareRate",
        "description": "Side-by-side comparison of HTS duty rates across two revisions.",
        "examples": [
          {
            "after_rates": {
              "chapter_name": "Iron and Steel",
              "description": "Flat-rolled products, pickled",
              "hts_code": "7208101500",
              "htsno": "7208.10.15.00",
              "indent_level": 2,
              "parent_hts_code": "7208100000",
              "section_name": "Base Metals and Articles of Base Metal",
              "units_of_measures": [
                "kg"
              ]
            },
            "before_rates": {
              "chapter_name": "Iron and Steel",
              "description": "Flat-rolled products, pickled",
              "hts_code": "7208101500",
              "htsno": "7208.10.15.00",
              "indent_level": 2,
              "parent_hts_code": "7208100000",
              "section_name": "Base Metals and Articles of Base Metal",
              "units_of_measures": [
                "kg"
              ]
            },
            "hts_code": "7208101500",
            "source_a": "2025-v27",
            "source_b": "2025-v31",
            "summary": "No rate changes detected"
          }
        ]
      },
      "APIRespCompareSources": {
        "properties": {
          "source_a": {
            "type": "string",
            "title": "Source A",
            "description": "First (baseline) HTS source identifier."
          },
          "source_b": {
            "type": "string",
            "title": "Source B",
            "description": "Second HTS source identifier."
          },
          "changes": {
            "additionalProperties": true,
            "type": "object",
            "title": "Changes",
            "description": "Categorized changes (added, removed, modified codes)."
          },
          "summary": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Summary",
            "description": "Human-readable summary of all changes."
          }
        },
        "type": "object",
        "required": [
          "source_a",
          "source_b"
        ],
        "title": "APIRespCompareSources",
        "description": "Comprehensive comparison of two HTS source revisions.",
        "examples": [
          {
            "changes": {
              "added": [
                "9903.01.50"
              ],
              "modified": [
                "7208101500"
              ],
              "removed": []
            },
            "source_a": "2025-v27",
            "source_b": "2025-v31",
            "summary": "1 code added, 0 removed, 1 modified"
          }
        ]
      },
      "APIRespDataChapterContext": {
        "properties": {
          "chapter": {
            "type": "string",
            "title": "Chapter",
            "description": "Chapter identifier (e.g., 'chapter_72')."
          },
          "name": {
            "type": "string",
            "title": "Name",
            "description": "Chapter name/title."
          },
          "number": {
            "type": "integer",
            "title": "Number",
            "description": "Chapter number (1-99)."
          },
          "context": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Context",
            "description": "Chapter notes and context (only when include_context=True)."
          },
          "hts_codes": {
            "anyOf": [
              {
                "items": {
                  "additionalProperties": true,
                  "type": "object"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Hts Codes",
            "description": "List of HTS codes in this chapter with rate details."
          },
          "pagination": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Pagination",
            "description": "Pagination metadata when limit/offset used."
          }
        },
        "type": "object",
        "required": [
          "chapter",
          "name",
          "number"
        ],
        "title": "APIRespDataChapterContext",
        "description": "Context and HTS codes for a single HTS chapter.",
        "examples": [
          {
            "chapter": "chapter_72",
            "name": "Iron and Steel",
            "number": 72
          }
        ]
      },
      "APIRespDataHtsCodeContext": {
        "properties": {
          "hts_code": {
            "type": "string",
            "title": "Hts Code",
            "description": "Normalized 10-digit HTS code (e.g., '7208101500')."
          },
          "htsno": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Htsno",
            "description": "Original dotted HTS code format (e.g., '7208.10.15.00')."
          },
          "description": {
            "type": "string",
            "title": "Description",
            "description": "Full text description of the HTS code."
          },
          "indent_level": {
            "type": "integer",
            "title": "Indent Level",
            "description": "Hierarchy indent level (0-5), indicating depth in HTS tree."
          },
          "units_of_measures": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Units Of Measures",
            "description": "Statistical unit(s) of measure (e.g., ['kg', 'No.'])."
          },
          "parent_hts_code": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Parent Hts Code",
            "description": "Parent HTS code in hierarchy (null for top-level codes)."
          },
          "section_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Section Name",
            "description": "HTS section name (e.g., 'Base Metals and Articles of Base Metal')."
          },
          "chapter_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Chapter Name",
            "description": "HTS chapter name (e.g., 'Iron and Steel')."
          },
          "heading_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Heading Name",
            "description": "HTS heading name (4-digit level description)."
          },
          "subheading_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Subheading Name",
            "description": "HTS subheading name (6-digit level description)."
          },
          "suffix_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Suffix Name",
            "description": "HTS suffix name (8-10 digit level description)."
          },
          "footnotes": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Footnotes",
            "description": "Footnotes associated with the HTS code, keyed by footnote type."
          },
          "rates": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/HtsRateComponent"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Rates",
            "description": "List of applicable duty rate components."
          },
          "raw_json_entry": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Raw Json Entry",
            "description": "Original raw JSON entry from source data (for debugging)."
          }
        },
        "type": "object",
        "required": [
          "hts_code",
          "description",
          "indent_level"
        ],
        "title": "APIRespDataHtsCodeContext",
        "description": "Detailed context for a single HTS code including hierarchy and rates.\n\nUsed by GET /context/hts/{hts_code}/details endpoint.",
        "examples": [
          {
            "chapter_name": "iron and steel",
            "description": "pickled",
            "footnotes": {
              "general": [
                {
                  "hts_refs": [],
                  "type": "endnote",
                  "value": "See U.S. note 16 to subchapter III, chapter 99."
                },
                {
                  "hts_refs": [
                    "9903.91.01"
                  ],
                  "type": "endnote",
                  "value": "See 9903.91.01."
                }
              ]
            },
            "heading_name": "flatrolled products of iron or nonalloy steel of a width of 600 mm or more hotrolled not clad plated or coated",
            "hts_code": "7208101500",
            "htsno": "7208.10.15.00",
            "indent_level": 2,
            "parent_hts_code": "7208100000",
            "rates": [
              {
                "base_text": "free",
                "component_text": "free",
                "conditions": [],
                "hts_code": "7208101500",
                "htsno": "7208.10.15.00",
                "lst_footnotes_hts_refs": [
                  "9903.91.01"
                ],
                "lst_footnotes_text": [
                  "See U.S. note 16 to subchapter III, chapter 99.",
                  "See 9903.91.01."
                ],
                "lst_hts_refs": [],
                "lst_programs": [],
                "match_scenario": "free",
                "rate_basis": "free",
                "rate_column": "general",
                "rate_usage": "base"
              },
              {
                "base_text": "0.4c/kg + 20%",
                "component_text": "0.4c/kg",
                "conditions": [],
                "hts_code": "7208101500",
                "htsno": "7208.10.15.00",
                "lst_footnotes_hts_refs": [],
                "lst_footnotes_text": [],
                "lst_hts_refs": [],
                "lst_programs": [],
                "match_scenario": "specific_rate_pattern_1",
                "rate_basis": "specific",
                "rate_column": "other",
                "rate_usage": "base",
                "rate_value": 0.004,
                "uom": "kilogram",
                "uom_extra": ""
              }
            ],
            "section_name": "base metals and articles of base metal",
            "subheading_name": "in coils not further worked than hotrolled with patterns in relief",
            "suffix_name": "pickled",
            "units_of_measures": [
              "kg"
            ]
          }
        ]
      },
      "APIRespDataHtsCodeHistory": {
        "properties": {
          "year": {
            "type": "integer",
            "title": "Year",
            "description": "HTS revision year."
          },
          "version": {
            "type": "integer",
            "title": "Version",
            "description": "HTS revision version number."
          },
          "hts_entry": {
            "$ref": "#/components/schemas/HtsScheduleEntry",
            "description": "Full HTS schedule entry for this revision."
          }
        },
        "type": "object",
        "required": [
          "year",
          "version",
          "hts_entry"
        ],
        "title": "APIRespDataHtsCodeHistory",
        "description": "Historical record for a single HTS code across revisions.",
        "examples": [
          {
            "hts_entry": {
              "description": "T-shirts, singlets, tank tops and similar garments, knitted or crocheted",
              "hts_code": "6109100004",
              "htsno": "6109.10.00.04"
            },
            "version": 31,
            "year": 2025
          }
        ]
      },
      "APIRespDataHtsCodeHub": {
        "properties": {
          "details": {
            "$ref": "#/components/schemas/HtsScheduleEntry",
            "description": "HTS code details including hts_code, htsno, description, indent_level, parent_hts_code, units_of_measures, section/chapter/heading names, and footnotes."
          },
          "rates": {
            "items": {
              "$ref": "#/components/schemas/HtsRateComponent"
            },
            "type": "array",
            "title": "Rates",
            "description": "List of duty rate components applicable to this HTS code."
          },
          "reciprocal": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Reciprocal",
            "description": "Chapter 99 reciprocal tariff evaluation (only present when reciprocal=true). Contains context, totals, rules, and conditional_exemptions. May contain 'error' key if evaluation failed."
          }
        },
        "type": "object",
        "required": [
          "details"
        ],
        "title": "APIRespDataHtsCodeHub",
        "description": "HTS code context with nested details, rates, and optional reciprocal evaluation.\n\nUsed by GET /context/hts/{hts_code} endpoint.\n\nStructure varies based on request parameters:\n- Basic: `details` (HTS info) + `rates` (duty rates)\n- With reciprocal=true: adds `reciprocal` with Chapter 99 evaluation",
        "examples": [
          {
            "details": {
              "chapter_name": "iron and steel",
              "description": "pickled",
              "footnotes": {
                "general": [
                  {
                    "hts_refs": [],
                    "type": "endnote",
                    "value": "See U.S. note 16 to subchapter III, chapter 99."
                  },
                  {
                    "hts_refs": [
                      "9903.91.01"
                    ],
                    "type": "endnote",
                    "value": "See 9903.91.01."
                  }
                ]
              },
              "heading_name": "flatrolled products of iron or nonalloy steel of a width of 600 mm or more hotrolled not clad plated or coated",
              "hts_code": "7208101500",
              "htsno": "7208.10.15.00",
              "indent_level": 2,
              "parent_hts_code": "7208100000",
              "rate_components": [],
              "section_name": "base metals and articles of base metal",
              "subheading_name": "in coils not further worked than hotrolled with patterns in relief",
              "suffix_name": "pickled",
              "units_of_measures": [
                "kg"
              ]
            },
            "rates": [
              {
                "base_text": "free",
                "component_text": "free",
                "conditions": [],
                "hts_code": "7208101500",
                "htsno": "7208.10.15.00",
                "lst_footnotes_hts_refs": [
                  "9903.91.01"
                ],
                "lst_footnotes_text": [
                  "See U.S. note 16 to subchapter III, chapter 99.",
                  "See 9903.91.01."
                ],
                "lst_hts_refs": [],
                "lst_programs": [],
                "match_scenario": "free",
                "rate_basis": "free",
                "rate_column": "general",
                "rate_usage": "base"
              }
            ]
          }
        ]
      },
      "APIRespDataSectionContext": {
        "properties": {
          "section": {
            "type": "string",
            "title": "Section",
            "description": "Section identifier (e.g., 'section_15')."
          },
          "name": {
            "type": "string",
            "title": "Name",
            "description": "Section name/title."
          },
          "number": {
            "type": "integer",
            "title": "Number",
            "description": "Section number (1-22)."
          },
          "context": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Context",
            "description": "Section notes and context."
          },
          "chapters": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/APIRespDataChapterContext"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Chapters",
            "description": "List of chapters in this section."
          }
        },
        "type": "object",
        "required": [
          "section",
          "name",
          "number"
        ],
        "title": "APIRespDataSectionContext",
        "description": "Context and chapters for a single HTS section.",
        "examples": [
          {
            "chapters": [],
            "name": "Base Metals and Articles of Base Metal",
            "number": 15,
            "section": "section_15"
          }
        ]
      },
      "APIRespDocumentContent": {
        "properties": {
          "document_id": {
            "type": "string",
            "title": "Document Id",
            "description": "Document unique identifier"
          },
          "document_type": {
            "type": "string",
            "enum": [
              "about",
              "general_note",
              "appendix"
            ],
            "title": "Document Type",
            "description": "Document type classification"
          },
          "alias": {
            "type": "string",
            "title": "Alias",
            "description": "Document alias (e.g., 'preface', 'general_note_11')"
          },
          "title": {
            "type": "string",
            "title": "Title",
            "description": "Human-readable title"
          },
          "content": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Content",
            "description": "Full text content"
          },
          "content_lines": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Content Lines",
            "description": "Content split by lines"
          },
          "related_documents": {
            "items": {
              "$ref": "#/components/schemas/DocumentRelatedItem"
            },
            "type": "array",
            "title": "Related Documents",
            "description": "Previous/next documents for navigation"
          },
          "metadata": {
            "additionalProperties": true,
            "type": "object",
            "title": "Metadata",
            "description": "Additional document metadata"
          }
        },
        "type": "object",
        "required": [
          "document_id",
          "document_type",
          "alias",
          "title"
        ],
        "title": "APIRespDocumentContent",
        "description": "Response payload for document content endpoint.",
        "examples": [
          {
            "alias": "general_note_1",
            "content": "Tariff Treatment of Imported Goods...",
            "content_lines": [
              "Tariff Treatment of Imported Goods..."
            ],
            "document_id": "gen:01",
            "document_type": "general_note",
            "metadata": {
              "source_url": "https://hts.usitc.gov/..."
            },
            "related_documents": [
              {
                "id": "gen:00",
                "position": "previous",
                "title": "Rules of Interpretation"
              },
              {
                "id": "gen:02",
                "position": "next",
                "title": "General Note 2"
              }
            ],
            "title": "General Note 1"
          }
        ]
      },
      "APIRespDocumentIndex": {
        "properties": {
          "intro": {
            "$ref": "#/components/schemas/DocumentIndexSegment",
            "description": "Introductory pages segment"
          },
          "general_notes": {
            "$ref": "#/components/schemas/DocumentIndexSegment",
            "description": "General notes segment"
          },
          "schedule": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/DocumentIndexSchedule"
              },
              {
                "type": "null"
              }
            ],
            "description": "Schedule segment (sections/chapters)"
          },
          "appendices": {
            "$ref": "#/components/schemas/DocumentIndexSegment",
            "description": "Appendices segment"
          }
        },
        "type": "object",
        "required": [
          "intro",
          "general_notes",
          "appendices"
        ],
        "title": "APIRespDocumentIndex",
        "description": "Response payload for the HTS document index endpoint.",
        "examples": [
          {
            "appendices": {
              "item_count": 4,
              "items": [
                {
                  "alias": "chemical_appendix",
                  "id": "apx:01",
                  "title": "Chemical Appendix"
                }
              ],
              "label": "Appendices",
              "segment_code": "apx"
            },
            "general_notes": {
              "item_count": 38,
              "items": [
                {
                  "alias": "general_note_1",
                  "id": "gen:01",
                  "title": "General Note 1"
                }
              ],
              "label": "General Notes",
              "segment_code": "gen"
            },
            "intro": {
              "item_count": 6,
              "items": [
                {
                  "alias": "cover",
                  "id": "int:01",
                  "title": "Cover"
                }
              ],
              "label": "Introductory Pages",
              "segment_code": "int"
            }
          }
        ]
      },
      "APIRespError": {
        "properties": {
          "code": {
            "type": "string",
            "title": "Code",
            "description": "Machine-readable error code."
          },
          "message": {
            "type": "string",
            "title": "Message",
            "description": "Human-readable message."
          },
          "field": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Field",
            "description": "Field causing error (if validation error)."
          }
        },
        "type": "object",
        "required": [
          "code",
          "message"
        ],
        "title": "APIRespError"
      },
      "APIRespHtsContextHub": {
        "properties": {
          "hts_code": {
            "type": "string",
            "title": "Hts Code",
            "description": "Normalized code without dots."
          },
          "code_type": {
            "type": "string",
            "enum": [
              "base",
              "ch99_rule"
            ],
            "title": "Code Type",
            "description": "Code type for UI rendering: 'base' or 'ch99_rule'."
          },
          "basic": {
            "$ref": "#/components/schemas/HubBasicInfo",
            "description": "Basic information common to all HTS codes."
          },
          "rates": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/HubRatesSection"
              },
              {
                "type": "null"
              }
            ],
            "description": "Rate details section."
          },
          "classification": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/HubClassification"
              },
              {
                "type": "null"
              }
            ],
            "description": "Classification details (primarily Ch99, extensible to all)."
          },
          "notes": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/HubNotesSection"
              },
              {
                "type": "null"
              }
            ],
            "description": "Related notes section."
          },
          "history": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/HubHistorySection"
              },
              {
                "type": "null"
              }
            ],
            "description": "Version history section."
          },
          "materials": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/HubMaterialsSection"
              },
              {
                "type": "null"
              }
            ],
            "description": "Material composition (base codes only)."
          },
          "footnotes": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/HubFootnotesSection"
              },
              {
                "type": "null"
              }
            ],
            "description": "Footnotes (base codes only)."
          },
          "units_of_measure": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/HubUnitsSection"
              },
              {
                "type": "null"
              }
            ],
            "description": "Units of measure (base codes only)."
          },
          "rules": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/HubRulesSection"
              },
              {
                "type": "null"
              }
            ],
            "description": "Ch99 rule conditions (country_scope, product_scope, date_conditions, associations)."
          },
          "ui_hints": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/HubUIHints"
              },
              {
                "type": "null"
              }
            ],
            "description": "UI rendering hints."
          }
        },
        "type": "object",
        "required": [
          "hts_code",
          "code_type",
          "basic"
        ],
        "title": "APIRespHtsContextHub",
        "description": "Consolidated context hub response for any HTS code.\n\nReturns different sections based on code_type:\n- \"base\": rates, materials, footnotes, units_of_measure\n- \"ch99_rule\": rules (nested: country_scope, product_scope, date_conditions, associations)",
        "examples": [
          {
            "basic": {
              "code": "7208101500",
              "description": "Flat-rolled iron/steel, pickled",
              "formatted_code": "7208.10.15.00"
            },
            "code_type": "base",
            "hts_code": "7208101500"
          }
        ]
      },
      "APIRespHtsDocsSearch": {
        "properties": {
          "query": {
            "type": "string",
            "title": "Query",
            "description": "Original search query"
          },
          "results": {
            "$ref": "#/components/schemas/HtsDocsSearchResults",
            "description": "Categorized search results"
          },
          "counts": {
            "$ref": "#/components/schemas/HtsDocsSearchCounts",
            "description": "Result counts by category"
          },
          "quick_nav": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/HtsDocsSearchQuickNav"
              },
              {
                "type": "null"
              }
            ],
            "description": "Quick navigation hint for direct jumps"
          },
          "search_meta": {
            "$ref": "#/components/schemas/HtsDocsSearchMeta",
            "description": "Search execution metadata"
          }
        },
        "type": "object",
        "required": [
          "query",
          "results",
          "counts",
          "search_meta"
        ],
        "title": "APIRespHtsDocsSearch",
        "description": "Response payload for unified HTS documentation search.",
        "examples": [
          {
            "counts": {
              "chapters": 2,
              "codes": 15,
              "notes": 5,
              "sections": 0,
              "total": 22
            },
            "query": "steel",
            "results": {
              "chapters": [
                {
                  "chapter_label": "iron and steel",
                  "chapter_number": 72,
                  "match_score": 100.0,
                  "match_type": "exact",
                  "nav_link": "/chapters/72",
                  "section_number": 15,
                  "subchapter_count": 0
                },
                {
                  "chapter_label": "articles of iron or steel",
                  "chapter_number": 73,
                  "match_score": 100.0,
                  "match_type": "exact",
                  "nav_link": "/chapters/73",
                  "section_number": 15,
                  "subchapter_count": 0
                }
              ],
              "codes": [
                {
                  "chapter_number": 84,
                  "description": "of iron or steel",
                  "digit_length": 8,
                  "hts_code": "8481302000",
                  "htsno": "8481.30.20",
                  "match_score": 90.0,
                  "match_type": "description",
                  "nav_link": "/codes/8481302000"
                }
              ],
              "notes": [
                {
                  "chapter_number": 72,
                  "content_preview": "Steel Ferrous materials other than those of heading 7203...",
                  "match_score": 0.5,
                  "nav_link": "/notes/72:0:c:72:note:1:d",
                  "note_number": "d",
                  "note_type": "note",
                  "note_unique_id": "72:0:c:72:note:1:d",
                  "subchapter_number": 0
                }
              ],
              "sections": []
            },
            "search_meta": {
              "query_type_detected": "description",
              "search_time_ms": 45.2,
              "semantic_enabled": false,
              "types_searched": [
                "sections",
                "chapters",
                "codes",
                "notes"
              ]
            }
          }
        ]
      },
      "APIRespHtsSection": {
        "properties": {
          "section_id": {
            "type": "string",
            "title": "Section Id",
            "description": "Section alias identifier (e.g., 'section_1')."
          },
          "section_number": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Section Number",
            "description": "Numeric section identifier (1-22)."
          },
          "section_label": {
            "type": "string",
            "title": "Section Label",
            "description": "Human-readable section display name."
          },
          "chapter_count": {
            "type": "integer",
            "title": "Chapter Count",
            "description": "Number of chapters in this section.",
            "default": 0
          },
          "chapter_range": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Chapter Range",
            "description": "Range of chapter numbers (e.g., '1-5')."
          },
          "children": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/APIRespHtsSectionChapter"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Children",
            "description": "List of chapters (only when include_children=True)."
          }
        },
        "type": "object",
        "required": [
          "section_id",
          "section_label"
        ],
        "title": "APIRespHtsSection",
        "description": "Section item in the HTS sections list response.",
        "examples": [
          {
            "chapter_count": 5,
            "chapter_range": "1-5",
            "children": [
              {
                "chapter_id": "chapter_1",
                "chapter_label": "live animals",
                "chapter_number": 1,
                "subchapter_count": 0
              },
              {
                "chapter_id": "chapter_2",
                "chapter_label": "meat and edible meat offal",
                "chapter_number": 2,
                "subchapter_count": 0
              },
              {
                "chapter_id": "chapter_3",
                "chapter_label": "fish and crustaceans, molluscs and other aquatic invertebrates",
                "chapter_number": 3,
                "subchapter_count": 0
              },
              {
                "chapter_id": "chapter_4",
                "chapter_label": "dairy produce; birds eggs; natural honey; edible products of animal origin, n.e.s.o.i.",
                "chapter_number": 4,
                "subchapter_count": 0
              },
              {
                "chapter_id": "chapter_5",
                "chapter_label": "products of animal origin, n.e.s.o.i.",
                "chapter_number": 5,
                "subchapter_count": 0
              }
            ],
            "section_id": "section_1",
            "section_label": "live animals; animal products",
            "section_number": 1
          }
        ]
      },
      "APIRespHtsSectionChapter": {
        "properties": {
          "chapter_id": {
            "type": "string",
            "title": "Chapter Id",
            "description": "Chapter alias identifier (e.g., 'chapter_72')."
          },
          "chapter_number": {
            "type": "integer",
            "title": "Chapter Number",
            "description": "Numeric chapter identifier (1-99)."
          },
          "chapter_label": {
            "type": "string",
            "title": "Chapter Label",
            "description": "Human-readable chapter display name."
          },
          "subchapter_count": {
            "type": "integer",
            "title": "Subchapter Count",
            "description": "Number of subchapters in this chapter.",
            "default": 0
          },
          "subchapter_range": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Subchapter Range",
            "description": "Range of subchapter numbers (e.g., '1-5')."
          },
          "children": {
            "items": {
              "$ref": "#/components/schemas/APIRespHtsSectionSubchapter"
            },
            "type": "array",
            "title": "Children",
            "description": "List of subchapters within this chapter."
          }
        },
        "type": "object",
        "required": [
          "chapter_id",
          "chapter_number",
          "chapter_label"
        ],
        "title": "APIRespHtsSectionChapter",
        "description": "Chapter item within a section in the HTS sections list."
      },
      "APIRespHtsSectionSubchapter": {
        "properties": {
          "subchapter_id": {
            "type": "string",
            "title": "Subchapter Id",
            "description": "Subchapter identifier (e.g., 'subchapter_99_3')."
          },
          "subchapter_number": {
            "type": "integer",
            "title": "Subchapter Number",
            "description": "Numeric subchapter identifier."
          },
          "subchapter_roman": {
            "type": "string",
            "title": "Subchapter Roman",
            "description": "Roman numeral representation (e.g., 'III')."
          },
          "subchapter_label": {
            "type": "string",
            "title": "Subchapter Label",
            "description": "Short display label for the subchapter."
          },
          "subchapter_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Subchapter Name",
            "description": "Full descriptive name of the subchapter."
          },
          "code_prefix": {
            "type": "string",
            "title": "Code Prefix",
            "description": "HTS code prefix for this subchapter (e.g., '9903')."
          }
        },
        "type": "object",
        "required": [
          "subchapter_id",
          "subchapter_number",
          "subchapter_roman",
          "subchapter_label",
          "code_prefix"
        ],
        "title": "APIRespHtsSectionSubchapter",
        "description": "Subchapter item within a chapter in the HTS sections list."
      },
      "APIRespMaterialCompositions": {
        "properties": {
          "steel": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Steel",
            "description": "HTS codes classified as steel products."
          },
          "aluminum": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Aluminum",
            "description": "HTS codes classified as aluminum products."
          },
          "copper": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Copper",
            "description": "HTS codes classified as copper products."
          },
          "wood": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Wood",
            "description": "HTS codes classified as wood products."
          },
          "vehicle": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Vehicle",
            "description": "HTS codes classified as vehicle products."
          }
        },
        "type": "object",
        "title": "APIRespMaterialCompositions",
        "description": "All material compositions grouped by material type.",
        "examples": [
          {
            "steel": [
              "7208101500",
              "7208102500",
              "7208103000"
            ]
          }
        ]
      },
      "APIRespMaterialDetail": {
        "properties": {
          "material": {
            "type": "string",
            "title": "Material",
            "description": "Material type (e.g., 'steel', 'aluminum')."
          },
          "source_note": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Source Note",
            "description": "Source note reference for this classification."
          },
          "source_rule": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Source Rule",
            "description": "Chapter 99 rule reference for this classification."
          }
        },
        "type": "object",
        "required": [
          "material"
        ],
        "title": "APIRespMaterialDetail",
        "description": "Detail about a material classification for an HTS code."
      },
      "APIRespMaterialForHtsCode": {
        "properties": {
          "hts_code": {
            "type": "string",
            "title": "Hts Code",
            "description": "The HTS code queried."
          },
          "materials": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Materials",
            "description": "List of material types that apply to this code."
          },
          "details": {
            "items": {
              "$ref": "#/components/schemas/APIRespMaterialDetail"
            },
            "type": "array",
            "title": "Details",
            "description": "Detailed classification information for each material."
          }
        },
        "type": "object",
        "required": [
          "hts_code"
        ],
        "title": "APIRespMaterialForHtsCode",
        "description": "Material compositions for a specific HTS code.",
        "examples": [
          {
            "details": [
              {
                "material": "steel",
                "source_note": "chapter 72 note"
              }
            ],
            "hts_code": "7208101500",
            "materials": [
              "steel"
            ]
          }
        ]
      },
      "APIRespMaterialTypeSummary": {
        "properties": {
          "material_type": {
            "type": "string",
            "title": "Material Type",
            "description": "Material type name."
          },
          "hts_code_count": {
            "type": "integer",
            "title": "Hts Code Count",
            "description": "Number of HTS codes with this material classification."
          },
          "sample_codes": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Sample Codes",
            "description": "Sample HTS codes of this material type."
          }
        },
        "type": "object",
        "required": [
          "material_type",
          "hts_code_count"
        ],
        "title": "APIRespMaterialTypeSummary",
        "description": "Summary of material types and their HTS code counts.",
        "examples": [
          {
            "hts_code_count": 1234,
            "material_type": "steel",
            "sample_codes": [
              "7208101500",
              "7208102500"
            ]
          }
        ]
      },
      "APIRespNoteContent": {
        "properties": {
          "note_unique_id": {
            "type": "string",
            "title": "Note Unique Id",
            "description": "Unique identifier (matches tree)"
          },
          "note_sort_key": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Note Sort Key",
            "description": "Sortable key for ordering"
          },
          "note_type": {
            "type": "string",
            "title": "Note Type",
            "description": "Type: us_note, stat_note, etc."
          },
          "note_number": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Note Number",
            "description": "Display number"
          },
          "note_level": {
            "type": "integer",
            "title": "Note Level",
            "description": "Hierarchy depth"
          },
          "note_title": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Note Title",
            "description": "Optional title"
          },
          "note_content": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Note Content",
            "description": "Full text (concatenated)"
          },
          "note_lines": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Note Lines",
            "description": "Original PDF line breaks preserved"
          },
          "note_bullets": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Note Bullets",
            "description": "Bullet items if applicable"
          },
          "note_metadata": {
            "additionalProperties": true,
            "type": "object",
            "title": "Note Metadata",
            "description": "Additional metadata"
          },
          "related_hts_codes": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Related Hts Codes",
            "description": "HTS codes referenced in this note"
          }
        },
        "type": "object",
        "required": [
          "note_unique_id",
          "note_type",
          "note_level"
        ],
        "title": "APIRespNoteContent",
        "description": "Full content for a single note.",
        "examples": [
          {
            "note_bullets": [],
            "note_content": "The term 'processed' covers meats which have been ground or comminuted...",
            "note_level": 1,
            "note_lines": [
              "The term 'processed' covers meats which have been ground or comminuted..."
            ],
            "note_metadata": {},
            "note_number": "a",
            "note_sort_key": "3:01.002:3:n001.l001",
            "note_type": "additional_us_note",
            "note_unique_id": "2:0:c:2:additional_us_note:1:a",
            "related_hts_codes": []
          }
        ]
      },
      "APIRespNoteItem": {
        "properties": {
          "note_id": {
            "type": "integer",
            "title": "Note Id",
            "description": "Primary key identifier for the note"
          },
          "note_unique_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Note Unique Id",
            "description": "Unique identifier for the note"
          },
          "note_type": {
            "type": "string",
            "title": "Note Type",
            "description": "Type of note (e.g., 'us_note', 'chapter_note')"
          },
          "note_number": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Note Number",
            "description": "Note number"
          },
          "note_title": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Note Title",
            "description": "Title of the note"
          },
          "note_content": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Note Content",
            "description": "Full text content of the note"
          },
          "note_level": {
            "type": "integer",
            "title": "Note Level",
            "description": "Hierarchy level of the note"
          },
          "chapter_number": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Chapter Number",
            "description": "Chapter number"
          },
          "subchapter_number": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Subchapter Number",
            "description": "Subchapter number"
          },
          "section_number": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Section Number",
            "description": "Section number"
          },
          "parent_note_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Parent Note Id",
            "description": "ID of parent note"
          },
          "note_lines": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Note Lines",
            "description": "Individual text lines"
          },
          "note_bullets": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Note Bullets",
            "description": "Bullet items"
          },
          "note_metadata": {
            "additionalProperties": true,
            "type": "object",
            "title": "Note Metadata",
            "description": "Additional metadata"
          },
          "children": {
            "items": {
              "$ref": "#/components/schemas/APIRespNoteItem"
            },
            "type": "array",
            "title": "Children",
            "description": "Child notes (recursive)"
          },
          "related_hts_codes": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Related Hts Codes",
            "description": "Related HTS codes"
          }
        },
        "type": "object",
        "required": [
          "note_id",
          "note_type",
          "note_level"
        ],
        "title": "APIRespNoteItem",
        "description": "Response model for a single note item.",
        "examples": [
          {
            "chapter_number": 2,
            "children": [],
            "note_bullets": [],
            "note_content": "The term 'processed' covers meats which have been ground or comminuted...",
            "note_id": 68186,
            "note_level": 1,
            "note_lines": [
              "The term 'processed' covers meats which have been ground or comminuted..."
            ],
            "note_metadata": {},
            "note_number": "a",
            "note_type": "additional_us_note",
            "note_unique_id": "2:0:c:2:additional_us_note:1:a",
            "related_hts_codes": [],
            "subchapter_number": 0
          }
        ]
      },
      "APIRespNotesTreeData": {
        "properties": {
          "tree": {
            "items": {
              "$ref": "#/components/schemas/APIRespTreeNode"
            },
            "type": "array",
            "title": "Tree",
            "description": "Nested tree structure"
          },
          "sections": {
            "items": {
              "$ref": "#/components/schemas/APIRespTreeSection"
            },
            "type": "array",
            "title": "Sections",
            "description": "Section groupings for navigation header"
          },
          "summary": {
            "$ref": "#/components/schemas/APIRespTreeSummary",
            "description": "Summary statistics"
          }
        },
        "type": "object",
        "required": [
          "summary"
        ],
        "title": "APIRespNotesTreeData",
        "description": "Response data for the notes tree endpoint.",
        "examples": [
          {
            "sections": [
              {
                "first_note_id": "72:0:c:72:note:1",
                "note_count": 42,
                "note_type": "note",
                "section_label": "Notes"
              }
            ],
            "summary": {
              "max_depth": 3,
              "total_notes": 42,
              "total_related_codes": 150
            },
            "tree": [
              {
                "children": [
                  {
                    "children": [],
                    "children_count": 0,
                    "content_line_count": 1,
                    "has_content": true,
                    "note_level": 2,
                    "note_number": "a",
                    "note_sort_key": "3:15.072:1:n001.l001",
                    "note_type": "note",
                    "note_unique_id": "72:0:c:72:note:1:a",
                    "parent_note_id": "72:0:c:72:note:1",
                    "related_codes_count": 4
                  }
                ],
                "children_count": 3,
                "content_line_count": 1,
                "has_content": true,
                "note_level": 1,
                "note_number": "1",
                "note_sort_key": "3:15.072:1:n001",
                "note_type": "note",
                "note_unique_id": "72:0:c:72:note:1",
                "parent_note_id": "72:0:c:72:note",
                "related_codes_count": 0
              }
            ]
          }
        ]
      },
      "APIRespProgramCountry": {
        "properties": {
          "iso_alpha2": {
            "type": "string",
            "title": "Iso Alpha2",
            "description": "ISO 3166-1 alpha-2 country code (e.g., 'CN')."
          },
          "iso_alpha3": {
            "type": "string",
            "title": "Iso Alpha3",
            "description": "ISO 3166-1 alpha-3 country code (e.g., 'CHN')."
          },
          "common_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Common Name",
            "description": "Common country name."
          },
          "country_code": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Country Code",
            "description": "HTS-specific country code."
          },
          "country_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Country Name",
            "description": "Full country name."
          },
          "official_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Official Name",
            "description": "Official country name."
          },
          "sanction": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Sanction",
            "description": "Sanction status if applicable."
          }
        },
        "type": "object",
        "required": [
          "iso_alpha2",
          "iso_alpha3"
        ],
        "title": "APIRespProgramCountry",
        "description": "Country eligible for a trade program.",
        "examples": [
          {
            "common_name": "Mexico",
            "country_code": "MX",
            "country_name": "Mexico",
            "iso_alpha2": "MX",
            "iso_alpha3": "MEX",
            "official_name": "United Mexican States"
          }
        ]
      },
      "APIRespProgramsOverview": {
        "properties": {
          "programs": {
            "items": {
              "additionalProperties": true,
              "type": "object"
            },
            "type": "array",
            "title": "Programs",
            "description": "List of trade programs with membership and sanctions info."
          }
        },
        "type": "object",
        "title": "APIRespProgramsOverview",
        "description": "Programs overview response containing list of trade programs.",
        "examples": [
          {
            "programs": [
              {
                "is_sanctioned": false,
                "member_count": 119,
                "program_code": "A",
                "program_name": "Generalized System of Preferences (GSP)"
              },
              {
                "is_sanctioned": false,
                "member_count": 1,
                "program_code": "AU",
                "program_name": "United States-Australia Free Trade Agreement"
              }
            ]
          }
        ]
      },
      "APIRespSearchHtsItem": {
        "properties": {
          "type": {
            "type": "string",
            "title": "Type",
            "description": "Result type (typically 'hts').",
            "default": "hts"
          },
          "hts_code": {
            "type": "string",
            "title": "Hts Code",
            "description": "The HTS code that matched."
          },
          "description": {
            "type": "string",
            "title": "Description",
            "description": "Description of the HTS code."
          },
          "score": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Score",
            "description": "Match score (for fuzzy/semantic searches)."
          },
          "section_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Section Name",
            "description": "Section name containing this code."
          },
          "chapter_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Chapter Name",
            "description": "Chapter name containing this code."
          },
          "lst_footnotes_text": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Lst Footnotes Text",
            "description": "Footnotes text (when include_notes=True)."
          }
        },
        "type": "object",
        "required": [
          "hts_code",
          "description"
        ],
        "title": "APIRespSearchHtsItem",
        "description": "Single HTS search result item.",
        "examples": [
          {
            "chapter_name": "Iron and Steel",
            "description": "Flat-rolled products of iron or nonalloy steel, of a width of 600 mm or more, hot-rolled, not clad, plated or coated, In coils, not further worked than hot-rolled, Of a thickness exceeding 10 mm",
            "hts_code": "7208101500",
            "score": 0.95,
            "section_name": "Base Metals and Articles of Base Metal",
            "type": "hts"
          }
        ]
      },
      "APIRespSemanticContext": {
        "properties": {
          "query": {
            "type": "string",
            "title": "Query",
            "description": "Original semantic query string."
          },
          "notes": {
            "items": {
              "$ref": "#/components/schemas/APIRespSemanticNote"
            },
            "type": "array",
            "title": "Notes",
            "description": "Semantic matches returned from the notes corpus."
          },
          "rate_components": {
            "items": {
              "$ref": "#/components/schemas/APIRespSemanticRateComponent"
            },
            "type": "array",
            "title": "Rate Components",
            "description": "Semantic matches returned from duty component embeddings."
          },
          "hts": {
            "items": {
              "$ref": "#/components/schemas/APIRespSemanticScheduleHit"
            },
            "type": "array",
            "title": "Hts",
            "description": "Semantic matches returned from HTS schedule embeddings."
          }
        },
        "type": "object",
        "required": [
          "query"
        ],
        "title": "APIRespSemanticContext",
        "examples": [
          {
            "hts": [],
            "notes": [
              {
                "content": "Steel note content...",
                "note_id": "n_72_1",
                "score": 0.85
              }
            ],
            "query": "steel imports tariff",
            "rate_components": [
              {
                "component_text": "Free",
                "hts_code": "7208101500",
                "score": 0.82
              }
            ]
          }
        ]
      },
      "APIRespSemanticNote": {
        "properties": {
          "type": {
            "type": "string",
            "const": "note",
            "title": "Type",
            "description": "Semantic match category.",
            "default": "note"
          },
          "note_id": {
            "type": "integer",
            "title": "Note Id",
            "description": "Primary key identifier for the note record."
          },
          "doc_alias": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Doc Alias",
            "description": "Document alias containing the note."
          },
          "doc_type": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Doc Type",
            "description": "Document type containing the note."
          },
          "note_type": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Note Type",
            "description": "Classification of the note entry."
          },
          "note_number": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Note Number",
            "description": "Logical number or label for the note."
          },
          "note_title": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Note Title",
            "description": "Title associated with the note, when available."
          },
          "chapter_number": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Chapter Number",
            "description": "Numeric chapter reference for the note."
          },
          "section_number": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Section Number",
            "description": "Numeric section reference for the note."
          },
          "chunk_text": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Chunk Text",
            "description": "Specific chunk text that matched the query."
          },
          "score": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Score",
            "description": "Similarity score in the range 0-100."
          },
          "match_type": {
            "type": "string",
            "const": "semantic",
            "title": "Match Type",
            "description": "Indicates semantic retrieval.",
            "default": "semantic"
          },
          "context": {
            "$ref": "#/components/schemas/APIRespSemanticNoteContext",
            "description": "Expanded context for the note match."
          }
        },
        "type": "object",
        "required": [
          "note_id"
        ],
        "title": "APIRespSemanticNote"
      },
      "APIRespSemanticNoteContext": {
        "properties": {
          "full_text": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Full Text",
            "description": "Full reconstructed text for the matched note."
          },
          "lines": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Lines",
            "description": "Individual text lines belonging to the note."
          },
          "bullets": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Bullets",
            "description": "Bullet items extracted from the note."
          },
          "related_hts_codes": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Related Hts Codes",
            "description": "HTS codes explicitly referenced by the note."
          }
        },
        "type": "object",
        "title": "APIRespSemanticNoteContext"
      },
      "APIRespSemanticRateComponent": {
        "properties": {
          "type": {
            "type": "string",
            "const": "rate_component",
            "title": "Type",
            "description": "Semantic match category.",
            "default": "rate_component"
          },
          "rate_id": {
            "type": "integer",
            "title": "Rate Id",
            "description": "Primary key identifier for the duty component record."
          },
          "hts_code": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Hts Code",
            "description": "HTS code associated with the component."
          },
          "hts_description": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Hts Description",
            "description": "Headline description for the HTS entry."
          },
          "chunk_text": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Chunk Text",
            "description": "Specific chunk text that matched the query."
          },
          "score": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Score",
            "description": "Similarity score in the range 0-100."
          },
          "match_type": {
            "type": "string",
            "const": "semantic",
            "title": "Match Type",
            "description": "Indicates semantic retrieval.",
            "default": "semantic"
          },
          "component": {
            "$ref": "#/components/schemas/HtsRateComponent",
            "description": "Full structured representation of the duty component."
          }
        },
        "type": "object",
        "required": [
          "rate_id",
          "component"
        ],
        "title": "APIRespSemanticRateComponent"
      },
      "APIRespSemanticScheduleHit": {
        "properties": {
          "type": {
            "type": "string",
            "const": "hts",
            "title": "Type",
            "description": "Semantic match category.",
            "default": "hts"
          },
          "hts_code": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Hts Code",
            "description": "HTS code for the matched schedule entry."
          },
          "description": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Description",
            "description": "Schedule description text."
          },
          "chunk_text": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Chunk Text",
            "description": "Specific chunk text that matched the query."
          },
          "score": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Score",
            "description": "Similarity score in the range 0-100."
          },
          "match_type": {
            "type": "string",
            "const": "semantic",
            "title": "Match Type",
            "description": "Indicates semantic retrieval.",
            "default": "semantic"
          },
          "context": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Context",
            "description": "Alias for chunk_text maintained for backwards compatibility."
          }
        },
        "type": "object",
        "title": "APIRespSemanticScheduleHit"
      },
      "APIRespTreeNode": {
        "properties": {
          "note_unique_id": {
            "type": "string",
            "title": "Note Unique Id",
            "description": "Unique identifier for the note"
          },
          "note_sort_key": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Note Sort Key",
            "description": "Sortable key for ordering"
          },
          "note_type": {
            "type": "string",
            "title": "Note Type",
            "description": "Type: us_note, stat_note, note, etc."
          },
          "note_number": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Note Number",
            "description": "Display number: 1, a, i, etc."
          },
          "note_level": {
            "type": "integer",
            "title": "Note Level",
            "description": "Hierarchy depth (1 = root)"
          },
          "parent_note_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Parent Note Id",
            "description": "Parent's note_unique_id"
          },
          "has_content": {
            "type": "boolean",
            "title": "Has Content",
            "description": "Whether note has text content",
            "default": true
          },
          "content_line_count": {
            "type": "integer",
            "title": "Content Line Count",
            "description": "Number of lines (for height estimation)",
            "default": 0
          },
          "related_codes_count": {
            "type": "integer",
            "title": "Related Codes Count",
            "description": "Count of related HTS codes",
            "default": 0
          },
          "children_count": {
            "type": "integer",
            "title": "Children Count",
            "description": "Number of direct children",
            "default": 0
          },
          "children": {
            "items": {
              "$ref": "#/components/schemas/APIRespTreeNode"
            },
            "type": "array",
            "title": "Children",
            "description": "Nested child nodes"
          }
        },
        "type": "object",
        "required": [
          "note_unique_id",
          "note_type",
          "note_level"
        ],
        "title": "APIRespTreeNode",
        "description": "A single node in the notes navigation tree (lightweight, no content)."
      },
      "APIRespTreeSection": {
        "properties": {
          "section_label": {
            "type": "string",
            "title": "Section Label",
            "description": "Display label for the section"
          },
          "note_type": {
            "type": "string",
            "title": "Note Type",
            "description": "Note type for this section"
          },
          "note_count": {
            "type": "integer",
            "title": "Note Count",
            "description": "Number of notes in this section"
          },
          "first_note_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "First Note Id",
            "description": "First note's unique ID for jump-to"
          }
        },
        "type": "object",
        "required": [
          "section_label",
          "note_type",
          "note_count"
        ],
        "title": "APIRespTreeSection",
        "description": "A section grouping in the notes tree (e.g., 'U.S. Notes', 'Statistical Notes')."
      },
      "APIRespTreeSummary": {
        "properties": {
          "total_notes": {
            "type": "integer",
            "title": "Total Notes",
            "description": "Total number of notes"
          },
          "max_depth": {
            "type": "integer",
            "title": "Max Depth",
            "description": "Maximum hierarchy depth"
          },
          "total_related_codes": {
            "type": "integer",
            "title": "Total Related Codes",
            "description": "Total count of related HTS codes across all notes"
          }
        },
        "type": "object",
        "required": [
          "total_notes",
          "max_depth",
          "total_related_codes"
        ],
        "title": "APIRespTreeSummary",
        "description": "Summary statistics for the notes tree."
      },
      "APIResponse": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "True if request succeeded."
          },
          "meta": {
            "$ref": "#/components/schemas/APIMeta",
            "description": "Request/response metadata."
          },
          "data": {
            "anyOf": [
              {},
              {
                "type": "null"
              }
            ],
            "title": "Data",
            "description": "Payload of successful response."
          },
          "errors": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/APIRespError"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Errors",
            "description": "Errors on failure."
          }
        },
        "type": "object",
        "required": [
          "success",
          "meta"
        ],
        "title": "APIResponse",
        "description": "Standard API response envelope.\n\ndata: T or List[T] when success=True\nerrors: List[RespError] when success=False"
      },
      "APIResponse_APIRespAiClassifier_": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "True if request succeeded."
          },
          "meta": {
            "$ref": "#/components/schemas/APIMeta",
            "description": "Request/response metadata."
          },
          "data": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/APIRespAiClassifier"
              },
              {
                "type": "null"
              }
            ],
            "description": "Payload of successful response."
          },
          "errors": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/APIRespError"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Errors",
            "description": "Errors on failure."
          }
        },
        "type": "object",
        "required": [
          "success",
          "meta"
        ],
        "title": "APIResponse[APIRespAiClassifier]"
      },
      "APIResponse_APIRespAiExplain_": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "True if request succeeded."
          },
          "meta": {
            "$ref": "#/components/schemas/APIMeta",
            "description": "Request/response metadata."
          },
          "data": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/APIRespAiExplain"
              },
              {
                "type": "null"
              }
            ],
            "description": "Payload of successful response."
          },
          "errors": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/APIRespError"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Errors",
            "description": "Errors on failure."
          }
        },
        "type": "object",
        "required": [
          "success",
          "meta"
        ],
        "title": "APIResponse[APIRespAiExplain]"
      },
      "APIResponse_APIRespCompareRate_": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "True if request succeeded."
          },
          "meta": {
            "$ref": "#/components/schemas/APIMeta",
            "description": "Request/response metadata."
          },
          "data": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/APIRespCompareRate"
              },
              {
                "type": "null"
              }
            ],
            "description": "Payload of successful response."
          },
          "errors": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/APIRespError"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Errors",
            "description": "Errors on failure."
          }
        },
        "type": "object",
        "required": [
          "success",
          "meta"
        ],
        "title": "APIResponse[APIRespCompareRate]"
      },
      "APIResponse_APIRespCompareSources_": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "True if request succeeded."
          },
          "meta": {
            "$ref": "#/components/schemas/APIMeta",
            "description": "Request/response metadata."
          },
          "data": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/APIRespCompareSources"
              },
              {
                "type": "null"
              }
            ],
            "description": "Payload of successful response."
          },
          "errors": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/APIRespError"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Errors",
            "description": "Errors on failure."
          }
        },
        "type": "object",
        "required": [
          "success",
          "meta"
        ],
        "title": "APIResponse[APIRespCompareSources]"
      },
      "APIResponse_APIRespDataChapterContext_": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "True if request succeeded."
          },
          "meta": {
            "$ref": "#/components/schemas/APIMeta",
            "description": "Request/response metadata."
          },
          "data": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/APIRespDataChapterContext"
              },
              {
                "type": "null"
              }
            ],
            "description": "Payload of successful response."
          },
          "errors": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/APIRespError"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Errors",
            "description": "Errors on failure."
          }
        },
        "type": "object",
        "required": [
          "success",
          "meta"
        ],
        "title": "APIResponse[APIRespDataChapterContext]"
      },
      "APIResponse_APIRespDataHtsCodeContext_": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "True if request succeeded."
          },
          "meta": {
            "$ref": "#/components/schemas/APIMeta",
            "description": "Request/response metadata."
          },
          "data": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/APIRespDataHtsCodeContext"
              },
              {
                "type": "null"
              }
            ],
            "description": "Payload of successful response."
          },
          "errors": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/APIRespError"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Errors",
            "description": "Errors on failure."
          }
        },
        "type": "object",
        "required": [
          "success",
          "meta"
        ],
        "title": "APIResponse[APIRespDataHtsCodeContext]"
      },
      "APIResponse_APIRespDataHtsCodeHub_": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "True if request succeeded."
          },
          "meta": {
            "$ref": "#/components/schemas/APIMeta",
            "description": "Request/response metadata."
          },
          "data": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/APIRespDataHtsCodeHub"
              },
              {
                "type": "null"
              }
            ],
            "description": "Payload of successful response."
          },
          "errors": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/APIRespError"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Errors",
            "description": "Errors on failure."
          }
        },
        "type": "object",
        "required": [
          "success",
          "meta"
        ],
        "title": "APIResponse[APIRespDataHtsCodeHub]"
      },
      "APIResponse_APIRespDataSectionContext_": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "True if request succeeded."
          },
          "meta": {
            "$ref": "#/components/schemas/APIMeta",
            "description": "Request/response metadata."
          },
          "data": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/APIRespDataSectionContext"
              },
              {
                "type": "null"
              }
            ],
            "description": "Payload of successful response."
          },
          "errors": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/APIRespError"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Errors",
            "description": "Errors on failure."
          }
        },
        "type": "object",
        "required": [
          "success",
          "meta"
        ],
        "title": "APIResponse[APIRespDataSectionContext]"
      },
      "APIResponse_APIRespDocumentContent_": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "True if request succeeded."
          },
          "meta": {
            "$ref": "#/components/schemas/APIMeta",
            "description": "Request/response metadata."
          },
          "data": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/APIRespDocumentContent"
              },
              {
                "type": "null"
              }
            ],
            "description": "Payload of successful response."
          },
          "errors": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/APIRespError"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Errors",
            "description": "Errors on failure."
          }
        },
        "type": "object",
        "required": [
          "success",
          "meta"
        ],
        "title": "APIResponse[APIRespDocumentContent]"
      },
      "APIResponse_APIRespDocumentIndex_": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "True if request succeeded."
          },
          "meta": {
            "$ref": "#/components/schemas/APIMeta",
            "description": "Request/response metadata."
          },
          "data": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/APIRespDocumentIndex"
              },
              {
                "type": "null"
              }
            ],
            "description": "Payload of successful response."
          },
          "errors": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/APIRespError"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Errors",
            "description": "Errors on failure."
          }
        },
        "type": "object",
        "required": [
          "success",
          "meta"
        ],
        "title": "APIResponse[APIRespDocumentIndex]"
      },
      "APIResponse_APIRespHtsContextHub_": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "True if request succeeded."
          },
          "meta": {
            "$ref": "#/components/schemas/APIMeta",
            "description": "Request/response metadata."
          },
          "data": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/APIRespHtsContextHub"
              },
              {
                "type": "null"
              }
            ],
            "description": "Payload of successful response."
          },
          "errors": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/APIRespError"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Errors",
            "description": "Errors on failure."
          }
        },
        "type": "object",
        "required": [
          "success",
          "meta"
        ],
        "title": "APIResponse[APIRespHtsContextHub]"
      },
      "APIResponse_APIRespHtsDocsSearch_": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "True if request succeeded."
          },
          "meta": {
            "$ref": "#/components/schemas/APIMeta",
            "description": "Request/response metadata."
          },
          "data": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/APIRespHtsDocsSearch"
              },
              {
                "type": "null"
              }
            ],
            "description": "Payload of successful response."
          },
          "errors": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/APIRespError"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Errors",
            "description": "Errors on failure."
          }
        },
        "type": "object",
        "required": [
          "success",
          "meta"
        ],
        "title": "APIResponse[APIRespHtsDocsSearch]"
      },
      "APIResponse_APIRespMaterialCompositions_": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "True if request succeeded."
          },
          "meta": {
            "$ref": "#/components/schemas/APIMeta",
            "description": "Request/response metadata."
          },
          "data": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/APIRespMaterialCompositions"
              },
              {
                "type": "null"
              }
            ],
            "description": "Payload of successful response."
          },
          "errors": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/APIRespError"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Errors",
            "description": "Errors on failure."
          }
        },
        "type": "object",
        "required": [
          "success",
          "meta"
        ],
        "title": "APIResponse[APIRespMaterialCompositions]"
      },
      "APIResponse_APIRespMaterialForHtsCode_": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "True if request succeeded."
          },
          "meta": {
            "$ref": "#/components/schemas/APIMeta",
            "description": "Request/response metadata."
          },
          "data": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/APIRespMaterialForHtsCode"
              },
              {
                "type": "null"
              }
            ],
            "description": "Payload of successful response."
          },
          "errors": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/APIRespError"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Errors",
            "description": "Errors on failure."
          }
        },
        "type": "object",
        "required": [
          "success",
          "meta"
        ],
        "title": "APIResponse[APIRespMaterialForHtsCode]"
      },
      "APIResponse_APIRespNotesTreeData_": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "True if request succeeded."
          },
          "meta": {
            "$ref": "#/components/schemas/APIMeta",
            "description": "Request/response metadata."
          },
          "data": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/APIRespNotesTreeData"
              },
              {
                "type": "null"
              }
            ],
            "description": "Payload of successful response."
          },
          "errors": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/APIRespError"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Errors",
            "description": "Errors on failure."
          }
        },
        "type": "object",
        "required": [
          "success",
          "meta"
        ],
        "title": "APIResponse[APIRespNotesTreeData]"
      },
      "APIResponse_APIRespProgramsOverview_": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "True if request succeeded."
          },
          "meta": {
            "$ref": "#/components/schemas/APIMeta",
            "description": "Request/response metadata."
          },
          "data": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/APIRespProgramsOverview"
              },
              {
                "type": "null"
              }
            ],
            "description": "Payload of successful response."
          },
          "errors": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/APIRespError"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Errors",
            "description": "Errors on failure."
          }
        },
        "type": "object",
        "required": [
          "success",
          "meta"
        ],
        "title": "APIResponse[APIRespProgramsOverview]"
      },
      "APIResponse_APIRespSemanticContext_": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "True if request succeeded."
          },
          "meta": {
            "$ref": "#/components/schemas/APIMeta",
            "description": "Request/response metadata."
          },
          "data": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/APIRespSemanticContext"
              },
              {
                "type": "null"
              }
            ],
            "description": "Payload of successful response."
          },
          "errors": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/APIRespError"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Errors",
            "description": "Errors on failure."
          }
        },
        "type": "object",
        "required": [
          "success",
          "meta"
        ],
        "title": "APIResponse[APIRespSemanticContext]"
      },
      "APIResponse_CalcResponse_": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "True if request succeeded."
          },
          "meta": {
            "$ref": "#/components/schemas/APIMeta",
            "description": "Request/response metadata."
          },
          "data": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/CalcResponse"
              },
              {
                "type": "null"
              }
            ],
            "description": "Payload of successful response."
          },
          "errors": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/APIRespError"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Errors",
            "description": "Errors on failure."
          }
        },
        "type": "object",
        "required": [
          "success",
          "meta"
        ],
        "title": "APIResponse[CalcResponse]"
      },
      "APIResponse_ChatResponse_": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "True if request succeeded."
          },
          "meta": {
            "$ref": "#/components/schemas/APIMeta",
            "description": "Request/response metadata."
          },
          "data": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/ChatResponse"
              },
              {
                "type": "null"
              }
            ],
            "description": "Payload of successful response."
          },
          "errors": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/APIRespError"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Errors",
            "description": "Errors on failure."
          }
        },
        "type": "object",
        "required": [
          "success",
          "meta"
        ],
        "title": "APIResponse[ChatResponse]"
      },
      "APIResponse_CountryRecord_": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "True if request succeeded."
          },
          "meta": {
            "$ref": "#/components/schemas/APIMeta",
            "description": "Request/response metadata."
          },
          "data": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/CountryRecord"
              },
              {
                "type": "null"
              }
            ],
            "description": "Payload of successful response."
          },
          "errors": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/APIRespError"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Errors",
            "description": "Errors on failure."
          }
        },
        "type": "object",
        "required": [
          "success",
          "meta"
        ],
        "title": "APIResponse[CountryRecord]"
      },
      "APIResponse_GiqCapabilitiesResponse_": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "True if request succeeded."
          },
          "meta": {
            "$ref": "#/components/schemas/APIMeta",
            "description": "Request/response metadata."
          },
          "data": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/GiqCapabilitiesResponse"
              },
              {
                "type": "null"
              }
            ],
            "description": "Payload of successful response."
          },
          "errors": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/APIRespError"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Errors",
            "description": "Errors on failure."
          }
        },
        "type": "object",
        "required": [
          "success",
          "meta"
        ],
        "title": "APIResponse[GiqCapabilitiesResponse]"
      },
      "APIResponse_GiqFacetResponse_": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "True if request succeeded."
          },
          "meta": {
            "$ref": "#/components/schemas/APIMeta",
            "description": "Request/response metadata."
          },
          "data": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/GiqFacetResponse"
              },
              {
                "type": "null"
              }
            ],
            "description": "Payload of successful response."
          },
          "errors": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/APIRespError"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Errors",
            "description": "Errors on failure."
          }
        },
        "type": "object",
        "required": [
          "success",
          "meta"
        ],
        "title": "APIResponse[GiqFacetResponse]"
      },
      "APIResponse_GiqFiltersResponse_": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "True if request succeeded."
          },
          "meta": {
            "$ref": "#/components/schemas/APIMeta",
            "description": "Request/response metadata."
          },
          "data": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/GiqFiltersResponse"
              },
              {
                "type": "null"
              }
            ],
            "description": "Payload of successful response."
          },
          "errors": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/APIRespError"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Errors",
            "description": "Errors on failure."
          }
        },
        "type": "object",
        "required": [
          "success",
          "meta"
        ],
        "title": "APIResponse[GiqFiltersResponse]"
      },
      "APIResponse_GiqNaicsResponse_": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "True if request succeeded."
          },
          "meta": {
            "$ref": "#/components/schemas/APIMeta",
            "description": "Request/response metadata."
          },
          "data": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/GiqNaicsResponse"
              },
              {
                "type": "null"
              }
            ],
            "description": "Payload of successful response."
          },
          "errors": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/APIRespError"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Errors",
            "description": "Errors on failure."
          }
        },
        "type": "object",
        "required": [
          "success",
          "meta"
        ],
        "title": "APIResponse[GiqNaicsResponse]"
      },
      "APIResponse_GiqNewsListResponse_": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "True if request succeeded."
          },
          "meta": {
            "$ref": "#/components/schemas/APIMeta",
            "description": "Request/response metadata."
          },
          "data": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/GiqNewsListResponse"
              },
              {
                "type": "null"
              }
            ],
            "description": "Payload of successful response."
          },
          "errors": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/APIRespError"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Errors",
            "description": "Errors on failure."
          }
        },
        "type": "object",
        "required": [
          "success",
          "meta"
        ],
        "title": "APIResponse[GiqNewsListResponse]"
      },
      "APIResponse_GiqOrganizationListResponse_": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "True if request succeeded."
          },
          "meta": {
            "$ref": "#/components/schemas/APIMeta",
            "description": "Request/response metadata."
          },
          "data": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/GiqOrganizationListResponse"
              },
              {
                "type": "null"
              }
            ],
            "description": "Payload of successful response."
          },
          "errors": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/APIRespError"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Errors",
            "description": "Errors on failure."
          }
        },
        "type": "object",
        "required": [
          "success",
          "meta"
        ],
        "title": "APIResponse[GiqOrganizationListResponse]"
      },
      "APIResponse_ImportDataSummary_": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "True if request succeeded."
          },
          "meta": {
            "$ref": "#/components/schemas/APIMeta",
            "description": "Request/response metadata."
          },
          "data": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/ImportDataSummary"
              },
              {
                "type": "null"
              }
            ],
            "description": "Payload of successful response."
          },
          "errors": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/APIRespError"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Errors",
            "description": "Errors on failure."
          }
        },
        "type": "object",
        "required": [
          "success",
          "meta"
        ],
        "title": "APIResponse[ImportDataSummary]"
      },
      "APIResponse_List_ImportCountrySummary__": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "True if request succeeded."
          },
          "meta": {
            "$ref": "#/components/schemas/APIMeta",
            "description": "Request/response metadata."
          },
          "data": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/ImportCountrySummary"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Data",
            "description": "Payload of successful response."
          },
          "errors": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/APIRespError"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Errors",
            "description": "Errors on failure."
          }
        },
        "type": "object",
        "required": [
          "success",
          "meta"
        ],
        "title": "APIResponse[List[ImportCountrySummary]]"
      },
      "APIResponse_List_ImportHtsSummary__": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "True if request succeeded."
          },
          "meta": {
            "$ref": "#/components/schemas/APIMeta",
            "description": "Request/response metadata."
          },
          "data": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/ImportHtsSummary"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Data",
            "description": "Payload of successful response."
          },
          "errors": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/APIRespError"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Errors",
            "description": "Errors on failure."
          }
        },
        "type": "object",
        "required": [
          "success",
          "meta"
        ],
        "title": "APIResponse[List[ImportHtsSummary]]"
      },
      "APIResponse_List_int__": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "True if request succeeded."
          },
          "meta": {
            "$ref": "#/components/schemas/APIMeta",
            "description": "Request/response metadata."
          },
          "data": {
            "anyOf": [
              {
                "items": {
                  "type": "integer"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Data",
            "description": "Payload of successful response."
          },
          "errors": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/APIRespError"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Errors",
            "description": "Errors on failure."
          }
        },
        "type": "object",
        "required": [
          "success",
          "meta"
        ],
        "title": "APIResponse[List[int]]"
      },
      "APIResponse_List_str__": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "True if request succeeded."
          },
          "meta": {
            "$ref": "#/components/schemas/APIMeta",
            "description": "Request/response metadata."
          },
          "data": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Data",
            "description": "Payload of successful response."
          },
          "errors": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/APIRespError"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Errors",
            "description": "Errors on failure."
          }
        },
        "type": "object",
        "required": [
          "success",
          "meta"
        ],
        "title": "APIResponse[List[str]]"
      },
      "APIResponse_dict_str__APIRespHtsContextHub__": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "True if request succeeded."
          },
          "meta": {
            "$ref": "#/components/schemas/APIMeta",
            "description": "Request/response metadata."
          },
          "data": {
            "anyOf": [
              {
                "additionalProperties": {
                  "$ref": "#/components/schemas/APIRespHtsContextHub"
                },
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Data",
            "description": "Payload of successful response."
          },
          "errors": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/APIRespError"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Errors",
            "description": "Errors on failure."
          }
        },
        "type": "object",
        "required": [
          "success",
          "meta"
        ],
        "title": "APIResponse[dict[str, APIRespHtsContextHub]]"
      },
      "APIResponse_dict_str__CalcResponse__": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "True if request succeeded."
          },
          "meta": {
            "$ref": "#/components/schemas/APIMeta",
            "description": "Request/response metadata."
          },
          "data": {
            "anyOf": [
              {
                "additionalProperties": {
                  "$ref": "#/components/schemas/CalcResponse"
                },
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Data",
            "description": "Payload of successful response."
          },
          "errors": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/APIRespError"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Errors",
            "description": "Errors on failure."
          }
        },
        "type": "object",
        "required": [
          "success",
          "meta"
        ],
        "title": "APIResponse[dict[str, CalcResponse]]"
      },
      "APIResponse_dict_str__CountryRecord__": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "True if request succeeded."
          },
          "meta": {
            "$ref": "#/components/schemas/APIMeta",
            "description": "Request/response metadata."
          },
          "data": {
            "anyOf": [
              {
                "additionalProperties": {
                  "$ref": "#/components/schemas/CountryRecord"
                },
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Data",
            "description": "Payload of successful response."
          },
          "errors": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/APIRespError"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Errors",
            "description": "Errors on failure."
          }
        },
        "type": "object",
        "required": [
          "success",
          "meta"
        ],
        "title": "APIResponse[dict[str, CountryRecord]]"
      },
      "APIResponse_list_APIRespAutocompleteHtsItem__": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "True if request succeeded."
          },
          "meta": {
            "$ref": "#/components/schemas/APIMeta",
            "description": "Request/response metadata."
          },
          "data": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/APIRespAutocompleteHtsItem"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Data",
            "description": "Payload of successful response."
          },
          "errors": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/APIRespError"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Errors",
            "description": "Errors on failure."
          }
        },
        "type": "object",
        "required": [
          "success",
          "meta"
        ],
        "title": "APIResponse[list[APIRespAutocompleteHtsItem]]"
      },
      "APIResponse_list_APIRespChapterBySection__": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "True if request succeeded."
          },
          "meta": {
            "$ref": "#/components/schemas/APIMeta",
            "description": "Request/response metadata."
          },
          "data": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/APIRespChapterBySection"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Data",
            "description": "Payload of successful response."
          },
          "errors": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/APIRespError"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Errors",
            "description": "Errors on failure."
          }
        },
        "type": "object",
        "required": [
          "success",
          "meta"
        ],
        "title": "APIResponse[list[APIRespChapterBySection]]"
      },
      "APIResponse_list_APIRespDataHtsCodeHistory__": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "True if request succeeded."
          },
          "meta": {
            "$ref": "#/components/schemas/APIMeta",
            "description": "Request/response metadata."
          },
          "data": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/APIRespDataHtsCodeHistory"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Data",
            "description": "Payload of successful response."
          },
          "errors": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/APIRespError"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Errors",
            "description": "Errors on failure."
          }
        },
        "type": "object",
        "required": [
          "success",
          "meta"
        ],
        "title": "APIResponse[list[APIRespDataHtsCodeHistory]]"
      },
      "APIResponse_list_APIRespHtsSection__": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "True if request succeeded."
          },
          "meta": {
            "$ref": "#/components/schemas/APIMeta",
            "description": "Request/response metadata."
          },
          "data": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/APIRespHtsSection"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Data",
            "description": "Payload of successful response."
          },
          "errors": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/APIRespError"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Errors",
            "description": "Errors on failure."
          }
        },
        "type": "object",
        "required": [
          "success",
          "meta"
        ],
        "title": "APIResponse[list[APIRespHtsSection]]"
      },
      "APIResponse_list_APIRespMaterialTypeSummary__": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "True if request succeeded."
          },
          "meta": {
            "$ref": "#/components/schemas/APIMeta",
            "description": "Request/response metadata."
          },
          "data": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/APIRespMaterialTypeSummary"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Data",
            "description": "Payload of successful response."
          },
          "errors": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/APIRespError"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Errors",
            "description": "Errors on failure."
          }
        },
        "type": "object",
        "required": [
          "success",
          "meta"
        ],
        "title": "APIResponse[list[APIRespMaterialTypeSummary]]"
      },
      "APIResponse_list_APIRespNoteContent__": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "True if request succeeded."
          },
          "meta": {
            "$ref": "#/components/schemas/APIMeta",
            "description": "Request/response metadata."
          },
          "data": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/APIRespNoteContent"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Data",
            "description": "Payload of successful response."
          },
          "errors": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/APIRespError"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Errors",
            "description": "Errors on failure."
          }
        },
        "type": "object",
        "required": [
          "success",
          "meta"
        ],
        "title": "APIResponse[list[APIRespNoteContent]]"
      },
      "APIResponse_list_APIRespNoteItem__": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "True if request succeeded."
          },
          "meta": {
            "$ref": "#/components/schemas/APIMeta",
            "description": "Request/response metadata."
          },
          "data": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/APIRespNoteItem"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Data",
            "description": "Payload of successful response."
          },
          "errors": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/APIRespError"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Errors",
            "description": "Errors on failure."
          }
        },
        "type": "object",
        "required": [
          "success",
          "meta"
        ],
        "title": "APIResponse[list[APIRespNoteItem]]"
      },
      "APIResponse_list_APIRespProgramCountry__": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "True if request succeeded."
          },
          "meta": {
            "$ref": "#/components/schemas/APIMeta",
            "description": "Request/response metadata."
          },
          "data": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/APIRespProgramCountry"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Data",
            "description": "Payload of successful response."
          },
          "errors": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/APIRespError"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Errors",
            "description": "Errors on failure."
          }
        },
        "type": "object",
        "required": [
          "success",
          "meta"
        ],
        "title": "APIResponse[list[APIRespProgramCountry]]"
      },
      "APIResponse_list_APIRespSearchHtsItem__": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "True if request succeeded."
          },
          "meta": {
            "$ref": "#/components/schemas/APIMeta",
            "description": "Request/response metadata."
          },
          "data": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/APIRespSearchHtsItem"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Data",
            "description": "Payload of successful response."
          },
          "errors": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/APIRespError"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Errors",
            "description": "Errors on failure."
          }
        },
        "type": "object",
        "required": [
          "success",
          "meta"
        ],
        "title": "APIResponse[list[APIRespSearchHtsItem]]"
      },
      "APIResponse_list_CalcResponse__": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "True if request succeeded."
          },
          "meta": {
            "$ref": "#/components/schemas/APIMeta",
            "description": "Request/response metadata."
          },
          "data": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/CalcResponse"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Data",
            "description": "Payload of successful response."
          },
          "errors": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/APIRespError"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Errors",
            "description": "Errors on failure."
          }
        },
        "type": "object",
        "required": [
          "success",
          "meta"
        ],
        "title": "APIResponse[list[CalcResponse]]"
      },
      "APIResponse_list_CountryRecord__": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "True if request succeeded."
          },
          "meta": {
            "$ref": "#/components/schemas/APIMeta",
            "description": "Request/response metadata."
          },
          "data": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/CountryRecord"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Data",
            "description": "Payload of successful response."
          },
          "errors": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/APIRespError"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Errors",
            "description": "Errors on failure."
          }
        },
        "type": "object",
        "required": [
          "success",
          "meta"
        ],
        "title": "APIResponse[list[CountryRecord]]"
      },
      "APIResponse_list_HtsSourceVersion__": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "True if request succeeded."
          },
          "meta": {
            "$ref": "#/components/schemas/APIMeta",
            "description": "Request/response metadata."
          },
          "data": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/HtsSourceVersion"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Data",
            "description": "Payload of successful response."
          },
          "errors": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/APIRespError"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Errors",
            "description": "Errors on failure."
          }
        },
        "type": "object",
        "required": [
          "success",
          "meta"
        ],
        "title": "APIResponse[list[HtsSourceVersion]]"
      },
      "AdminAccountApiKeysResponse": {
        "properties": {
          "account_id": {
            "type": "string",
            "title": "Account Id",
            "description": "Stable billing anchor."
          },
          "items": {
            "items": {
              "$ref": "#/components/schemas/AdminApiKeyItem"
            },
            "type": "array",
            "title": "Items",
            "description": "API key metadata items, ordered by created_at descending."
          },
          "total": {
            "type": "integer",
            "title": "Total",
            "description": "Total number of keys returned."
          }
        },
        "type": "object",
        "required": [
          "account_id",
          "items",
          "total"
        ],
        "title": "AdminAccountApiKeysResponse",
        "description": "List of API keys for an account across all subscriptions."
      },
      "AdminAccountSubscriptionsResponse": {
        "properties": {
          "account_id": {
            "type": "string",
            "title": "Account Id",
            "description": "Stable billing anchor."
          },
          "subscriptions": {
            "items": {
              "$ref": "#/components/schemas/AdminSubscriptionItem"
            },
            "type": "array",
            "title": "Subscriptions",
            "description": "List of subscriptions, ordered by created_at descending."
          },
          "total": {
            "type": "integer",
            "title": "Total",
            "description": "Total number of subscriptions returned."
          }
        },
        "type": "object",
        "required": [
          "account_id",
          "subscriptions",
          "total"
        ],
        "title": "AdminAccountSubscriptionsResponse",
        "description": "List of all subscriptions (current and historical) for an account."
      },
      "AdminApiKeyCreateRequest": {
        "properties": {
          "subscription_id": {
            "type": "integer",
            "title": "Subscription Id",
            "description": "TRD subscription ID to associate the key with."
          },
          "account_id": {
            "type": "string",
            "title": "Account Id",
            "description": "Stable billing anchor (primary ownership). Required."
          },
          "key_type": {
            "type": "string",
            "enum": [
              "ui_proxy",
              "external",
              "internal_admin"
            ],
            "title": "Key Type",
            "description": "Key type: 'ui_proxy' (auto-generated for Neo UI) or 'external' (customer-managed)."
          },
          "key_name": {
            "type": "string",
            "title": "Key Name",
            "description": "Human-readable name for the API key."
          },
          "description": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Description",
            "description": "Optional description of the key's intended use."
          },
          "environment": {
            "anyOf": [
              {
                "type": "string",
                "enum": [
                  "dev",
                  "staging",
                  "production"
                ]
              },
              {
                "type": "null"
              }
            ],
            "title": "Environment",
            "description": "Deployment environment tag."
          },
          "created_by_user_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Created By User Id",
            "description": "ID of the user who created the key."
          },
          "created_by_user_email": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Created By User Email",
            "description": "Email of the user who created the key."
          },
          "expires_in_days": {
            "anyOf": [
              {
                "type": "integer",
                "minimum": 1.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Expires In Days",
            "description": "Key expiry in days from creation. null = no expiry."
          }
        },
        "type": "object",
        "required": [
          "subscription_id",
          "account_id",
          "key_type",
          "key_name"
        ],
        "title": "AdminApiKeyCreateRequest",
        "description": "Request to create a new API key.\n\nUBS v2: account_id is REQUIRED as the primary ownership anchor.\nsubscription_id is still required for backward compatibility but account_id\ntakes precedence for billing attribution."
      },
      "AdminApiKeyCreateResponse": {
        "properties": {
          "key_id": {
            "type": "integer",
            "title": "Key Id",
            "description": "TRD internal key ID."
          },
          "key_prefix": {
            "type": "string",
            "title": "Key Prefix",
            "description": "Key prefix for identification (e.g. 'trd_abc')."
          },
          "key_type": {
            "type": "string",
            "enum": [
              "ui_proxy",
              "external",
              "internal_admin"
            ],
            "title": "Key Type",
            "description": "The type of key that was created."
          },
          "subscription_id": {
            "type": "integer",
            "title": "Subscription Id",
            "description": "TRD subscription ID the key is associated with."
          },
          "account_id": {
            "type": "string",
            "title": "Account Id",
            "description": "Stable billing anchor (account ownership)."
          },
          "api_key": {
            "type": "string",
            "title": "Api Key",
            "description": "Full API key value. Only returned at creation time  store securely."
          }
        },
        "type": "object",
        "required": [
          "key_id",
          "key_prefix",
          "key_type",
          "subscription_id",
          "account_id",
          "api_key"
        ],
        "title": "AdminApiKeyCreateResponse",
        "description": "Response after creating a new API key. The full api_key is only returned once."
      },
      "AdminApiKeyItem": {
        "properties": {
          "key_id": {
            "type": "integer",
            "title": "Key Id",
            "description": "TRD internal key ID."
          },
          "key_prefix": {
            "type": "string",
            "title": "Key Prefix",
            "description": "Key prefix for identification (e.g. 'trd_abc')."
          },
          "key_name": {
            "type": "string",
            "title": "Key Name",
            "description": "Human-readable key name."
          },
          "description": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Description",
            "description": "Optional description of the key's intended use."
          },
          "key_type": {
            "type": "string",
            "enum": [
              "ui_proxy",
              "external",
              "internal_admin"
            ],
            "title": "Key Type",
            "description": "Key type: 'ui_proxy', 'external', or 'internal_admin'."
          },
          "environment": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Environment",
            "description": "Deployment environment tag (dev, staging, production)."
          },
          "account_id": {
            "type": "string",
            "title": "Account Id",
            "description": "Stable billing anchor (primary ownership)."
          },
          "subscription_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Subscription Id",
            "description": "TRD subscription ID (informational in UBS v2)."
          },
          "is_active": {
            "type": "boolean",
            "title": "Is Active",
            "description": "Whether the key is currently active (not revoked)."
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At",
            "description": "When the key was created (ISO 8601)."
          },
          "expires_at": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Expires At",
            "description": "When the key expires, or null if no expiry."
          },
          "last_used_at": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Last Used At",
            "description": "Last time the key was used, or null if never used."
          },
          "request_count": {
            "type": "integer",
            "title": "Request Count",
            "description": "Total number of requests made with this key."
          },
          "created_by_user_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Created By User Id",
            "description": "ID of the user who created the key."
          },
          "created_by_user_email": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Created By User Email",
            "description": "Email of the user who created the key."
          }
        },
        "type": "object",
        "required": [
          "key_id",
          "key_prefix",
          "key_name",
          "key_type",
          "account_id",
          "is_active",
          "created_at",
          "request_count"
        ],
        "title": "AdminApiKeyItem",
        "description": "API key metadata for display (excludes sensitive hash and full key value).\n\nUBS v2: account_id is the primary ownership anchor."
      },
      "AdminApiKeyRevokeRequest": {
        "properties": {
          "key_id": {
            "type": "integer",
            "title": "Key Id",
            "description": "ID of the key to revoke."
          },
          "reason": {
            "type": "string",
            "title": "Reason",
            "description": "Reason for revocation (stored for audit trail)."
          },
          "revoked_by_user_id": {
            "type": "integer",
            "title": "Revoked By User Id",
            "description": "ID of the user authorizing the revocation."
          }
        },
        "type": "object",
        "required": [
          "key_id",
          "reason",
          "revoked_by_user_id"
        ],
        "title": "AdminApiKeyRevokeRequest",
        "description": "Request to revoke an existing API key."
      },
      "AdminApiKeyRevokeResponse": {
        "properties": {
          "status": {
            "type": "string",
            "const": "revoked",
            "title": "Status",
            "description": "Always 'revoked' on success."
          },
          "key_id": {
            "type": "integer",
            "title": "Key Id",
            "description": "ID of the revoked key."
          }
        },
        "type": "object",
        "required": [
          "status",
          "key_id"
        ],
        "title": "AdminApiKeyRevokeResponse",
        "description": "Response after revoking an API key."
      },
      "AdminApiKeyUpdateResult": {
        "properties": {
          "key_id": {
            "type": "integer",
            "title": "Key Id",
            "description": "ID of the key that was processed."
          },
          "status": {
            "type": "string",
            "enum": [
              "updated",
              "not_found",
              "already_correct"
            ],
            "title": "Status",
            "description": "Outcome: 'updated', 'not_found', or 'already_correct'."
          },
          "old_account_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Old Account Id",
            "description": "Previous account_id on the key."
          },
          "new_account_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "New Account Id",
            "description": "New account_id set on the key."
          }
        },
        "type": "object",
        "required": [
          "key_id",
          "status"
        ],
        "title": "AdminApiKeyUpdateResult",
        "description": "Result for a single key's account_id update."
      },
      "AdminApiKeysListResponse": {
        "properties": {
          "subscription_id": {
            "type": "integer",
            "title": "Subscription Id",
            "description": "TRD subscription ID the keys belong to."
          },
          "items": {
            "items": {
              "$ref": "#/components/schemas/AdminApiKeyItem"
            },
            "type": "array",
            "title": "Items",
            "description": "List of API key metadata items."
          },
          "total": {
            "type": "integer",
            "title": "Total",
            "description": "Total number of keys returned."
          }
        },
        "type": "object",
        "required": [
          "subscription_id",
          "items",
          "total"
        ],
        "title": "AdminApiKeysListResponse",
        "description": "Paginated list of API keys for a subscription."
      },
      "AdminApiKeysUpdateAccountRequest": {
        "properties": {
          "key_ids": {
            "items": {
              "type": "integer"
            },
            "type": "array",
            "minItems": 1,
            "title": "Key Ids",
            "description": "List of key IDs to update"
          },
          "account_id": {
            "type": "string",
            "title": "Account Id",
            "description": "New account_id to set on the keys"
          },
          "correction_reason": {
            "type": "string",
            "title": "Correction Reason",
            "description": "Reason for the correction (for audit trail)"
          },
          "corrected_by_user_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Corrected By User Id",
            "description": "User ID who authorized the correction"
          }
        },
        "type": "object",
        "required": [
          "key_ids",
          "account_id",
          "correction_reason"
        ],
        "title": "AdminApiKeysUpdateAccountRequest",
        "description": "Request to update account_id on existing API keys.\n\nThis endpoint is used when keys were created with incorrect/placeholder\naccount_id and need to be corrected to point to the correct account.\n\nUse case: Keys were created before account_id was known (e.g., placeholder\nlike \"__neo_pending_xxx__\") and now need to be updated with real account_id."
      },
      "AdminApiKeysUpdateAccountResponse": {
        "properties": {
          "total_requested": {
            "type": "integer",
            "title": "Total Requested",
            "description": "Number of key IDs that were submitted."
          },
          "total_updated": {
            "type": "integer",
            "title": "Total Updated",
            "description": "Number of keys successfully updated."
          },
          "total_not_found": {
            "type": "integer",
            "title": "Total Not Found",
            "description": "Number of key IDs that were not found."
          },
          "total_already_correct": {
            "type": "integer",
            "title": "Total Already Correct",
            "description": "Number of keys that already had the correct account_id."
          },
          "results": {
            "items": {
              "$ref": "#/components/schemas/AdminApiKeyUpdateResult"
            },
            "type": "array",
            "title": "Results",
            "description": "Per-key update results."
          },
          "correction_reason": {
            "type": "string",
            "title": "Correction Reason",
            "description": "The reason provided for the correction."
          }
        },
        "type": "object",
        "required": [
          "total_requested",
          "total_updated",
          "total_not_found",
          "total_already_correct",
          "results",
          "correction_reason"
        ],
        "title": "AdminApiKeysUpdateAccountResponse",
        "description": "Response from batch API key account_id correction."
      },
      "AdminCurrentEntitlementResponse": {
        "properties": {
          "account_id": {
            "type": "string",
            "title": "Account Id",
            "description": "Stable billing anchor."
          },
          "subscription_id": {
            "type": "integer",
            "title": "Subscription Id",
            "description": "TRD internal subscription ID."
          },
          "neo_subscription_id": {
            "type": "string",
            "title": "Neo Subscription Id",
            "description": "Neo's subscriptions.id."
          },
          "entitlement_snapshot_id": {
            "type": "integer",
            "title": "Entitlement Snapshot Id",
            "description": "ID of the entitlement snapshot."
          },
          "tier_code": {
            "type": "string",
            "title": "Tier Code",
            "description": "Plan tier code (e.g. 'starter', 'professional')."
          },
          "period_start": {
            "type": "string",
            "format": "date-time",
            "title": "Period Start",
            "description": "Start of the entitlement billing period."
          },
          "period_end": {
            "type": "string",
            "format": "date-time",
            "title": "Period End",
            "description": "End of the entitlement billing period."
          },
          "included_credits": {
            "type": "integer",
            "title": "Included Credits",
            "description": "Credits included in the plan per period. -1 = unlimited."
          },
          "overage_cap_credits": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Overage Cap Credits",
            "description": "Overage cap: null=unlimited, 0=hard stop, N=cap at included+N."
          },
          "overage_allowed": {
            "type": "boolean",
            "title": "Overage Allowed",
            "description": "Deprecated. Legacy overage flag."
          },
          "hard_stop_enabled": {
            "type": "boolean",
            "title": "Hard Stop Enabled",
            "description": "Deprecated. Legacy hard-stop flag."
          },
          "rollover_enabled": {
            "type": "boolean",
            "title": "Rollover Enabled",
            "description": "Whether unused credits roll over to the next period."
          },
          "effective_from": {
            "type": "string",
            "format": "date-time",
            "title": "Effective From",
            "description": "When this entitlement took effect."
          },
          "effective_to": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Effective To",
            "description": "When this entitlement expires. null = still active."
          }
        },
        "type": "object",
        "required": [
          "account_id",
          "subscription_id",
          "neo_subscription_id",
          "entitlement_snapshot_id",
          "tier_code",
          "period_start",
          "period_end",
          "included_credits",
          "overage_allowed",
          "hard_stop_enabled",
          "rollover_enabled",
          "effective_from"
        ],
        "title": "AdminCurrentEntitlementResponse",
        "description": "Current active entitlement snapshot for an account.\n\nReturns the most recent effective entitlement, including plan tier,\ncredit limits, and overage configuration."
      },
      "AdminDeactivateAccountRequest": {
        "properties": {
          "reason": {
            "type": "string",
            "title": "Reason",
            "description": "Reason for deactivation (stored on each revoked key)."
          },
          "revoked_by_user_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Revoked By User Id",
            "description": "ID of the user authorizing the deactivation."
          }
        },
        "type": "object",
        "required": [
          "reason"
        ],
        "title": "AdminDeactivateAccountRequest",
        "description": "Request to deactivate all subscriptions for an account and cascade-revoke keys."
      },
      "AdminDeactivateAccountResponse": {
        "properties": {
          "account_id": {
            "type": "string",
            "title": "Account Id",
            "description": "Stable billing anchor."
          },
          "subscriptions": {
            "items": {
              "$ref": "#/components/schemas/AdminDeactivateAccountSubscriptionResult"
            },
            "type": "array",
            "title": "Subscriptions",
            "description": "Per-subscription deactivation results."
          },
          "total_subscriptions_affected": {
            "type": "integer",
            "title": "Total Subscriptions Affected",
            "description": "Number of subscriptions deactivated."
          },
          "total_keys_revoked": {
            "type": "integer",
            "title": "Total Keys Revoked",
            "description": "Total number of keys revoked across all subscriptions."
          }
        },
        "type": "object",
        "required": [
          "account_id",
          "subscriptions",
          "total_subscriptions_affected",
          "total_keys_revoked"
        ],
        "title": "AdminDeactivateAccountResponse",
        "description": "Response after deactivating all subscriptions for an account."
      },
      "AdminDeactivateAccountSubscriptionResult": {
        "properties": {
          "subscription_id": {
            "type": "integer",
            "title": "Subscription Id",
            "description": "TRD internal subscription ID."
          },
          "neo_subscription_id": {
            "type": "string",
            "title": "Neo Subscription Id",
            "description": "Neo's subscriptions.id."
          },
          "previous_status": {
            "type": "string",
            "title": "Previous Status",
            "description": "Status before deactivation."
          },
          "new_status": {
            "type": "string",
            "title": "New Status",
            "description": "Status after deactivation."
          },
          "revoked_keys": {
            "items": {
              "$ref": "#/components/schemas/AdminRevokedKeyItem"
            },
            "type": "array",
            "title": "Revoked Keys",
            "description": "Keys that were revoked for this subscription."
          }
        },
        "type": "object",
        "required": [
          "subscription_id",
          "neo_subscription_id",
          "previous_status",
          "new_status",
          "revoked_keys"
        ],
        "title": "AdminDeactivateAccountSubscriptionResult",
        "description": "Result for a single subscription within an account deactivation."
      },
      "AdminDeactivateSubscriptionRequest": {
        "properties": {
          "status": {
            "type": "string",
            "enum": [
              "suspended",
              "cancelled"
            ],
            "title": "Status",
            "description": "Target status: 'suspended' (may reactivate) or 'cancelled' (permanent)."
          },
          "reason": {
            "type": "string",
            "title": "Reason",
            "description": "Reason for deactivation (stored on each revoked key)."
          },
          "revoked_by_user_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Revoked By User Id",
            "description": "ID of the user authorizing the deactivation."
          }
        },
        "type": "object",
        "required": [
          "status",
          "reason"
        ],
        "title": "AdminDeactivateSubscriptionRequest",
        "description": "Request to deactivate a subscription and cascade-revoke its non-internal keys."
      },
      "AdminDeactivateSubscriptionResponse": {
        "properties": {
          "subscription_id": {
            "type": "integer",
            "title": "Subscription Id",
            "description": "TRD internal subscription ID."
          },
          "account_id": {
            "type": "string",
            "title": "Account Id",
            "description": "Stable billing anchor."
          },
          "previous_status": {
            "type": "string",
            "title": "Previous Status",
            "description": "Status before deactivation."
          },
          "new_status": {
            "type": "string",
            "title": "New Status",
            "description": "Status after deactivation."
          },
          "revoked_keys": {
            "items": {
              "$ref": "#/components/schemas/AdminRevokedKeyItem"
            },
            "type": "array",
            "title": "Revoked Keys",
            "description": "Keys that were revoked as part of the cascade."
          },
          "total_keys_revoked": {
            "type": "integer",
            "title": "Total Keys Revoked",
            "description": "Total number of keys revoked."
          }
        },
        "type": "object",
        "required": [
          "subscription_id",
          "account_id",
          "previous_status",
          "new_status",
          "revoked_keys",
          "total_keys_revoked"
        ],
        "title": "AdminDeactivateSubscriptionResponse",
        "description": "Response after deactivating a subscription with cascade key revocation."
      },
      "AdminEntitlementCorrectRequest": {
        "properties": {
          "neo_ref_type": {
            "type": "string",
            "const": "neo_subscription",
            "title": "Neo Ref Type",
            "description": "Type of Neo entity reference. Currently only 'neo_subscription'.",
            "default": "neo_subscription"
          },
          "neo_subscription_id": {
            "type": "string",
            "title": "Neo Subscription Id",
            "description": "Neo's subscriptions.id to correct"
          },
          "snapshot_id_to_correct": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Snapshot Id To Correct",
            "description": "Specific snapshot ID to correct. If not provided, corrects current effective snapshot."
          },
          "tier_code": {
            "type": "string",
            "title": "Tier Code",
            "description": "Corrected tier code"
          },
          "period_start": {
            "type": "string",
            "format": "date-time",
            "title": "Period Start",
            "description": "Corrected period start"
          },
          "period_end": {
            "type": "string",
            "format": "date-time",
            "title": "Period End",
            "description": "Corrected period end"
          },
          "included_credits": {
            "type": "integer",
            "minimum": -1.0,
            "title": "Included Credits",
            "description": "Corrected included credits (-1 = unlimited)"
          },
          "overage_cap_credits": {
            "anyOf": [
              {
                "type": "integer",
                "minimum": -1.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Overage Cap Credits",
            "description": "null or -1=unlimited, 0=hard stop at included, N=cap at included+N. (-1 normalized to null)"
          },
          "overage_allowed": {
            "type": "boolean",
            "title": "Overage Allowed",
            "description": "Deprecated. Legacy overage flag.",
            "default": true
          },
          "hard_stop_enabled": {
            "type": "boolean",
            "title": "Hard Stop Enabled",
            "description": "Deprecated. Legacy hard-stop flag.",
            "default": false
          },
          "rollover_enabled": {
            "type": "boolean",
            "title": "Rollover Enabled",
            "description": "Whether unused credits roll over.",
            "default": false
          },
          "ui_policy_json": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Ui Policy Json",
            "description": "Corrected UI policy configuration JSON."
          },
          "direct_policy_json": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Direct Policy Json",
            "description": "Corrected direct API policy configuration JSON."
          },
          "correction_reason": {
            "type": "string",
            "title": "Correction Reason",
            "description": "Reason for the correction (for audit trail)"
          },
          "corrected_by_user_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Corrected By User Id",
            "description": "User ID who authorized the correction"
          },
          "corrected_by_user_email": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Corrected By User Email",
            "description": "User email who authorized the correction"
          },
          "effective_from": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Effective From",
            "description": "When the correction takes effect. Defaults to now."
          }
        },
        "type": "object",
        "required": [
          "neo_subscription_id",
          "tier_code",
          "period_start",
          "period_end",
          "included_credits",
          "correction_reason"
        ],
        "title": "AdminEntitlementCorrectRequest",
        "description": "Request to correct an entitlement snapshot.\n\nThis endpoint is used when an entitlement was created with incorrect settings\nand needs to be corrected. It will:\n1. Close the current effective entitlement (set effective_to = now)\n2. Create a new corrected entitlement snapshot\n\nThe old snapshot is preserved for audit trail with a reference to the correction.\n\nUse case: Subscription was initially mapped to wrong tier/credits and needs\na one-time fix that propagates correct settings going forward."
      },
      "AdminEntitlementCorrectResponse": {
        "properties": {
          "status": {
            "type": "string",
            "enum": [
              "corrected",
              "no_snapshot_found"
            ],
            "title": "Status",
            "description": "'corrected' if snapshot was fixed, 'no_snapshot_found' if nothing to correct."
          },
          "subscription_id": {
            "type": "integer",
            "title": "Subscription Id",
            "description": "TRD internal subscription ID."
          },
          "account_id": {
            "type": "string",
            "title": "Account Id",
            "description": "Stable billing anchor."
          },
          "old_snapshot_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Old Snapshot Id",
            "description": "ID of the snapshot that was closed/replaced."
          },
          "old_tier_code": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Old Tier Code",
            "description": "Tier code of the old snapshot."
          },
          "old_included_credits": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Old Included Credits",
            "description": "Included credits of the old snapshot."
          },
          "old_effective_to": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Old Effective To",
            "description": "When the old snapshot was closed (effective_to set)."
          },
          "new_snapshot_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "New Snapshot Id",
            "description": "ID of the newly created corrected snapshot."
          },
          "new_source_event_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "New Source Event Id",
            "description": "Auto-generated source_event_id for the correction snapshot."
          },
          "correction_reason": {
            "type": "string",
            "title": "Correction Reason",
            "description": "The reason provided for the correction."
          }
        },
        "type": "object",
        "required": [
          "status",
          "subscription_id",
          "account_id",
          "correction_reason"
        ],
        "title": "AdminEntitlementCorrectResponse",
        "description": "Response from entitlement correction."
      },
      "AdminEntitlementSyncRequest": {
        "properties": {
          "source_event_id": {
            "type": "string",
            "title": "Source Event Id",
            "description": "Idempotency key. Duplicate source_event_id returns 'noop'."
          },
          "neo_ref_type": {
            "type": "string",
            "const": "neo_subscription",
            "title": "Neo Ref Type",
            "description": "Type of Neo entity reference.",
            "default": "neo_subscription"
          },
          "neo_subscription_id": {
            "type": "string",
            "title": "Neo Subscription Id",
            "description": "Neo's subscriptions.id (may change on plan upgrade)."
          },
          "account_id": {
            "type": "string",
            "title": "Account Id",
            "description": "Stable billing anchor (Neo billing_accounts.id)."
          },
          "tier_code": {
            "type": "string",
            "title": "Tier Code",
            "description": "Plan tier code (e.g. 'starter', 'professional', 'enterprise')."
          },
          "period_start": {
            "type": "string",
            "format": "date-time",
            "title": "Period Start",
            "description": "Start of the entitlement billing period (ISO 8601)."
          },
          "period_end": {
            "type": "string",
            "format": "date-time",
            "title": "Period End",
            "description": "End of the entitlement billing period (ISO 8601)."
          },
          "included_credits": {
            "type": "integer",
            "minimum": -1.0,
            "title": "Included Credits",
            "description": "Credits included in the plan per period. -1 = unlimited."
          },
          "overage_cap_credits": {
            "anyOf": [
              {
                "type": "integer",
                "minimum": -1.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Overage Cap Credits",
            "description": "Overage cap: null or -1=unlimited, 0=hard stop at included_credits, N=cap at included+N. (-1 normalized to null)"
          },
          "overage_allowed": {
            "type": "boolean",
            "title": "Overage Allowed",
            "description": "Deprecated. Whether overage is allowed (use overage_cap_credits instead).",
            "default": true
          },
          "hard_stop_enabled": {
            "type": "boolean",
            "title": "Hard Stop Enabled",
            "description": "Deprecated. Whether hard stop is enabled (use overage_cap_credits=0 instead).",
            "default": false
          },
          "rollover_enabled": {
            "type": "boolean",
            "title": "Rollover Enabled",
            "description": "Whether unused credits roll over to the next period.",
            "default": false
          },
          "ui_policy_json": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Ui Policy Json",
            "description": "UI policy configuration JSON (opaque to TRD)."
          },
          "direct_policy_json": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Direct Policy Json",
            "description": "Direct API policy configuration JSON (opaque to TRD)."
          },
          "effective_from": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Effective From",
            "description": "When this entitlement takes effect. Defaults to now."
          },
          "effective_to": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Effective To",
            "description": "When this entitlement expires. null = no expiry."
          }
        },
        "type": "object",
        "required": [
          "source_event_id",
          "neo_subscription_id",
          "account_id",
          "tier_code",
          "period_start",
          "period_end",
          "included_credits"
        ],
        "title": "AdminEntitlementSyncRequest",
        "description": "Request to sync an entitlement snapshot.\n\nUBS v2 Naming Convention:\n- neo_subscription_id: Neo's subscriptions.id (may change on upgrade)\n- neo_ref_type: Type of Neo entity (default: neo_subscription)\n- account_id: Neo's billing_accounts.id (stable anchor)\n\noverage_cap_credits replaces legacy overage_allowed + hard_stop_enabled."
      },
      "AdminEntitlementSyncResponse": {
        "properties": {
          "status": {
            "type": "string",
            "enum": [
              "applied",
              "noop"
            ],
            "title": "Status",
            "description": "'applied' if new snapshot created, 'noop' if source_event_id already exists."
          },
          "source_event_id": {
            "type": "string",
            "title": "Source Event Id",
            "description": "The idempotency key that was provided."
          },
          "subscription_id": {
            "type": "integer",
            "title": "Subscription Id",
            "description": "TRD internal subscription ID."
          },
          "entitlement_snapshot_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Entitlement Snapshot Id",
            "description": "ID of the created or existing entitlement snapshot."
          }
        },
        "type": "object",
        "required": [
          "status",
          "source_event_id",
          "subscription_id"
        ],
        "title": "AdminEntitlementSyncResponse",
        "description": "Response after syncing an entitlement snapshot."
      },
      "AdminProvisionSubscriptionRequest": {
        "properties": {
          "neo_ref_type": {
            "type": "string",
            "const": "neo_subscription",
            "title": "Neo Ref Type",
            "description": "Type of Neo entity reference. Currently only 'neo_subscription'.",
            "default": "neo_subscription"
          },
          "neo_subscription_id": {
            "type": "string",
            "title": "Neo Subscription Id",
            "description": "Neo's subscriptions.id (may change on plan upgrade)."
          },
          "account_id": {
            "type": "string",
            "title": "Account Id",
            "description": "Stable billing anchor (Neo billing_accounts.id). Survives subscription upgrades."
          },
          "stripe_customer_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Stripe Customer Id",
            "description": "Stripe customer ID for metered overage billing (cus_xxx)."
          },
          "display_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Display Name",
            "description": "Human-readable subscription name."
          },
          "source_event_id": {
            "type": "string",
            "title": "Source Event Id",
            "description": "Idempotency key for entitlement. Duplicate source_event_id skips entitlement creation."
          },
          "tier_code": {
            "type": "string",
            "title": "Tier Code",
            "description": "Plan tier code (e.g. 'starter', 'professional', 'enterprise')."
          },
          "period_start": {
            "type": "string",
            "format": "date-time",
            "title": "Period Start",
            "description": "Start of the entitlement billing period (ISO 8601)."
          },
          "period_end": {
            "type": "string",
            "format": "date-time",
            "title": "Period End",
            "description": "End of the entitlement billing period (ISO 8601)."
          },
          "included_credits": {
            "type": "integer",
            "minimum": -1.0,
            "title": "Included Credits",
            "description": "Credits included in the plan per period. -1 = unlimited."
          },
          "overage_cap_credits": {
            "anyOf": [
              {
                "type": "integer",
                "minimum": -1.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Overage Cap Credits",
            "description": "Overage cap: null or -1=unlimited, 0=hard stop at included_credits, N=cap at included+N. (-1 normalized to null)"
          },
          "overage_allowed": {
            "type": "boolean",
            "title": "Overage Allowed",
            "description": "Deprecated. Legacy overage flag (use overage_cap_credits instead).",
            "default": true
          },
          "hard_stop_enabled": {
            "type": "boolean",
            "title": "Hard Stop Enabled",
            "description": "Deprecated. Legacy hard-stop flag (use overage_cap_credits=0 instead).",
            "default": false
          },
          "rollover_enabled": {
            "type": "boolean",
            "title": "Rollover Enabled",
            "description": "Whether unused credits roll over to the next period.",
            "default": false
          },
          "ui_policy_json": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Ui Policy Json",
            "description": "UI policy configuration JSON (opaque to TRD)."
          },
          "direct_policy_json": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Direct Policy Json",
            "description": "Direct API policy configuration JSON (opaque to TRD)."
          },
          "effective_from": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Effective From",
            "description": "When the entitlement takes effect. Defaults to now."
          },
          "effective_to": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Effective To",
            "description": "When the entitlement expires. null = no expiry."
          },
          "key_name": {
            "type": "string",
            "title": "Key Name",
            "description": "Human-readable name for the UI proxy key.",
            "default": "Neo UI Proxy"
          },
          "key_description": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Key Description",
            "description": "Optional description of the key's intended use."
          },
          "key_environment": {
            "anyOf": [
              {
                "type": "string",
                "enum": [
                  "dev",
                  "staging",
                  "production"
                ]
              },
              {
                "type": "null"
              }
            ],
            "title": "Key Environment",
            "description": "Deployment environment tag for the key."
          },
          "created_by_user_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Created By User Id",
            "description": "ID of the user who initiated the provisioning."
          },
          "created_by_user_email": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Created By User Email",
            "description": "Email of the user who initiated the provisioning."
          }
        },
        "type": "object",
        "required": [
          "neo_subscription_id",
          "account_id",
          "source_event_id",
          "tier_code",
          "period_start",
          "period_end",
          "included_credits"
        ],
        "title": "AdminProvisionSubscriptionRequest",
        "description": "Request to provision a new subscription with entitlement and UI proxy key.\n\nThis is a combined endpoint for initial subscription setup. It:\n1. Creates/updates the subscription (idempotent by neo_subscription_id)\n2. Creates the entitlement snapshot (idempotent by source_event_id)\n3. Creates a ui_proxy API key if none exists\n\nThe full API key is only returned on first creation. On retry (if key already\nexists), only the key_prefix is returned  Neo must persist the key on first success."
      },
      "AdminProvisionSubscriptionResponse": {
        "properties": {
          "subscription_id": {
            "type": "integer",
            "title": "Subscription Id",
            "description": "TRD's internal api_subscriptions.id."
          },
          "subscription_status": {
            "type": "string",
            "enum": [
              "created",
              "updated"
            ],
            "title": "Subscription Status",
            "description": "Whether the subscription was newly created or updated."
          },
          "entitlement_snapshot_id": {
            "type": "integer",
            "title": "Entitlement Snapshot Id",
            "description": "ID of the entitlement snapshot (created or existing)."
          },
          "entitlement_status": {
            "type": "string",
            "enum": [
              "created",
              "existing"
            ],
            "title": "Entitlement Status",
            "description": "'created' if new snapshot, 'existing' if source_event_id already existed."
          },
          "key_id": {
            "type": "integer",
            "title": "Key Id",
            "description": "TRD internal key ID."
          },
          "key_prefix": {
            "type": "string",
            "title": "Key Prefix",
            "description": "Key prefix for identification (e.g. 'trd_abc')."
          },
          "key_status": {
            "type": "string",
            "enum": [
              "created",
              "existing"
            ],
            "title": "Key Status",
            "description": "'created' if new key was generated, 'existing' if ui_proxy key already existed."
          },
          "api_key": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Api Key",
            "description": "Full API key value. Only returned on first creation  null on retry. Store securely."
          },
          "account_id": {
            "type": "string",
            "title": "Account Id",
            "description": "Stable billing anchor."
          },
          "neo_subscription_id": {
            "type": "string",
            "title": "Neo Subscription Id",
            "description": "Neo's subscriptions.id."
          }
        },
        "type": "object",
        "required": [
          "subscription_id",
          "subscription_status",
          "entitlement_snapshot_id",
          "entitlement_status",
          "key_id",
          "key_prefix",
          "key_status",
          "account_id",
          "neo_subscription_id"
        ],
        "title": "AdminProvisionSubscriptionResponse",
        "description": "Response after provisioning a subscription.\n\nThe api_key field contains the full key ONLY on first creation.\nOn retry (key already exists), api_key is null and only key_prefix is returned.\nNeo App MUST persist the api_key on first successful response."
      },
      "AdminRevokeBySubscriptionRequest": {
        "properties": {
          "subscription_id": {
            "type": "integer",
            "title": "Subscription Id",
            "description": "TRD subscription ID whose keys should be revoked."
          },
          "reason": {
            "type": "string",
            "title": "Reason",
            "description": "Reason for revocation (stored on each revoked key)."
          },
          "revoked_by_user_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Revoked By User Id",
            "description": "ID of the user authorizing the revocation."
          }
        },
        "type": "object",
        "required": [
          "subscription_id",
          "reason"
        ],
        "title": "AdminRevokeBySubscriptionRequest",
        "description": "Request to revoke all non-internal keys for a subscription."
      },
      "AdminRevokeBySubscriptionResponse": {
        "properties": {
          "subscription_id": {
            "type": "integer",
            "title": "Subscription Id",
            "description": "TRD internal subscription ID."
          },
          "revoked_keys": {
            "items": {
              "$ref": "#/components/schemas/AdminRevokedKeyItem"
            },
            "type": "array",
            "title": "Revoked Keys",
            "description": "Keys that were revoked."
          },
          "total_keys_revoked": {
            "type": "integer",
            "title": "Total Keys Revoked",
            "description": "Total number of keys revoked."
          }
        },
        "type": "object",
        "required": [
          "subscription_id",
          "revoked_keys",
          "total_keys_revoked"
        ],
        "title": "AdminRevokeBySubscriptionResponse",
        "description": "Response after revoking all non-internal keys for a subscription."
      },
      "AdminRevokedKeyItem": {
        "properties": {
          "key_id": {
            "type": "integer",
            "title": "Key Id",
            "description": "ID of the revoked key."
          },
          "key_prefix": {
            "type": "string",
            "title": "Key Prefix",
            "description": "Key prefix for identification."
          },
          "key_type": {
            "type": "string",
            "title": "Key Type",
            "description": "Type of the revoked key."
          }
        },
        "type": "object",
        "required": [
          "key_id",
          "key_prefix",
          "key_type"
        ],
        "title": "AdminRevokedKeyItem",
        "description": "Summary of a key that was revoked during a cascade operation."
      },
      "AdminRotateUiProxyKeyRequest": {
        "properties": {
          "subscription_id": {
            "type": "integer",
            "title": "Subscription Id",
            "description": "TRD subscription ID whose UI proxy key should be rotated."
          },
          "revoked_by_user_id": {
            "type": "integer",
            "title": "Revoked By User Id",
            "description": "ID of the user authorizing the rotation."
          }
        },
        "type": "object",
        "required": [
          "subscription_id",
          "revoked_by_user_id"
        ],
        "title": "AdminRotateUiProxyKeyRequest",
        "description": "Request to rotate the UI proxy key for a subscription."
      },
      "AdminRotateUiProxyKeyResponse": {
        "properties": {
          "old_key_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Old Key Id",
            "description": "ID of the revoked old key, or null if none existed."
          },
          "new_key_id": {
            "type": "integer",
            "title": "New Key Id",
            "description": "ID of the newly created UI proxy key."
          },
          "new_key_prefix": {
            "type": "string",
            "title": "New Key Prefix",
            "description": "Prefix of the new key for identification."
          },
          "new_api_key": {
            "type": "string",
            "title": "New Api Key",
            "description": "Full new API key value. Only returned once  store securely."
          }
        },
        "type": "object",
        "required": [
          "new_key_id",
          "new_key_prefix",
          "new_api_key"
        ],
        "title": "AdminRotateUiProxyKeyResponse",
        "description": "Response after rotating a UI proxy key."
      },
      "AdminSubscriptionItem": {
        "properties": {
          "subscription_id": {
            "type": "integer",
            "title": "Subscription Id",
            "description": "TRD internal subscription ID."
          },
          "neo_subscription_id": {
            "type": "string",
            "title": "Neo Subscription Id",
            "description": "Neo's subscriptions.id."
          },
          "neo_ref_type": {
            "type": "string",
            "const": "neo_subscription",
            "title": "Neo Ref Type",
            "description": "Type of Neo entity reference."
          },
          "status": {
            "type": "string",
            "enum": [
              "active",
              "suspended",
              "cancelled"
            ],
            "title": "Status",
            "description": "Subscription status: active, suspended, or cancelled."
          },
          "display_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Display Name",
            "description": "Human-readable subscription name."
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At",
            "description": "When the subscription was created."
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "title": "Updated At",
            "description": "When the subscription was last updated."
          }
        },
        "type": "object",
        "required": [
          "subscription_id",
          "neo_subscription_id",
          "neo_ref_type",
          "status",
          "created_at",
          "updated_at"
        ],
        "title": "AdminSubscriptionItem",
        "description": "Subscription metadata within an account subscription list."
      },
      "AdminSubscriptionUpsertRequest": {
        "properties": {
          "neo_ref_type": {
            "type": "string",
            "const": "neo_subscription",
            "title": "Neo Ref Type",
            "description": "Type of Neo entity reference. Currently only 'neo_subscription'.",
            "default": "neo_subscription"
          },
          "neo_subscription_id": {
            "type": "string",
            "title": "Neo Subscription Id",
            "description": "Neo's subscriptions.id (may change on plan upgrade)."
          },
          "account_id": {
            "type": "string",
            "title": "Account Id",
            "description": "Stable billing anchor (Neo billing_accounts.id). Survives subscription upgrades."
          },
          "stripe_customer_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Stripe Customer Id",
            "description": "Stripe customer ID for metered overage billing (cus_xxx)."
          },
          "display_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Display Name",
            "description": "Human-readable subscription name."
          },
          "status": {
            "anyOf": [
              {
                "type": "string",
                "enum": [
                  "active",
                  "suspended",
                  "cancelled"
                ]
              },
              {
                "type": "null"
              }
            ],
            "title": "Status",
            "description": "Subscription status: active, suspended, or cancelled. Defaults to 'active' on create."
          }
        },
        "type": "object",
        "required": [
          "neo_subscription_id",
          "account_id"
        ],
        "title": "AdminSubscriptionUpsertRequest",
        "description": "Request to create or update a TRD subscription.\n\nUBS v2 Naming Convention:\n- neo_subscription_id: Neo's subscriptions.id (may change on upgrade)\n- neo_ref_type: Type of Neo entity (default: neo_subscription)\n- account_id: Neo's billing_accounts.id (stable anchor, survives upgrades)\n- stripe_customer_id: Stripe customer ID for metered billing"
      },
      "AdminSubscriptionUpsertResponse": {
        "properties": {
          "subscription_id": {
            "type": "integer",
            "title": "Subscription Id",
            "description": "TRD's internal api_subscriptions.id (auto-increment)."
          },
          "neo_ref_type": {
            "type": "string",
            "const": "neo_subscription",
            "title": "Neo Ref Type",
            "description": "Type of Neo entity reference."
          },
          "neo_subscription_id": {
            "type": "string",
            "title": "Neo Subscription Id",
            "description": "Neo's subscriptions.id."
          },
          "account_id": {
            "type": "string",
            "title": "Account Id",
            "description": "Stable billing anchor (Neo billing_accounts.id)."
          },
          "stripe_customer_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Stripe Customer Id",
            "description": "Stripe customer ID (cus_xxx), if configured."
          },
          "status": {
            "type": "string",
            "enum": [
              "active",
              "suspended",
              "cancelled"
            ],
            "title": "Status",
            "description": "Current subscription status."
          },
          "display_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Display Name",
            "description": "Human-readable subscription name."
          }
        },
        "type": "object",
        "required": [
          "subscription_id",
          "neo_ref_type",
          "neo_subscription_id",
          "account_id",
          "status"
        ],
        "title": "AdminSubscriptionUpsertResponse",
        "description": "Response after creating or updating a TRD subscription."
      },
      "AdminUsageCounterResponse": {
        "properties": {
          "subscription_id": {
            "type": "integer",
            "title": "Subscription Id",
            "description": "TRD subscription ID."
          },
          "account_id": {
            "type": "string",
            "title": "Account Id",
            "description": "Stable billing anchor (denormalized for query convenience)."
          },
          "period_start": {
            "type": "string",
            "format": "date-time",
            "title": "Period Start",
            "description": "Start of the billing period."
          },
          "period_end": {
            "type": "string",
            "format": "date-time",
            "title": "Period End",
            "description": "End of the billing period."
          },
          "request_source": {
            "type": "string",
            "enum": [
              "neo_ui",
              "direct",
              "internal"
            ],
            "title": "Request Source",
            "description": "Request source: 'neo_ui', 'direct', or 'internal'."
          },
          "consumed_credits": {
            "type": "integer",
            "title": "Consumed Credits",
            "description": "Total credits consumed (atomic counter)."
          },
          "denied_credits": {
            "type": "integer",
            "title": "Denied Credits",
            "description": "Credits for requests blocked by hard-stop enforcement."
          },
          "overage_credits": {
            "type": "integer",
            "title": "Overage Credits",
            "description": "Credits consumed beyond included_credits."
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "title": "Updated At",
            "description": "Last time this counter was updated."
          }
        },
        "type": "object",
        "required": [
          "subscription_id",
          "account_id",
          "period_start",
          "period_end",
          "request_source",
          "consumed_credits",
          "denied_credits",
          "overage_credits",
          "updated_at"
        ],
        "title": "AdminUsageCounterResponse",
        "description": "Usage counter snapshot for a specific subscription, period, and request source."
      },
      "AdminUsageEventItem": {
        "properties": {
          "event_id": {
            "type": "string",
            "title": "Event Id",
            "description": "Unique event identifier (UUID)."
          },
          "ts": {
            "type": "string",
            "format": "date-time",
            "title": "Ts",
            "description": "Timestamp when the event was recorded."
          },
          "request_id": {
            "type": "string",
            "title": "Request Id",
            "description": "Unique request identifier (UUID)."
          },
          "subscription_id": {
            "type": "integer",
            "title": "Subscription Id",
            "description": "TRD subscription ID."
          },
          "api_key_id": {
            "type": "integer",
            "title": "Api Key Id",
            "description": "ID of the API key used for this request."
          },
          "account_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Account Id",
            "description": "Stable billing anchor. Nullable for pre-UBS-v2 events."
          },
          "tier_code": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Tier Code",
            "description": "Plan tier at the time of the request. Nullable for pre-UBS-v2 events."
          },
          "entitlement_snapshot_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Entitlement Snapshot Id",
            "description": "Entitlement snapshot active at request time. Nullable for pre-UBS-v2 events."
          },
          "request_source": {
            "type": "string",
            "enum": [
              "neo_ui",
              "direct",
              "internal"
            ],
            "title": "Request Source",
            "description": "Origin of the request: 'neo_ui', 'direct', or 'internal'."
          },
          "actor_user_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Actor User Id",
            "description": "User ID of the actor, if available."
          },
          "method": {
            "type": "string",
            "title": "Method",
            "description": "HTTP method (GET, POST, etc.)."
          },
          "endpoint_template": {
            "type": "string",
            "title": "Endpoint Template",
            "description": "FastAPI route template (e.g. '/rates/entry')."
          },
          "status_code": {
            "type": "integer",
            "title": "Status Code",
            "description": "HTTP response status code."
          },
          "error_class": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Error Class",
            "description": "Error classification if the request failed."
          },
          "policy_version": {
            "type": "string",
            "title": "Policy Version",
            "description": "Credit policy version used for billing."
          },
          "calc_method": {
            "type": "string",
            "title": "Calc Method",
            "description": "Credit calculation method: 'per_call', 'per_record', or 'per_country'."
          },
          "credits_attempted": {
            "type": "integer",
            "title": "Credits Attempted",
            "description": "Credits the request attempted to reserve."
          },
          "credits_charged": {
            "type": "integer",
            "title": "Credits Charged",
            "description": "Credits actually charged (0 if non-2xx response)."
          },
          "was_denied": {
            "type": "boolean",
            "title": "Was Denied",
            "description": "True if the request was denied by hard-stop enforcement."
          },
          "was_overage": {
            "type": "boolean",
            "title": "Was Overage",
            "description": "True if the request consumed overage credits."
          },
          "deny_reason": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Deny Reason",
            "description": "Reason for denial (e.g. 'hard_stop_limit_exceeded')."
          },
          "latency_ms": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Latency Ms",
            "description": "Request latency in milliseconds."
          }
        },
        "type": "object",
        "required": [
          "event_id",
          "ts",
          "request_id",
          "subscription_id",
          "api_key_id",
          "request_source",
          "method",
          "endpoint_template",
          "status_code",
          "policy_version",
          "calc_method",
          "credits_attempted",
          "credits_charged",
          "was_denied",
          "was_overage"
        ],
        "title": "AdminUsageEventItem",
        "description": "Individual usage event with full billing attribution.\n\nNote: account_id, tier_code, and entitlement_snapshot_id are nullable\nfor historical events created before UBS v2, but will always be present\nfor new events."
      },
      "AdminUsageEventsAggregateResponse": {
        "properties": {
          "period_start": {
            "type": "string",
            "format": "date-time",
            "title": "Period Start",
            "description": "Start of the aggregation period (inclusive)."
          },
          "period_end": {
            "type": "string",
            "format": "date-time",
            "title": "Period End",
            "description": "End of the aggregation period (exclusive)."
          },
          "aggregations": {
            "items": {
              "$ref": "#/components/schemas/EndpointAggregation"
            },
            "type": "array",
            "title": "Aggregations",
            "description": "List of per-endpoint aggregated metrics, ordered by total_requests descending."
          }
        },
        "type": "object",
        "required": [
          "period_start",
          "period_end",
          "aggregations"
        ],
        "title": "AdminUsageEventsAggregateResponse",
        "description": "Aggregated usage event metrics grouped by a specified dimension.\n\nReturns pre-computed totals and latency statistics per group, ordered by\ntotal_requests descending. Currently supports grouping by endpoint_template.\nIdeal for the 'Activity by Endpoint' admin dashboard section."
      },
      "AdminUsageEventsListResponse": {
        "properties": {
          "items": {
            "items": {
              "$ref": "#/components/schemas/AdminUsageEventItem"
            },
            "type": "array",
            "title": "Items",
            "description": "List of usage events for the current page."
          },
          "next_cursor": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Next Cursor",
            "description": "Opaque cursor for the next page. null if no more results."
          }
        },
        "type": "object",
        "required": [
          "items"
        ],
        "title": "AdminUsageEventsListResponse",
        "description": "Paginated list of usage events with keyset cursor pagination."
      },
      "AdminUsageHistoryResponse": {
        "properties": {
          "account_id": {
            "type": "string",
            "title": "Account Id",
            "description": "Stable billing anchor."
          },
          "granularity": {
            "type": "string",
            "enum": [
              "daily",
              "weekly",
              "monthly"
            ],
            "title": "Granularity",
            "description": "Time granularity: 'daily', 'weekly', or 'monthly'."
          },
          "periods": {
            "items": {
              "$ref": "#/components/schemas/UsagePeriod"
            },
            "type": "array",
            "title": "Periods",
            "description": "Time-series usage data points, ordered chronologically."
          }
        },
        "type": "object",
        "required": [
          "account_id",
          "granularity",
          "periods"
        ],
        "title": "AdminUsageHistoryResponse",
        "description": "Historical usage data aggregated by time granularity for charts and trends."
      },
      "AdminUsageStatisticsResponse": {
        "properties": {
          "period_start": {
            "type": "string",
            "format": "date-time",
            "title": "Period Start",
            "description": "Start of the aggregation period (inclusive)."
          },
          "period_end": {
            "type": "string",
            "format": "date-time",
            "title": "Period End",
            "description": "End of the aggregation period (exclusive)."
          },
          "total_consumed_credits": {
            "type": "integer",
            "title": "Total Consumed Credits",
            "description": "Sum of consumed_credits across all subscriptions and sources in the period."
          },
          "total_denied_credits": {
            "type": "integer",
            "title": "Total Denied Credits",
            "description": "Sum of denied_credits (requests blocked by hard-stop enforcement) across all subscriptions."
          },
          "total_overage_credits": {
            "type": "integer",
            "title": "Total Overage Credits",
            "description": "Sum of overage_credits (credits consumed beyond included_credits) across all subscriptions."
          },
          "breakdown_by_source": {
            "items": {
              "$ref": "#/components/schemas/UsageBySource"
            },
            "type": "array",
            "title": "Breakdown By Source",
            "description": "Credit totals broken down by request_source (neo_ui, direct, internal)."
          },
          "accounts_at_limit": {
            "type": "integer",
            "title": "Accounts At Limit",
            "description": "Count of distinct accounts with a hard-stop entitlement (overage_cap_credits=0) where consumed_credits >= included_credits."
          },
          "total_subscriptions": {
            "type": "integer",
            "title": "Total Subscriptions",
            "description": "Count of distinct subscriptions that recorded usage in the period."
          }
        },
        "type": "object",
        "required": [
          "period_start",
          "period_end",
          "total_consumed_credits",
          "total_denied_credits",
          "total_overage_credits",
          "breakdown_by_source",
          "accounts_at_limit",
          "total_subscriptions"
        ],
        "title": "AdminUsageStatisticsResponse",
        "description": "System-wide aggregated usage statistics across all subscriptions.\n\nProvides a high-level overview of credit consumption, denials, and overage\nacross the entire platform for a given time period. Includes a breakdown\nby request source and counts of accounts that have hit their hard-stop limit.\nIdeal for admin dashboard overview panels."
      },
      "AdminUsageSummaryResponse": {
        "properties": {
          "account_id": {
            "type": "string",
            "title": "Account Id",
            "description": "Stable billing anchor."
          },
          "period_start": {
            "type": "string",
            "format": "date-time",
            "title": "Period Start",
            "description": "Start of the usage period."
          },
          "period_end": {
            "type": "string",
            "format": "date-time",
            "title": "Period End",
            "description": "End of the usage period."
          },
          "total_consumed_credits": {
            "type": "integer",
            "title": "Total Consumed Credits",
            "description": "Total credits consumed across all sources."
          },
          "total_denied_credits": {
            "type": "integer",
            "title": "Total Denied Credits",
            "description": "Total credits denied across all sources."
          },
          "total_overage_credits": {
            "type": "integer",
            "title": "Total Overage Credits",
            "description": "Total overage credits across all sources."
          },
          "included_credits": {
            "type": "integer",
            "title": "Included Credits",
            "description": "Credits included in the plan per period (from current entitlement). -1 = unlimited."
          },
          "remaining_credits": {
            "type": "integer",
            "title": "Remaining Credits",
            "description": "max(0, included_credits - total_consumed_credits). -1 for unlimited plans."
          },
          "overage_cap_credits": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Overage Cap Credits",
            "description": "Overage cap from entitlement: null=unlimited, 0=hard stop, N=cap at included+N."
          },
          "is_at_limit": {
            "type": "boolean",
            "title": "Is At Limit",
            "description": "True if hard stop (overage_cap_credits=0) and consumed >= included."
          },
          "tier_code": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Tier Code",
            "description": "Current plan tier code."
          },
          "breakdown_by_source": {
            "items": {
              "$ref": "#/components/schemas/UsageBySource"
            },
            "type": "array",
            "title": "Breakdown By Source",
            "description": "Credit totals broken down by request_source."
          }
        },
        "type": "object",
        "required": [
          "account_id",
          "period_start",
          "period_end",
          "total_consumed_credits",
          "total_denied_credits",
          "total_overage_credits",
          "included_credits",
          "remaining_credits",
          "is_at_limit",
          "breakdown_by_source"
        ],
        "title": "AdminUsageSummaryResponse",
        "description": "Aggregated usage summary for an account.\n\nProvides a snapshot of current period usage with remaining credits\nand overage status  ideal for dashboard usage widgets."
      },
      "AiEvaluationResponse": {
        "properties": {
          "confidence": {
            "type": "integer",
            "maximum": 10.0,
            "minimum": 1.0,
            "title": "Confidence",
            "description": "Confidence score from 1-10. 1=definitely not applicable, 10=definitely applicable."
          },
          "recommendation": {
            "type": "string",
            "title": "Recommendation",
            "description": "One of 'likely', 'unlikely', or 'uncertain'."
          },
          "reasoning": {
            "type": "string",
            "title": "Reasoning",
            "description": "One-sentence explanation of the AI's assessment."
          }
        },
        "type": "object",
        "required": [
          "confidence",
          "recommendation",
          "reasoning"
        ],
        "title": "AiEvaluationResponse",
        "description": "AI-generated assessment of whether product usage matches a conditional exemption."
      },
      "Body_search_news_ai_get_giq_news_search_ai_get": {
        "properties": {
          "best_match": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Best Match"
          },
          "exclusions": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Exclusions"
          },
          "categories": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Categories"
          },
          "person": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Person"
          },
          "thing": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Thing"
          },
          "publisher_region": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Publisher Region"
          }
        },
        "type": "object",
        "title": "Body_search_news_ai_get_giq_news_search_ai_get"
      },
      "CalcBaseComponent": {
        "properties": {
          "hts_code": {
            "type": "string",
            "title": "Hts Code",
            "description": "HTS code this component applies to."
          },
          "listed_hts_code": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Listed Hts Code",
            "description": "The HTS code where this rate is actually listed in the tariff schedule. For inherited rates, this differs from hts_code. For reciprocal rates, this matches hts_code."
          },
          "rate_column": {
            "type": "string",
            "title": "Rate Column",
            "description": "Rate column: 'general', 'special', 'other', or 'additionalDuties'."
          },
          "rate_usage": {
            "type": "string",
            "title": "Rate Usage",
            "description": "How rate is applied: 'base', 'replace', 'additive', 'subtractive', or 'ignore'."
          },
          "rate_basis": {
            "type": "string",
            "title": "Rate Basis",
            "description": "Rate type: 'advalorem', 'specific', 'free', 'reference', or 'fallback'."
          },
          "rate_value": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Rate Value",
            "description": "Numeric rate value (0.25 for 25%, or specific amount per unit)."
          },
          "uom": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Uom",
            "description": "Unit of measure for specific rates."
          },
          "uom_extra": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Uom Extra",
            "description": "Secondary unit of measure for compound rates."
          },
          "duty_advalorem": {
            "type": "number",
            "title": "Duty Advalorem",
            "description": "Calculated ad valorem duty in USD.",
            "default": 0.0
          },
          "duty_specific": {
            "type": "number",
            "title": "Duty Specific",
            "description": "Calculated specific duty in USD.",
            "default": 0.0
          },
          "duty_total": {
            "type": "number",
            "title": "Duty Total",
            "description": "Total duty (ad valorem + specific) in USD.",
            "default": 0.0
          },
          "description": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Description",
            "description": "Human-readable description. For base rates, this is the HTS product description. For reciprocal (9903) rules, this is the rule condition text."
          },
          "listed_rate_text": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Listed Rate Text",
            "description": "The original rate text as listed in the tariff schedule column. Examples: '16.5%', 'Free', 'The duty provided in the applicable subheading', 'The duty provided in the applicable subheading + 50% ad valorem'."
          },
          "programs": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Programs",
            "description": "Trade programs applicable to this component."
          }
        },
        "type": "object",
        "required": [
          "hts_code",
          "rate_column",
          "rate_usage",
          "rate_basis"
        ],
        "title": "CalcBaseComponent",
        "description": "Streamlined representation of a single duty component."
      },
      "CalcBatchInputs": {
        "properties": {
          "data": {
            "items": {
              "$ref": "#/components/schemas/CalcInputs-Input"
            },
            "type": "array",
            "maxItems": 1000,
            "minItems": 1,
            "title": "Data",
            "description": "List of tariff calculation inputs to process in batch. Maximum 1000 entries per request."
          },
          "hts_date": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Hts Date",
            "description": "Default HTS date for all entries (can be overridden per-entry).",
            "examples": [
              "2025-04-01"
            ]
          },
          "hts_year": {
            "anyOf": [
              {
                "type": "integer",
                "maximum": 2030.0,
                "minimum": 2020.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Hts Year",
            "description": "Default HTS year for all entries (can be overridden per-entry).",
            "examples": [
              2025
            ]
          },
          "hts_version": {
            "anyOf": [
              {
                "type": "integer",
                "maximum": 99.0,
                "minimum": 0.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Hts Version",
            "description": "Default HTS version for all entries (can be overridden per-entry).",
            "examples": [
              0,
              27
            ]
          }
        },
        "type": "object",
        "required": [
          "data"
        ],
        "title": "CalcBatchInputs",
        "description": "Batch request for evaluating multiple tariff entries in a single API call.\n\nProcesses multiple entries in parallel for optimal performance.\nEach entry supports the full feature set of single entry evaluation."
      },
      "CalcDebugPayload": {
        "properties": {
          "effective": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/CalcEffective"
              },
              {
                "type": "null"
              }
            ],
            "description": "Effective rate summary."
          },
          "parts": {
            "items": {
              "$ref": "#/components/schemas/CalcPart"
            },
            "type": "array",
            "title": "Parts",
            "description": "Individual rate components."
          },
          "support": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/CalcSupport"
              },
              {
                "type": "null"
              }
            ],
            "description": "Rate selection support details."
          },
          "applicable_rates": {
            "items": {},
            "type": "array",
            "title": "Applicable Rates",
            "description": "All rates that were applicable."
          },
          "selected_rates": {
            "items": {},
            "type": "array",
            "title": "Selected Rates",
            "description": "Rates selected for calculation."
          }
        },
        "type": "object",
        "title": "CalcDebugPayload",
        "description": "Verbose calculation artefacts returned when debug mode is enabled."
      },
      "CalcDutyTotals": {
        "properties": {
          "ad_valorem": {
            "type": "number",
            "title": "Ad Valorem",
            "description": "Total ad valorem (percentage-based) duty in USD.",
            "default": 0.0
          },
          "specific": {
            "type": "number",
            "title": "Specific",
            "description": "Total specific (per-unit) duty in USD.",
            "default": 0.0
          },
          "total": {
            "type": "number",
            "title": "Total",
            "description": "Combined total duty (ad valorem + specific) in USD.",
            "default": 0.0
          }
        },
        "type": "object",
        "title": "CalcDutyTotals",
        "description": "Aggregated duty amounts for a given scope of the calculation."
      },
      "CalcEffective": {
        "properties": {
          "rate_column": {
            "type": "string",
            "title": "Rate Column",
            "description": "Rate column applied: 'general', 'special', or 'other'."
          },
          "rate_basis": {
            "type": "string",
            "title": "Rate Basis",
            "description": "Basis for rate calculation: 'advalorem', 'specific', 'compound', or 'free'."
          },
          "rate_description": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Rate Description",
            "description": "Human-readable rate description (e.g., '25%' or 'Free')."
          },
          "duty_advalorem": {
            "type": "number",
            "title": "Duty Advalorem",
            "description": "Ad valorem (percentage-based) duty amount in USD."
          },
          "duty_specific": {
            "type": "number",
            "title": "Duty Specific",
            "description": "Specific (per-unit) duty amount in USD."
          },
          "duty_total": {
            "type": "number",
            "title": "Duty Total",
            "description": "Total duty amount (ad valorem + specific) in USD."
          },
          "duty_total_perc_of_cost": {
            "type": "number",
            "title": "Duty Total Perc Of Cost",
            "description": "Total duty as a percentage of customs value (0.25 = 25%)."
          },
          "duty_total_per_qty": {
            "type": "number",
            "title": "Duty Total Per Qty",
            "description": "Total duty per unit of quantity."
          },
          "cost_total_with_duties": {
            "type": "number",
            "title": "Cost Total With Duties",
            "description": "Total landed cost including customs value and all duties."
          }
        },
        "type": "object",
        "required": [
          "rate_column",
          "rate_basis",
          "duty_advalorem",
          "duty_specific",
          "duty_total",
          "duty_total_perc_of_cost",
          "duty_total_per_qty",
          "cost_total_with_duties"
        ],
        "title": "CalcEffective",
        "description": "Summary of effective duty rates and amounts by rate column.\n\nAggregates all duty components for a given rate column (general, special, other)\ninto a single summary with totals and percentages."
      },
      "CalcInputs-Input": {
        "properties": {
          "rec_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Rec Id",
            "description": "Client-provided identifier for record matching. Echoed back in response for correlation. Not validated or stored. Auto-generated from index if not provided in batch requests."
          },
          "hts_code": {
            "type": "string",
            "title": "Hts Code",
            "description": "HTS (Harmonized Tariff Schedule) code to evaluate. Accepts dotted format (7208.10.15) or undotted (7208101500). Must be a valid 4-10 digit code.",
            "examples": [
              "7208.10.15",
              "7208101500",
              "9903.88.03"
            ]
          },
          "country_of_origin": {
            "type": "string",
            "title": "Country Of Origin",
            "description": "ISO 3166-1 alpha-2 country code where the goods originate. Determines applicable duty rates, trade program eligibility, and reciprocal tariffs.",
            "examples": [
              "CN",
              "MX",
              "CA",
              "DE",
              "VN"
            ]
          },
          "cost": {
            "type": "number",
            "minimum": 0.0,
            "title": "Cost",
            "description": "Customs value of the goods in the specified currency. Used to calculate ad valorem (percentage-based) duties.",
            "examples": [
              10000.0,
              50000.0,
              1500.5
            ]
          },
          "qty": {
            "type": "number",
            "minimum": 0.0,
            "title": "Qty",
            "description": "Quantity of goods in the specified unit of measure. Used to calculate specific (per-unit) duties.",
            "examples": [
              100.0,
              1000.0,
              500.5
            ]
          },
          "currency_code": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Currency Code",
            "description": "ISO 4217 currency code for the cost value. Currently only USD is fully supported for duty calculations.",
            "default": "USD",
            "examples": [
              "USD"
            ]
          },
          "qty_uom": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Qty Uom",
            "description": "Unit of measure for quantity. If not specified, uses the HTS code's default UOM (e.g., KG, NO, L).",
            "examples": [
              "KG",
              "NO",
              "L",
              "M2",
              "DOZ"
            ]
          },
          "hts_date": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Hts Date",
            "description": "Date (YYYY-MM-DD) to find the effective HTS revision. Useful for historical calculations or future planning.",
            "examples": [
              "2025-04-01",
              "2026-01-15"
            ]
          },
          "hts_year": {
            "anyOf": [
              {
                "type": "integer",
                "maximum": 2030.0,
                "minimum": 2020.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Hts Year",
            "description": "HTS revision year. Use with hts_version for a specific revision, or alone for the latest version of that year.",
            "examples": [
              2025,
              2026
            ]
          },
          "hts_version": {
            "anyOf": [
              {
                "type": "integer",
                "maximum": 99.0,
                "minimum": 0.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Hts Version",
            "description": "HTS revision version number within the year. Combined with hts_year to select a specific revision.",
            "examples": [
              0,
              15,
              27
            ]
          },
          "reciprocal": {
            "type": "boolean",
            "title": "Reciprocal",
            "description": "Evaluate and include reciprocal (Chapter 99, 9903) additional duties in the response. Defaults to true; related fields (import_date, loading_date, rate_column, etc.) refine the reciprocal evaluation.",
            "default": true
          },
          "include_rules_view": {
            "type": "boolean",
            "title": "Include Rules View",
            "description": "Include a unified rules view alongside the standard calculation payload.",
            "default": false
          },
          "import_date": {
            "anyOf": [
              {
                "type": "string",
                "format": "date"
              },
              {
                "type": "null"
              }
            ],
            "title": "Import Date",
            "description": "Import date used when evaluating reciprocal rates."
          },
          "rate_column": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Rate Column",
            "description": "Explicit rate column to evaluate for reciprocal rates: general, special, or other."
          },
          "base_ad_valorem_rate": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Base Ad Valorem Rate",
            "description": "Override for the base ad valorem rate when evaluating reciprocal rules."
          },
          "admitted_to_ftz": {
            "type": "boolean",
            "title": "Admitted To Ftz",
            "description": "Whether the goods are admitted to a foreign trade zone.",
            "default": false
          },
          "loading_date": {
            "anyOf": [
              {
                "type": "string",
                "format": "date"
              },
              {
                "type": "null"
              }
            ],
            "title": "Loading Date",
            "description": "Date the goods were loaded or entered transit for reciprocity checks."
          },
          "is_donation": {
            "type": "boolean",
            "title": "Is Donation",
            "description": "Treat the shipment as a qualifying humanitarian donation.",
            "default": false
          },
          "is_informational": {
            "type": "boolean",
            "title": "Is Informational",
            "description": "Indicates the goods consist primarily of informational materials.",
            "default": false
          },
          "is_personal_baggage": {
            "type": "boolean",
            "title": "Is Personal Baggage",
            "description": "Flag articles contained in personal accompanied baggage.",
            "default": false
          },
          "usmca_claim": {
            "type": "boolean",
            "title": "Usmca Claim",
            "description": "Preferential claim made under the USMCA agreement.",
            "default": false
          },
          "program_qualified": {
            "type": "boolean",
            "title": "Program Qualified",
            "description": "Declarant affirms eligibility for special program claims. When false, special program rates are ignored.",
            "default": true
          },
          "chapter98_provision": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Chapter98 Provision",
            "description": "Specific Chapter 98 provision claimed for the entry, when any."
          },
          "is_civil_aircraft": {
            "type": "boolean",
            "title": "Is Civil Aircraft",
            "description": "Flag for civil aircraft parts eligible for Note 35 exemptions (9903.96.01, 9903.96.02).",
            "default": false
          },
          "materials": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/MaterialComponent"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Materials",
            "description": "List of material components (steel, aluminum, etc.) with value/process metadata."
          },
          "selected_code_conditions": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Selected Code Conditions",
            "description": "List of rule codes for conditional exemptions the user has confirmed apply. These are rules where product-specific conditions must be verified by the user (e.g., 9903.02.78 for acai preparations for beverage manufacture)."
          },
          "product_usage": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Product Usage",
            "description": "Free-text description of the product's intended usage. Used for semantic matching against conditional exemption qualifiers."
          }
        },
        "type": "object",
        "required": [
          "hts_code",
          "country_of_origin",
          "cost",
          "qty"
        ],
        "title": "CalcInputs",
        "description": "A data model for representing calculation inputs.\n\nThis class provides a structured representation for inputs required in\ncalculation processes. It defines fields such as tariff code, country of origin,\ncost, quantity, and other optional metadata or configurations. It is designed to\nensure consistent data handling and processing, supporting a future-proof\nframework for extensibility.\n\nAttributes:\n    rec_id (Optional[str]): Client-provided identifier for record matching.\n        Echoed back in response for correlation. Not validated or stored.\n        Auto-generated from index if not provided in batch requests.\n        Default is None. Improves front end correlation of batch requests.\n    hts_code (str): The HTS code, representing the specific classification\n        of the item.\n    country_of_origin (str): The country where the product originates from.\n    cost (float): The cost of the product. Default is 0.0.\n    qty (float): The quantity of the product. Default is 0.0.\n    currency_code (Optional[str]): The currency code used for the cost.\n        Default is \"USD\".\n    qty_uom (Optional[str]): The unit of measure for the quantity.\n        Default is None.\n    hts_date (Optional[str]): The date associated with the HTS code.\n        Default is None.\n    hts_year (Optional[int]): The year associated with the HTS code.\n        Default is None.\n    hts_version (Optional[int]): The version of the HTS classification.\n        Default is None.\n    reciprocal (bool): Whether to include reciprocal rate evaluation in the tariff calculation response.\n        Default is True.\n    include_rules_view (bool): Whether to include a unified rules view alongside the standard calculation payload.\n        Default is False.\n    import_date (Optional[date]): The import date used when evaluating reciprocal rates.\n        Default is None.\n    rate_column (Optional[str]): The explicit rate column to evaluate for reciprocal rates.\n        Default is None.\n    base_ad_valorem_rate (Optional[float]): The override for the base ad valorem rate when evaluating reciprocal rules.\n        Default is None.\n    admitted_to_ftz (bool): Whether the goods are admitted to a foreign trade zone.\n        Default is False.\n    loading_date (Optional[date]): The date the goods were loaded or entered transit for reciprocity checks.\n        Default is None.\n    is_donation (bool): Whether the shipment is a qualifying humanitarian donation.\n        Default is False.\n    is_informational (bool): Whether the goods consist primarily of informational materials.\n        Default is False.\n    is_personal_baggage (bool): Whether the goods are contained in personal accompanied baggage.\n        Default is False.\n    usmca_claim (bool): Whether the goods are a qualifying claim under the USMCA agreement.\n        Default is False.\n    program_qualified (bool): Whether the declarant is eligible for special program claims.\n        Default is True.\n    chapter98_provision (Optional[str]): The specific Chapter 98 provision claimed for the entry, when any.\n        Default is None.\n    is_civil_aircraft (bool): Whether the goods qualify for civil aircraft exemptions.\n        Default is False.\n    materials (Optional[List[MaterialComponent]]): The list of material components (steel, aluminum, etc.) with value/process metadata.\n        Default is None.\n    selected_code_conditions (Optional[List[str]]): Conditional exemption rule codes confirmed by the user.\n        Default is None.\n    product_usage (Optional[str]): Free-text usage context for conditional exemption evaluation.\n        Default is None."
      },
      "CalcInputs-Output": {
        "properties": {
          "rec_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Rec Id",
            "description": "Client-provided identifier for record matching. Echoed back in response for correlation. Not validated or stored. Auto-generated from index if not provided in batch requests."
          },
          "hts_code": {
            "type": "string",
            "title": "Hts Code",
            "description": "HTS (Harmonized Tariff Schedule) code to evaluate. Accepts dotted format (7208.10.15) or undotted (7208101500). Must be a valid 4-10 digit code.",
            "examples": [
              "7208.10.15",
              "7208101500",
              "9903.88.03"
            ]
          },
          "country_of_origin": {
            "type": "string",
            "title": "Country Of Origin",
            "description": "ISO 3166-1 alpha-2 country code where the goods originate. Determines applicable duty rates, trade program eligibility, and reciprocal tariffs.",
            "examples": [
              "CN",
              "MX",
              "CA",
              "DE",
              "VN"
            ]
          },
          "cost": {
            "type": "number",
            "minimum": 0.0,
            "title": "Cost",
            "description": "Customs value of the goods in the specified currency. Used to calculate ad valorem (percentage-based) duties.",
            "examples": [
              10000.0,
              50000.0,
              1500.5
            ]
          },
          "qty": {
            "type": "number",
            "minimum": 0.0,
            "title": "Qty",
            "description": "Quantity of goods in the specified unit of measure. Used to calculate specific (per-unit) duties.",
            "examples": [
              100.0,
              1000.0,
              500.5
            ]
          },
          "currency_code": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Currency Code",
            "description": "ISO 4217 currency code for the cost value. Currently only USD is fully supported for duty calculations.",
            "default": "USD",
            "examples": [
              "USD"
            ]
          },
          "qty_uom": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Qty Uom",
            "description": "Unit of measure for quantity. If not specified, uses the HTS code's default UOM (e.g., KG, NO, L).",
            "examples": [
              "KG",
              "NO",
              "L",
              "M2",
              "DOZ"
            ]
          },
          "hts_date": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Hts Date",
            "description": "Date (YYYY-MM-DD) to find the effective HTS revision. Useful for historical calculations or future planning.",
            "examples": [
              "2025-04-01",
              "2026-01-15"
            ]
          },
          "hts_year": {
            "anyOf": [
              {
                "type": "integer",
                "maximum": 2030.0,
                "minimum": 2020.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Hts Year",
            "description": "HTS revision year. Use with hts_version for a specific revision, or alone for the latest version of that year.",
            "examples": [
              2025,
              2026
            ]
          },
          "hts_version": {
            "anyOf": [
              {
                "type": "integer",
                "maximum": 99.0,
                "minimum": 0.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Hts Version",
            "description": "HTS revision version number within the year. Combined with hts_year to select a specific revision.",
            "examples": [
              0,
              15,
              27
            ]
          },
          "reciprocal": {
            "type": "boolean",
            "title": "Reciprocal",
            "description": "Evaluate and include reciprocal (Chapter 99, 9903) additional duties in the response. Defaults to true; related fields (import_date, loading_date, rate_column, etc.) refine the reciprocal evaluation.",
            "default": true
          },
          "include_rules_view": {
            "type": "boolean",
            "title": "Include Rules View",
            "description": "Include a unified rules view alongside the standard calculation payload.",
            "default": false
          },
          "import_date": {
            "anyOf": [
              {
                "type": "string",
                "format": "date"
              },
              {
                "type": "null"
              }
            ],
            "title": "Import Date",
            "description": "Import date used when evaluating reciprocal rates."
          },
          "rate_column": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Rate Column",
            "description": "Explicit rate column to evaluate for reciprocal rates: general, special, or other."
          },
          "base_ad_valorem_rate": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Base Ad Valorem Rate",
            "description": "Override for the base ad valorem rate when evaluating reciprocal rules."
          },
          "admitted_to_ftz": {
            "type": "boolean",
            "title": "Admitted To Ftz",
            "description": "Whether the goods are admitted to a foreign trade zone.",
            "default": false
          },
          "loading_date": {
            "anyOf": [
              {
                "type": "string",
                "format": "date"
              },
              {
                "type": "null"
              }
            ],
            "title": "Loading Date",
            "description": "Date the goods were loaded or entered transit for reciprocity checks."
          },
          "is_donation": {
            "type": "boolean",
            "title": "Is Donation",
            "description": "Treat the shipment as a qualifying humanitarian donation.",
            "default": false
          },
          "is_informational": {
            "type": "boolean",
            "title": "Is Informational",
            "description": "Indicates the goods consist primarily of informational materials.",
            "default": false
          },
          "is_personal_baggage": {
            "type": "boolean",
            "title": "Is Personal Baggage",
            "description": "Flag articles contained in personal accompanied baggage.",
            "default": false
          },
          "usmca_claim": {
            "type": "boolean",
            "title": "Usmca Claim",
            "description": "Preferential claim made under the USMCA agreement.",
            "default": false
          },
          "program_qualified": {
            "type": "boolean",
            "title": "Program Qualified",
            "description": "Declarant affirms eligibility for special program claims. When false, special program rates are ignored.",
            "default": true
          },
          "chapter98_provision": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Chapter98 Provision",
            "description": "Specific Chapter 98 provision claimed for the entry, when any."
          },
          "is_civil_aircraft": {
            "type": "boolean",
            "title": "Is Civil Aircraft",
            "description": "Flag for civil aircraft parts eligible for Note 35 exemptions (9903.96.01, 9903.96.02).",
            "default": false
          },
          "materials": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/MaterialComponent"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Materials",
            "description": "List of material components (steel, aluminum, etc.) with value/process metadata."
          },
          "selected_code_conditions": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Selected Code Conditions",
            "description": "List of rule codes for conditional exemptions the user has confirmed apply. These are rules where product-specific conditions must be verified by the user (e.g., 9903.02.78 for acai preparations for beverage manufacture)."
          },
          "product_usage": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Product Usage",
            "description": "Free-text description of the product's intended usage. Used for semantic matching against conditional exemption qualifiers."
          }
        },
        "type": "object",
        "required": [
          "hts_code",
          "country_of_origin",
          "cost",
          "qty"
        ],
        "title": "CalcInputs",
        "description": "A data model for representing calculation inputs.\n\nThis class provides a structured representation for inputs required in\ncalculation processes. It defines fields such as tariff code, country of origin,\ncost, quantity, and other optional metadata or configurations. It is designed to\nensure consistent data handling and processing, supporting a future-proof\nframework for extensibility.\n\nAttributes:\n    rec_id (Optional[str]): Client-provided identifier for record matching.\n        Echoed back in response for correlation. Not validated or stored.\n        Auto-generated from index if not provided in batch requests.\n        Default is None. Improves front end correlation of batch requests.\n    hts_code (str): The HTS code, representing the specific classification\n        of the item.\n    country_of_origin (str): The country where the product originates from.\n    cost (float): The cost of the product. Default is 0.0.\n    qty (float): The quantity of the product. Default is 0.0.\n    currency_code (Optional[str]): The currency code used for the cost.\n        Default is \"USD\".\n    qty_uom (Optional[str]): The unit of measure for the quantity.\n        Default is None.\n    hts_date (Optional[str]): The date associated with the HTS code.\n        Default is None.\n    hts_year (Optional[int]): The year associated with the HTS code.\n        Default is None.\n    hts_version (Optional[int]): The version of the HTS classification.\n        Default is None.\n    reciprocal (bool): Whether to include reciprocal rate evaluation in the tariff calculation response.\n        Default is True.\n    include_rules_view (bool): Whether to include a unified rules view alongside the standard calculation payload.\n        Default is False.\n    import_date (Optional[date]): The import date used when evaluating reciprocal rates.\n        Default is None.\n    rate_column (Optional[str]): The explicit rate column to evaluate for reciprocal rates.\n        Default is None.\n    base_ad_valorem_rate (Optional[float]): The override for the base ad valorem rate when evaluating reciprocal rules.\n        Default is None.\n    admitted_to_ftz (bool): Whether the goods are admitted to a foreign trade zone.\n        Default is False.\n    loading_date (Optional[date]): The date the goods were loaded or entered transit for reciprocity checks.\n        Default is None.\n    is_donation (bool): Whether the shipment is a qualifying humanitarian donation.\n        Default is False.\n    is_informational (bool): Whether the goods consist primarily of informational materials.\n        Default is False.\n    is_personal_baggage (bool): Whether the goods are contained in personal accompanied baggage.\n        Default is False.\n    usmca_claim (bool): Whether the goods are a qualifying claim under the USMCA agreement.\n        Default is False.\n    program_qualified (bool): Whether the declarant is eligible for special program claims.\n        Default is True.\n    chapter98_provision (Optional[str]): The specific Chapter 98 provision claimed for the entry, when any.\n        Default is None.\n    is_civil_aircraft (bool): Whether the goods qualify for civil aircraft exemptions.\n        Default is False.\n    materials (Optional[List[MaterialComponent]]): The list of material components (steel, aluminum, etc.) with value/process metadata.\n        Default is None.\n    selected_code_conditions (Optional[List[str]]): Conditional exemption rule codes confirmed by the user.\n        Default is None.\n    product_usage (Optional[str]): Free-text usage context for conditional exemption evaluation.\n        Default is None."
      },
      "CalcInputsContext": {
        "properties": {
          "country": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/CalcInputsContextCountry"
              },
              {
                "type": "null"
              }
            ],
            "description": "Country metadata."
          },
          "dates": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/CalcInputsContextDates"
              },
              {
                "type": "null"
              }
            ],
            "description": "Resolved dates."
          },
          "hts_revision": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/CalcInputsContextHtsRevision"
              },
              {
                "type": "null"
              }
            ],
            "description": "HTS revision metadata."
          },
          "version_selection": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/CalcInputsContextVersionSelection"
              },
              {
                "type": "null"
              }
            ],
            "description": "Version selection details."
          },
          "date_resolution": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/CalcInputsContextDateResolution"
              },
              {
                "type": "null"
              }
            ],
            "description": "Date resolution details."
          }
        },
        "type": "object",
        "title": "CalcInputsContext",
        "description": "Derived metadata associated with the provided inputs."
      },
      "CalcInputsContextCountry": {
        "properties": {
          "country_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Country Name",
            "description": "Full country name."
          },
          "official_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Official Name",
            "description": "Official country name."
          },
          "common_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Common Name",
            "description": "Common country name."
          },
          "country_code": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Country Code",
            "description": "HTS-specific country code."
          },
          "iso_alpha2": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Iso Alpha2",
            "description": "ISO 3166-1 alpha-2 country code."
          },
          "iso_alpha3": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Iso Alpha3",
            "description": "ISO 3166-1 alpha-3 country code."
          },
          "programs": {
            "items": {
              "$ref": "#/components/schemas/CalcInputsContextProgram"
            },
            "type": "array",
            "title": "Programs",
            "description": "Trade programs the country is eligible for."
          },
          "sanction": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Sanction",
            "description": "Sanction status if applicable."
          }
        },
        "type": "object",
        "title": "CalcInputsContextCountry",
        "description": "Normalized country metadata derived from the inputs."
      },
      "CalcInputsContextDateResolution": {
        "properties": {
          "import_date_provided": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Import Date Provided",
            "description": "Import date provided in request (YYYY-MM-DD), or None if not provided"
          },
          "import_date_used": {
            "type": "string",
            "title": "Import Date Used",
            "description": "Import date actually used for calculation (YYYY-MM-DD)"
          },
          "loading_date_provided": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Loading Date Provided",
            "description": "Loading date provided in request (YYYY-MM-DD), or None if not provided"
          },
          "loading_date_used": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Loading Date Used",
            "description": "Loading date used for transit exception checks (YYYY-MM-DD)"
          },
          "defaulting_source": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Defaulting Source",
            "description": "How import_date was derived (e.g., 'explicit', 'today', 'revision_start')"
          },
          "conflicts": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Conflicts",
            "description": "Detected conflicts between date parameters"
          }
        },
        "type": "object",
        "required": [
          "import_date_used"
        ],
        "title": "CalcInputsContextDateResolution",
        "description": "Metadata about how dates were resolved for the calculation.\n\nDocuments which dates were provided vs. derived, and any conflicts detected."
      },
      "CalcInputsContextDates": {
        "properties": {
          "import_date_resolved": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Import Date Resolved",
            "description": "Resolved import date (YYYY-MM-DD)."
          },
          "loading_date_resolved": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Loading Date Resolved",
            "description": "Resolved loading date (YYYY-MM-DD)."
          }
        },
        "type": "object",
        "title": "CalcInputsContextDates",
        "description": "Resolved dates derived from the request."
      },
      "CalcInputsContextHtsRevision": {
        "properties": {
          "hts_year": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Hts Year",
            "description": "HTS revision year used."
          },
          "hts_version": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Hts Version",
            "description": "HTS revision version used."
          },
          "source_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Source Id",
            "description": "Database source ID for the HTS revision."
          }
        },
        "type": "object",
        "title": "CalcInputsContextHtsRevision",
        "description": "Resolved HTS revision metadata used for the calculation."
      },
      "CalcInputsContextProgram": {
        "properties": {
          "code": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Code",
            "description": "Program code (e.g., 'A', 'CA', 'MX')."
          },
          "name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Name",
            "description": "Full program name."
          },
          "abbrev": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Abbrev",
            "description": "Program abbreviation."
          }
        },
        "type": "object",
        "title": "CalcInputsContextProgram",
        "description": "Metadata about a trade program relevant to the country context."
      },
      "CalcInputsContextVersionSelection": {
        "properties": {
          "source_id": {
            "type": "integer",
            "title": "Source Id",
            "description": "Database primary key for the HTS source version"
          },
          "year": {
            "type": "integer",
            "title": "Year",
            "description": "HTS schedule year (e.g., 2025)"
          },
          "version": {
            "type": "integer",
            "title": "Version",
            "description": "HTS schedule version/revision number"
          },
          "effective_start": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Effective Start",
            "description": "Date when this version became effective (YYYY-MM-DD)"
          },
          "release_date": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Release Date",
            "description": "Date when this version was published/released (YYYY-MM-DD)"
          },
          "selection_method": {
            "type": "string",
            "enum": [
              "explicit_override",
              "import_date",
              "hts_date_fallback",
              "default_latest"
            ],
            "title": "Selection Method",
            "description": "Method used to select this HTS version"
          },
          "warnings": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Warnings",
            "description": "Warnings about conflicts or issues detected during selection"
          }
        },
        "type": "object",
        "required": [
          "source_id",
          "year",
          "version",
          "selection_method"
        ],
        "title": "CalcInputsContextVersionSelection",
        "description": "Metadata about which HTS version was selected and how.\n\nProvides transparency into the version selection process for auditability\nand legal compliance documentation."
      },
      "CalcPart": {
        "properties": {
          "duty_advalorem": {
            "type": "number",
            "title": "Duty Advalorem",
            "description": "Ad valorem duty amount in USD for this component."
          },
          "duty_specific": {
            "type": "number",
            "title": "Duty Specific",
            "description": "Specific duty amount in USD for this component."
          },
          "duty_total": {
            "type": "number",
            "title": "Duty Total",
            "description": "Total duty for this component (ad valorem + specific)."
          },
          "htsno": {
            "type": "string",
            "title": "Htsno",
            "description": "HTS code in dotted format (e.g., '7208.10.15')."
          },
          "hts_code": {
            "type": "string",
            "title": "Hts Code",
            "description": "HTS code in undotted format (e.g., '7208101500')."
          },
          "listed_hts_code": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Listed Hts Code",
            "description": "HTS code where this rate is actually listed (may differ for inherited rates)."
          },
          "rate_column": {
            "type": "string",
            "title": "Rate Column",
            "description": "Rate column: 'general', 'special', 'other', or 'additionalDuties'."
          },
          "rate_basis": {
            "type": "string",
            "title": "Rate Basis",
            "description": "Rate calculation basis: 'advalorem', 'specific', 'free', 'reference', or 'fallback'."
          },
          "rate_usage": {
            "type": "string",
            "title": "Rate Usage",
            "description": "How this rate is applied: 'base', 'replace', 'additive', 'subtractive', or 'ignore'."
          },
          "rate_value": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Rate Value",
            "description": "Numeric rate value (0.25 for 25% ad valorem, or specific amount per unit)."
          },
          "uom": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Uom",
            "description": "Unit of measure for specific rates (e.g., 'KG', 'NO')."
          },
          "uom_extra": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Uom Extra",
            "description": "Secondary unit of measure for compound rates."
          },
          "band_params": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Band Params",
            "description": "Parameters for banded/tiered rate calculations."
          },
          "component_text": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Component Text",
            "description": "Human-readable rate text (e.g., '25%', '2.5/kg')."
          },
          "base_text": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Base Text",
            "description": "Original rate text from HTS source."
          },
          "lst_programs": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Lst Programs",
            "description": "Special program indicators (e.g., ['A', 'CA', 'MX'])."
          },
          "lst_hts_refs": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Lst Hts Refs",
            "description": "Related HTS code references."
          },
          "lst_footnotes_hts_refs": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Lst Footnotes Hts Refs",
            "description": "Footnote HTS references."
          },
          "lst_footnotes_text": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Lst Footnotes Text",
            "description": "Footnote text content."
          },
          "warning": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Warning",
            "description": "Warning message if rate has special conditions."
          },
          "match_scenario": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Match Scenario",
            "description": "Scenario that led to this rate selection."
          },
          "conditions": {
            "items": {},
            "type": "array",
            "title": "Conditions",
            "description": "Conditions that apply to this rate component."
          }
        },
        "type": "object",
        "required": [
          "duty_advalorem",
          "duty_specific",
          "duty_total",
          "htsno",
          "hts_code",
          "rate_column",
          "rate_basis",
          "rate_usage"
        ],
        "title": "CalcPart",
        "description": "Individual duty component from a tariff rate calculation.\n\nRepresents one rate component (e.g., general rate, special program rate)\nwith calculated duty amounts and rate metadata."
      },
      "CalcResponse": {
        "properties": {
          "inputs": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/CalcInputs-Output"
              },
              {
                "type": "null"
              }
            ],
            "description": "Echo of normalized input parameters."
          },
          "inputs_context": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/CalcInputsContext"
              },
              {
                "type": "null"
              }
            ],
            "description": "Derived context from inputs (country, dates, HTS revision)."
          },
          "totals": {
            "additionalProperties": {
              "$ref": "#/components/schemas/CalcDutyTotals"
            },
            "type": "object",
            "title": "Totals",
            "description": "Duty totals by category (base, reciprocal, net)."
          },
          "components": {
            "items": {
              "$ref": "#/components/schemas/ComponentLine"
            },
            "type": "array",
            "title": "Components",
            "description": "Material line components. For simple scenarios, contains one line. For composite materials, contains multiple lines (non-material, steel, aluminum)."
          },
          "is_composite": {
            "type": "boolean",
            "title": "Is Composite",
            "description": "True if multiple material lines exist (composite material scenario).",
            "default": false
          },
          "reciprocal": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/ReciprocalResponse"
              },
              {
                "type": "null"
              }
            ],
            "description": "Chapter 99 reciprocal tariff evaluation results."
          },
          "conditional_exemptions": {
            "items": {
              "$ref": "#/components/schemas/ConditionalExemptionResponse"
            },
            "type": "array",
            "title": "Conditional Exemptions",
            "description": "Conditional exemptions that may apply based on product characteristics. To apply these exemptions, resubmit with the rule code in selected_code_conditions. If product_usage is provided, AI evaluation will assess applicability."
          },
          "rules": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/CalcRulesView"
              },
              {
                "type": "null"
              }
            ],
            "description": "Unified view of all applied rules."
          },
          "schema_version": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Schema Version",
            "description": "Response schema version."
          },
          "summary": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/V3Summary"
              },
              {
                "type": "null"
              }
            ],
            "description": "V3 summary block with totals and rates."
          },
          "breakdown": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/V3BreakdownItem"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Breakdown",
            "description": "V3 detailed duty breakdown."
          },
          "adjustment_metadata": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Adjustment Metadata",
            "description": "Rate adjustment details when top-side overrides are applied."
          },
          "trace": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Trace",
            "description": "Calculation trace for debugging."
          },
          "debug": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/CalcDebugPayload"
              },
              {
                "type": "null"
              }
            ],
            "description": "Debug payload when requested."
          },
          "error_message": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Error Message",
            "description": "Error message if calculation failed."
          }
        },
        "type": "object",
        "title": "CalcResponse",
        "description": "Canonical tariff calculation response.",
        "examples": [
          {
            "breakdown": [
              {
                "applies": true,
                "description": "T-shirts, singlets, tank tops (cotton)",
                "id": "base:6109100004:general:i=0",
                "kind": "base",
                "line_seq": 1,
                "percent_of_cost": 0.165,
                "source_ref": {
                  "hts_code": "6109.10.00.04",
                  "rate_column": "general"
                },
                "totals": {
                  "percent_based": 165.0,
                  "total": 165.0,
                  "unit_based": 0.0
                }
              },
              {
                "applies": true,
                "description": "China/Hong Kong reciprocal tariff",
                "id": "repl:9903.01.24",
                "kind": "reciprocal",
                "line_seq": 2,
                "percent_of_cost": 0.1,
                "source_ref": {
                  "rule_code": "9903.01.24"
                },
                "totals": {
                  "percent_based": 100.0,
                  "total": 100.0,
                  "unit_based": 0.0
                }
              },
              {
                "applies": true,
                "description": "Universal reciprocal tariff",
                "id": "repl:9903.01.25",
                "kind": "reciprocal",
                "line_seq": 3,
                "percent_of_cost": 0.1,
                "source_ref": {
                  "rule_code": "9903.01.25"
                },
                "totals": {
                  "percent_based": 100.0,
                  "total": 100.0,
                  "unit_based": 0.0
                }
              },
              {
                "applies": true,
                "description": "Section 301 China tariff (List 4A)",
                "id": "repl:9903.88.15",
                "kind": "reciprocal",
                "line_seq": 4,
                "percent_of_cost": 0.075,
                "source_ref": {
                  "rule_code": "9903.88.15"
                },
                "totals": {
                  "percent_based": 75.0,
                  "total": 75.0,
                  "unit_based": 0.0
                }
              },
              {
                "applies": true,
                "description": "Net total (base + reciprocal)",
                "id": "total:net",
                "kind": "total",
                "line_seq": 5,
                "percent_of_cost": 0.44,
                "totals": {
                  "percent_based": 440.0,
                  "total": 440.0,
                  "unit_based": 0.0
                }
              }
            ],
            "components": [
              {
                "line_country": "CN",
                "line_number": 1,
                "line_percent": 100.0,
                "line_total_duty": 440.0,
                "line_value": 1000.0,
                "rules": [
                  {
                    "description": "T-shirts, singlets, tank tops and similar garments, knitted or crocheted",
                    "duty_advalorem": 165.0,
                    "duty_specific": 0.0,
                    "duty_total": 165.0,
                    "hts_code": "6109.10.00.04",
                    "listed_hts_code": "6109.10.00.00",
                    "listed_rate_text": "16.5%",
                    "programs": [],
                    "rate_basis": "advalorem",
                    "rate_column": "general",
                    "rate_usage": "base",
                    "rate_value": 0.165
                  },
                  {
                    "description": "China/Hong Kong reciprocal tariff",
                    "duty_advalorem": 100.0,
                    "duty_total": 100.0,
                    "hts_code": "9903.01.24",
                    "listed_rate_text": "10%",
                    "rate_basis": "advalorem",
                    "rate_column": "general",
                    "rate_usage": "additional",
                    "rate_value": 0.1
                  },
                  {
                    "description": "Universal reciprocal tariff",
                    "duty_advalorem": 100.0,
                    "duty_total": 100.0,
                    "hts_code": "9903.01.25",
                    "listed_rate_text": "10%",
                    "rate_basis": "advalorem",
                    "rate_column": "general",
                    "rate_usage": "additional",
                    "rate_value": 0.1
                  },
                  {
                    "description": "Section 301 China tariff (List 4A)",
                    "duty_advalorem": 75.0,
                    "duty_total": 75.0,
                    "hts_code": "9903.88.15",
                    "listed_rate_text": "7.5%",
                    "rate_basis": "advalorem",
                    "rate_column": "general",
                    "rate_usage": "additional",
                    "rate_value": 0.075
                  }
                ]
              }
            ],
            "conditional_exemptions": [],
            "inputs": {
              "admitted_to_ftz": false,
              "cost": 1000.0,
              "country_of_origin": "CN",
              "currency_code": "USD",
              "hts_code": "6109100004",
              "import_date": "2025-11-28",
              "include_rules_view": true,
              "is_civil_aircraft": false,
              "is_donation": false,
              "is_informational": false,
              "is_personal_baggage": false,
              "loading_date": "2025-11-28",
              "materials": [],
              "program_qualified": true,
              "qty": 1000.0,
              "qty_uom": "NO",
              "reciprocal": true,
              "usmca_claim": false
            },
            "inputs_context": {
              "country": {
                "common_name": "china",
                "country_code": "156",
                "country_name": "people's republic of china",
                "iso_alpha2": "cn",
                "iso_alpha3": "chn",
                "official_name": "people's republic of china",
                "programs": [
                  {
                    "abbrev": "c",
                    "code": "c",
                    "name": "Agreement on Trade in Civil Aircraft"
                  }
                ]
              },
              "dates": {
                "import_date_resolved": "2025-11-28",
                "loading_date_resolved": "2025-11-28"
              },
              "hts_revision": {
                "hts_version": 31,
                "hts_year": 2025,
                "source_id": 12
              },
              "version_selection": {
                "effective_start": "2025-11-28",
                "release_date": "2025-11-28",
                "selection_method": "import_date",
                "source_id": 12,
                "version": 31,
                "warnings": [],
                "year": 2025
              }
            },
            "is_composite": false,
            "reciprocal": {
              "conditional_exemptions": [],
              "context": {
                "base_ad_valorem_rate": 0.165,
                "country_of_origin": "CN",
                "hts_code": "6109100004",
                "import_date": "2025-11-28",
                "quantity": 1000.0,
                "rate_column": "general",
                "value": 1000.0
              },
              "rules": [
                {
                  "additional_duty_rate": 0.1,
                  "applies": true,
                  "computed_amount": 100.0,
                  "description": "China/Hong Kong reciprocal tariff",
                  "rule_code": "9903.01.24"
                },
                {
                  "additional_duty_rate": 0.1,
                  "applies": true,
                  "computed_amount": 100.0,
                  "description": "Universal reciprocal tariff",
                  "rule_code": "9903.01.25"
                },
                {
                  "additional_duty_rate": 0.075,
                  "applies": true,
                  "computed_amount": 75.0,
                  "description": "Section 301 China tariff (List 4A)",
                  "rule_code": "9903.88.15"
                }
              ],
              "totals": {
                "additional_duty_amount": 275.0,
                "additional_rate": 0.275
              }
            },
            "rules": {
              "base": [
                {
                  "code": "6109100004",
                  "computed_amount": 165.0,
                  "description": "16.5%",
                  "id": "base:6109100004:general:i=0",
                  "rate_basis": "advalorem",
                  "rate_column": "general",
                  "rate_value": 0.165,
                  "source": "schedule",
                  "type": "base"
                }
              ],
              "reciprocal": [
                {
                  "applies": true,
                  "code": "9903.01.24",
                  "computed_amount": 100.0,
                  "description": "China/Hong Kong reciprocal tariff",
                  "rate_basis": "advalorem",
                  "rate_value": 0.1,
                  "type": "reciprocal"
                },
                {
                  "applies": true,
                  "code": "9903.01.25",
                  "computed_amount": 100.0,
                  "description": "Universal reciprocal tariff",
                  "rate_basis": "advalorem",
                  "rate_value": 0.1,
                  "type": "reciprocal"
                },
                {
                  "applies": true,
                  "code": "9903.88.15",
                  "computed_amount": 75.0,
                  "description": "Section 301 China tariff (List 4A)",
                  "rate_basis": "advalorem",
                  "rate_value": 0.075,
                  "type": "reciprocal"
                }
              ]
            },
            "schema_version": "3.0",
            "summary": {
              "cargo_value": {
                "amount": 1000.0,
                "currency": "USD",
                "qty_uom": "NO",
                "quantity": 1000.0
              },
              "currency_code": "USD",
              "duty_totals": {
                "base": {
                  "percent_based": 165.0,
                  "total": 165.0,
                  "unit_based": 0.0
                },
                "net": {
                  "percent_based": 440.0,
                  "total": 440.0,
                  "unit_based": 0.0
                },
                "reciprocal": {
                  "percent_based": 275.0,
                  "total": 275.0,
                  "unit_based": 0.0
                }
              },
              "effective_rates": {
                "base": {
                  "percent_based": 0.165,
                  "total": 0.165,
                  "unit_based": 0.0
                },
                "net": {
                  "percent_based": 0.44,
                  "total": 0.44,
                  "unit_based": 0.0
                },
                "reciprocal": {
                  "percent_based": 0.275,
                  "total": 0.275,
                  "unit_based": 0.0
                }
              },
              "flags": {
                "calculation_methods": [
                  "simple"
                ],
                "has_quota": false,
                "has_reciprocal": true
              },
              "valuation_basis": {
                "amount": 1000.0,
                "currency": "USD",
                "label": "declared_value",
                "notes": []
              }
            },
            "totals": {
              "base": {
                "ad_valorem": 165.0,
                "specific": 0.0,
                "total": 165.0
              },
              "net": {
                "ad_valorem": 440.0,
                "specific": 0.0,
                "total": 440.0
              },
              "reciprocal": {
                "ad_valorem": 275.0,
                "specific": 0.0,
                "total": 275.0
              }
            }
          }
        ]
      },
      "CalcRuleItem": {
        "properties": {
          "type": {
            "type": "string",
            "enum": [
              "base",
              "reciprocal"
            ],
            "title": "Type",
            "description": "Rule type: 'base' for standard tariff rates, 'reciprocal' for Chapter 99 additional duties."
          },
          "code": {
            "type": "string",
            "title": "Code",
            "description": "HTS code or Chapter 99 provision code (e.g., '7208.10.15' or '9903.88.03')."
          },
          "id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Id",
            "description": "Unique identifier for this rule instance."
          },
          "breakdown_ref": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Breakdown Ref",
            "description": "Reference to detailed breakdown in the breakdown array."
          },
          "rate_column": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Rate Column",
            "description": "Rate column: 'general', 'special', or 'other'."
          },
          "rate_basis": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Rate Basis",
            "description": "Rate calculation basis: 'advalorem', 'specific', 'free', etc."
          },
          "rate_value": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Rate Value",
            "description": "Numeric rate value (0.25 for 25%)."
          },
          "computed_amount": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Computed Amount",
            "description": "Calculated duty amount in USD from this rule."
          },
          "description": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Description",
            "description": "Human-readable description of the rule."
          },
          "source": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Source",
            "description": "Source of the rule (e.g., 'HTS', 'IEEPA', 'Section 301')."
          },
          "references": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/CalcRuleReferences"
              },
              {
                "type": "null"
              }
            ],
            "description": "Cross-references supporting this rule selection."
          },
          "related_99_codes": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Related 99 Codes",
            "description": "Related Chapter 99 codes affecting this rule."
          },
          "applies": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Applies",
            "description": "Whether this rule applies to the current calculation."
          },
          "calculation_method": {
            "anyOf": [
              {
                "type": "string",
                "enum": [
                  "simple",
                  "mixed",
                  "banded",
                  "quota_cap",
                  "other",
                  "unknown"
                ]
              },
              {
                "type": "null"
              }
            ],
            "title": "Calculation Method",
            "description": "Method used for rate calculation."
          }
        },
        "type": "object",
        "required": [
          "type",
          "code"
        ],
        "title": "CalcRuleItem",
        "description": "Unified representation of an applied base or reciprocal rule.\n\nRepresents a single rule (base tariff rate or Chapter 99 reciprocal tariff)\nthat contributes to the total duty calculation."
      },
      "CalcRuleReferences": {
        "properties": {
          "hts_refs": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Hts Refs",
            "description": "Related HTS code references."
          },
          "footnotes_hts_refs": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Footnotes Hts Refs",
            "description": "Footnote HTS references."
          },
          "footnotes_text": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Footnotes Text",
            "description": "Footnote text content."
          }
        },
        "type": "object",
        "title": "CalcRuleReferences",
        "description": "Cross references that support a base rule selection."
      },
      "CalcRulesView": {
        "properties": {
          "base": {
            "items": {
              "$ref": "#/components/schemas/CalcRuleItem"
            },
            "type": "array",
            "title": "Base",
            "description": "Base tariff rules that were applied."
          },
          "reciprocal": {
            "items": {
              "$ref": "#/components/schemas/CalcRuleItem"
            },
            "type": "array",
            "title": "Reciprocal",
            "description": "Chapter 99 reciprocal rules that were applied."
          }
        },
        "type": "object",
        "title": "CalcRulesView",
        "description": "Parallel collections of the applied base and reciprocal rules."
      },
      "CalcSupport": {
        "properties": {
          "selection_reason": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Selection Reason",
            "description": "Reason for selecting this rate."
          },
          "matching_condition": {
            "anyOf": [
              {},
              {
                "type": "null"
              }
            ],
            "title": "Matching Condition",
            "description": "Condition that matched for rate selection."
          },
          "applicable_rates": {
            "items": {},
            "type": "array",
            "title": "Applicable Rates",
            "description": "All rates that were applicable."
          },
          "selected_rates": {
            "items": {},
            "type": "array",
            "title": "Selected Rates",
            "description": "Rates that were selected for calculation."
          }
        },
        "type": "object",
        "title": "CalcSupport",
        "description": "Supporting details for rate selection logic."
      },
      "ChatCitation": {
        "properties": {
          "type": {
            "type": "string",
            "enum": [
              "hts_code",
              "note",
              "ch99_rule",
              "country",
              "program"
            ],
            "title": "Type",
            "description": "Type of source being cited"
          },
          "id": {
            "type": "string",
            "title": "Id",
            "description": "Identifier for the source",
            "examples": [
              "7208.10.15",
              "72::c:72:us_note:2",
              "9903.80.01"
            ]
          },
          "label": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Label",
            "description": "Human-readable label for display"
          },
          "nav_link": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Nav Link",
            "description": "Frontend navigation link to the source"
          }
        },
        "type": "object",
        "required": [
          "type",
          "id"
        ],
        "title": "ChatCitation",
        "description": "A source citation for information in the response.\n\nAllows users to verify the AI's claims by linking to specific\ndatabase records."
      },
      "ChatContext": {
        "properties": {
          "hts_code": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Hts Code",
            "description": "HTS code currently being viewed (e.g., '7208.10.15')",
            "examples": [
              "7208.10.15",
              "9903.88.03"
            ]
          },
          "chapter_number": {
            "anyOf": [
              {
                "type": "integer",
                "maximum": 99.0,
                "minimum": 1.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Chapter Number",
            "description": "Chapter number (1-99)"
          },
          "subchapter_number": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Subchapter Number",
            "description": "Subchapter number (primarily for Ch 98/99)"
          },
          "section_number": {
            "anyOf": [
              {
                "type": "integer",
                "maximum": 22.0,
                "minimum": 1.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Section Number",
            "description": "Section number (1-22)"
          },
          "country_of_origin": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Country Of Origin",
            "description": "Country of origin if selected",
            "examples": [
              "China",
              "CN",
              "Mexico",
              "MX"
            ]
          },
          "viewing_tab": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Viewing Tab",
            "description": "Current tab in the UI",
            "examples": [
              "schedule",
              "notes",
              "rates",
              "ch99_rules"
            ]
          },
          "note_unique_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Note Unique Id",
            "description": "Specific note being viewed",
            "examples": [
              "72::c:72:us_note:2"
            ]
          }
        },
        "type": "object",
        "title": "ChatContext",
        "description": "Current viewing context from the frontend.\n\nProvides the AI with awareness of what the user is currently looking at\nso it can give contextually relevant answers without requiring the user\nto repeat information."
      },
      "ChatMessage": {
        "properties": {
          "role": {
            "$ref": "#/components/schemas/MessageRole",
            "description": "Message sender role"
          },
          "content": {
            "type": "string",
            "title": "Content",
            "description": "Message content"
          },
          "timestamp": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Timestamp",
            "description": "When the message was created"
          }
        },
        "type": "object",
        "required": [
          "role",
          "content"
        ],
        "title": "ChatMessage",
        "description": "A single message in a conversation."
      },
      "ChatRequest": {
        "properties": {
          "message": {
            "type": "string",
            "maxLength": 2000,
            "minLength": 1,
            "title": "Message",
            "description": "User's question or message"
          },
          "context": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/ChatContext"
              },
              {
                "type": "null"
              }
            ],
            "description": "Current viewing context from the frontend"
          },
          "conversation_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Conversation Id",
            "description": "ID for continuing a conversation (for future multi-turn support)"
          },
          "history": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/ChatMessage"
                },
                "type": "array",
                "maxItems": 20
              },
              {
                "type": "null"
              }
            ],
            "title": "History",
            "description": "Previous messages in this conversation (max 20)"
          },
          "hts_year": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Hts Year",
            "description": "HTS revision year to use"
          },
          "hts_version": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Hts Version",
            "description": "HTS revision version to use"
          }
        },
        "type": "object",
        "required": [
          "message"
        ],
        "title": "ChatRequest",
        "description": "Request payload for the chat endpoint.\n\nSupports both single-turn questions and multi-turn conversations\nthrough the conversation_id and history fields."
      },
      "ChatResponse": {
        "properties": {
          "response": {
            "type": "string",
            "title": "Response",
            "description": "AI assistant's response to the user's question"
          },
          "citations": {
            "items": {
              "$ref": "#/components/schemas/ChatCitation"
            },
            "type": "array",
            "title": "Citations",
            "description": "Sources cited in the response"
          },
          "tools_called": {
            "items": {
              "$ref": "#/components/schemas/ChatToolCall"
            },
            "type": "array",
            "title": "Tools Called",
            "description": "Tools that were called to generate the response"
          },
          "context_used": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/ChatContext"
              },
              {
                "type": "null"
              }
            ],
            "description": "Context that was used for this response"
          },
          "model": {
            "type": "string",
            "title": "Model",
            "description": "OpenAI model used for generation",
            "default": "gpt-4o"
          },
          "total_tokens": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Total Tokens",
            "description": "Total tokens used (prompt + completion)"
          },
          "latency_ms": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Latency Ms",
            "description": "Total response time in milliseconds"
          },
          "disclaimer": {
            "type": "string",
            "title": "Disclaimer",
            "description": "Legal disclaimer",
            "default": "This response is AI-generated for informational purposes only and does not constitute legal, tax, or professional advice. Always verify tariff classifications and duty rates with official sources or a licensed customs broker."
          }
        },
        "type": "object",
        "required": [
          "response"
        ],
        "title": "ChatResponse",
        "description": "Response payload from the chat endpoint.\n\nIncludes the AI's response along with metadata about how\nthe response was generated for transparency and verification.",
        "example": {
          "citations": [
            {
              "id": "7208.10.15",
              "label": "Hot-rolled steel",
              "type": "hts_code"
            },
            {
              "id": "9903.80.01",
              "label": "Section 232 Steel",
              "type": "ch99_rule"
            }
          ],
          "latency_ms": 1250.5,
          "model": "gpt-4o",
          "response": "For HTS 7208.10.15 (Hot-rolled steel) imported from China...",
          "tools_called": [
            {
              "arguments": {
                "hts_code": "7208.10.15"
              },
              "tool_name": "get_hts_code_details"
            }
          ]
        }
      },
      "ChatToolCall": {
        "properties": {
          "tool_name": {
            "type": "string",
            "title": "Tool Name",
            "description": "Name of the tool that was called"
          },
          "arguments": {
            "additionalProperties": true,
            "type": "object",
            "title": "Arguments",
            "description": "Arguments passed to the tool"
          },
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "Whether the tool call succeeded",
            "default": true
          },
          "error": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Error",
            "description": "Error message if failed"
          }
        },
        "type": "object",
        "required": [
          "tool_name"
        ],
        "title": "ChatToolCall",
        "description": "Record of a tool call made during response generation."
      },
      "ComponentLine": {
        "properties": {
          "line_number": {
            "type": "integer",
            "title": "Line Number",
            "description": "Sequential line number (1, 2, 3...)"
          },
          "line_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Line Name",
            "description": "Material type: 'non-material', 'steel', 'aluminum', or null for simple scenarios"
          },
          "line_value": {
            "type": "number",
            "title": "Line Value",
            "description": "Declared value for this material portion (portion of total customs value)"
          },
          "line_percent": {
            "type": "number",
            "title": "Line Percent",
            "description": "Percentage of total value (0-100)"
          },
          "line_country": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Line Country",
            "description": "Country used for this line evaluation (pour/smelt for materials, origin for non-material)"
          },
          "line_total_duty": {
            "type": "number",
            "title": "Line Total Duty",
            "description": "Total duty for this line only (sum of all rules in this line)",
            "default": 0.0
          },
          "rules": {
            "items": {
              "$ref": "#/components/schemas/CalcBaseComponent"
            },
            "type": "array",
            "title": "Rules",
            "description": "Duty components (rules) that apply to this material line"
          }
        },
        "type": "object",
        "required": [
          "line_number",
          "line_value",
          "line_percent"
        ],
        "title": "ComponentLine",
        "description": "Represents a material-specific evaluation line for composite material scenarios.\n\nFor simple scenarios (no composite materials), there will be one line with line_name=None.\nFor composite scenarios (e.g., 30% steel, 70% other), there will be multiple lines,\none for each material portion.\n\nEach line contains:\n- Metadata about the material portion (value, percent, country)\n- List of duty components that apply to this portion\n- Total duty for this line only"
      },
      "ConditionalExemptionResponse": {
        "properties": {
          "rule_code": {
            "type": "string",
            "title": "Rule Code",
            "description": "The 99 code of the conditional exemption rule (e.g., '9903.02.78')."
          },
          "is_selected": {
            "type": "boolean",
            "title": "Is Selected",
            "description": "True if user explicitly confirmed this exemption via selected_code_conditions.",
            "default": false
          },
          "note_unique_id": {
            "type": "string",
            "title": "Note Unique Id",
            "description": "The unique ID of the source note (e.g., '99:3:c:99:us_note:2:v:iii:b').",
            "default": ""
          },
          "note_text": {
            "type": "string",
            "title": "Note Text",
            "description": "The full text of the note describing the conditional requirement."
          },
          "matched_hts_pattern": {
            "type": "string",
            "title": "Matched Hts Pattern",
            "description": "The HTS pattern from the note that matched the input HTS code."
          },
          "would_exclude": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Would Exclude",
            "description": "List of rule codes that would be excluded if this exemption is confirmed."
          },
          "ai_evaluation": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/AiEvaluationResponse"
              },
              {
                "type": "null"
              }
            ],
            "description": "AI assessment of product_usage against note_text. Only populated when product_usage is provided."
          }
        },
        "type": "object",
        "required": [
          "rule_code",
          "note_text",
          "matched_hts_pattern"
        ],
        "title": "ConditionalExemptionResponse",
        "description": "A conditional exemption that may apply based on product characteristics.\n\nThese exemptions require user confirmation or AI evaluation to determine\nif the product matches the specific requirements in the note text."
      },
      "CountryRecord": {
        "properties": {
          "country_name": {
            "type": "string",
            "title": "Country Name",
            "description": "ISO 3166 short name used as canonical identifier."
          },
          "official_name": {
            "type": "string",
            "title": "Official Name",
            "description": "Formal or constitutional country name, when different."
          },
          "common_name": {
            "type": "string",
            "title": "Common Name",
            "description": "Common or colloquial country name."
          },
          "country_code": {
            "type": "string",
            "title": "Country Code",
            "description": "Numeric ISO3166 country code."
          },
          "iso_alpha2": {
            "type": "string",
            "title": "Iso Alpha2",
            "description": "Alpha-2 code."
          },
          "iso_alpha3": {
            "type": "string",
            "title": "Iso Alpha3",
            "description": "Alpha-3 code."
          },
          "programs": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Programs",
            "description": "Eligible trade programs."
          },
          "sanction": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Sanction",
            "description": "Sanction type, if any."
          },
          "aliases": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Aliases",
            "description": "All normalized identifiers associated with the country, including ISO codes, numeric codes, common names, and known variations."
          }
        },
        "type": "object",
        "required": [
          "country_name",
          "official_name",
          "common_name",
          "country_code",
          "iso_alpha2",
          "iso_alpha3"
        ],
        "title": "CountryRecord",
        "description": "Represents a country record with detailed standardized data.\n\nEncapsulates information about a country including its name, ISO 3166-1 codes,\nassociated trade programs, and potential sanctions. This model is used to unify\nand cleanly structure country-related data for applications requiring such\nstandardized information.\n\nAttributes:\n    country_name (str): The ISO 3166 official short name (e.g., 'united states of america').\n    official_name (str): The formal or constitutional name when provided (e.g., 'united states of america').\n    common_name (str): A commonly used short name (e.g., 'united states').\n    country_code (str): The 3-digit ISO 3166-1 numeric country code (e.g., '840').\n    iso_alpha2 (str): The 2-letter ISO 3166-1 alpha-2 country code (e.g., 'us').\n    iso_alpha3 (str): The 3-letter ISO 3166-1 alpha-3 country code (e.g., 'usa').\n    programs (Optional[List[str]]): A list of special trade program codes applicable to the country (e.g., ['S', 'C']). Default is an empty list.\n    sanction (Optional[str]): The type of sanction applied to the country, if any (e.g., 'Full'). Default is None.",
        "examples": [
          {
            "aliases": [
              "cn",
              "chn",
              "156",
              "china",
              "people's republic of china"
            ],
            "common_name": "china",
            "country_code": "156",
            "country_name": "china",
            "iso_alpha2": "CN",
            "iso_alpha3": "CHN",
            "official_name": "people's republic of china",
            "programs": []
          }
        ]
      },
      "DocumentIndexItem": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id",
            "description": "Unique identifier (e.g., 'int:01', 'gen:11', 'apx:01')"
          },
          "alias": {
            "type": "string",
            "title": "Alias",
            "description": "Document alias (e.g., 'cover', 'general_note_11')"
          },
          "title": {
            "type": "string",
            "title": "Title",
            "description": "Human-readable title"
          },
          "doc_type": {
            "type": "string",
            "title": "Doc Type",
            "description": "Document type classification"
          },
          "has_content": {
            "type": "boolean",
            "title": "Has Content",
            "description": "Whether content is available",
            "default": true
          }
        },
        "type": "object",
        "required": [
          "id",
          "alias",
          "title",
          "doc_type"
        ],
        "title": "DocumentIndexItem",
        "description": "A single item in a document segment (intro, general note, appendix)."
      },
      "DocumentIndexSchedule": {
        "properties": {
          "label": {
            "type": "string",
            "title": "Label",
            "description": "Segment label.",
            "default": "Tariff Schedule"
          },
          "segment_code": {
            "type": "string",
            "title": "Segment Code",
            "description": "Segment code.",
            "default": "sch"
          },
          "sections": {
            "items": {
              "$ref": "#/components/schemas/DocumentIndexScheduleSection"
            },
            "type": "array",
            "title": "Sections",
            "description": "List of sections in the schedule."
          },
          "total_chapters": {
            "type": "integer",
            "title": "Total Chapters",
            "description": "Total chapters across all sections.",
            "default": 0
          }
        },
        "type": "object",
        "title": "DocumentIndexSchedule",
        "description": "The schedule (main tariff content) portion of the document index."
      },
      "DocumentIndexScheduleChapter": {
        "properties": {
          "chapter_number": {
            "type": "integer",
            "title": "Chapter Number",
            "description": "Chapter number (1-99)"
          },
          "chapter_id": {
            "type": "string",
            "title": "Chapter Id",
            "description": "Chapter identifier (e.g., 'chapter_1')"
          },
          "chapter_label": {
            "type": "string",
            "title": "Chapter Label",
            "description": "Human-readable chapter name"
          },
          "has_subchapters": {
            "type": "boolean",
            "title": "Has Subchapters",
            "description": "Whether chapter has subchapters (Ch 98/99)",
            "default": false
          },
          "subchapter_count": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Subchapter Count",
            "description": "Number of subchapters"
          }
        },
        "type": "object",
        "required": [
          "chapter_number",
          "chapter_id",
          "chapter_label"
        ],
        "title": "DocumentIndexScheduleChapter",
        "description": "A chapter within the schedule section of the document index."
      },
      "DocumentIndexScheduleSection": {
        "properties": {
          "section_number": {
            "type": "integer",
            "title": "Section Number",
            "description": "Section number (1-22)."
          },
          "section_id": {
            "type": "string",
            "title": "Section Id",
            "description": "Section identifier (e.g., 'section_1')."
          },
          "section_label": {
            "type": "string",
            "title": "Section Label",
            "description": "Human-readable section name."
          },
          "chapter_range": {
            "type": "string",
            "title": "Chapter Range",
            "description": "Chapter range (e.g., '1-5')."
          },
          "chapters": {
            "items": {
              "$ref": "#/components/schemas/DocumentIndexScheduleChapter"
            },
            "type": "array",
            "title": "Chapters",
            "description": "List of chapters in this section."
          }
        },
        "type": "object",
        "required": [
          "section_number",
          "section_id",
          "section_label",
          "chapter_range"
        ],
        "title": "DocumentIndexScheduleSection",
        "description": "A section within the schedule portion of the document index."
      },
      "DocumentIndexSegment": {
        "properties": {
          "label": {
            "type": "string",
            "title": "Label",
            "description": "Human-readable segment label."
          },
          "segment_code": {
            "type": "string",
            "title": "Segment Code",
            "description": "Segment code (int, gen, apx)."
          },
          "items": {
            "items": {
              "$ref": "#/components/schemas/DocumentIndexItem"
            },
            "type": "array",
            "title": "Items",
            "description": "List of documents in this segment."
          },
          "item_count": {
            "type": "integer",
            "title": "Item Count",
            "description": "Number of items in this segment.",
            "default": 0
          }
        },
        "type": "object",
        "required": [
          "label",
          "segment_code"
        ],
        "title": "DocumentIndexSegment",
        "description": "A segment of the document index (intro, general_notes, appendices)."
      },
      "DocumentRelatedItem": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id",
            "description": "Related document ID"
          },
          "title": {
            "type": "string",
            "title": "Title",
            "description": "Related document title"
          },
          "position": {
            "type": "string",
            "enum": [
              "previous",
              "next"
            ],
            "title": "Position",
            "description": "Relative position"
          }
        },
        "type": "object",
        "required": [
          "id",
          "title",
          "position"
        ],
        "title": "DocumentRelatedItem",
        "description": "A related document for navigation."
      },
      "EndpointAggregation": {
        "properties": {
          "endpoint_template": {
            "type": "string",
            "title": "Endpoint Template",
            "description": "FastAPI route template path (e.g. '/rates/entry')."
          },
          "total_requests": {
            "type": "integer",
            "title": "Total Requests",
            "description": "Total number of requests to this endpoint in the period."
          },
          "total_credits": {
            "type": "integer",
            "title": "Total Credits",
            "description": "Sum of credits_charged across all requests to this endpoint."
          },
          "denied_requests": {
            "type": "integer",
            "title": "Denied Requests",
            "description": "Number of requests that were denied (was_denied=true) due to hard-stop enforcement."
          },
          "avg_latency_ms": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Avg Latency Ms",
            "description": "Average request latency in milliseconds, rounded to 1 decimal place."
          },
          "p50_latency_ms": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "P50 Latency Ms",
            "description": "Median (50th percentile) latency in ms. PostgreSQL only; null on SQLite."
          },
          "p95_latency_ms": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "P95 Latency Ms",
            "description": "95th percentile latency in ms. PostgreSQL only; null on SQLite."
          },
          "p99_latency_ms": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "P99 Latency Ms",
            "description": "99th percentile latency in ms. PostgreSQL only; null on SQLite."
          }
        },
        "type": "object",
        "required": [
          "endpoint_template",
          "total_requests",
          "total_credits",
          "denied_requests"
        ],
        "title": "EndpointAggregation",
        "description": "Aggregated request and latency metrics for a single API endpoint template.\n\nEach entry represents one distinct endpoint_template (e.g. /rates/entry,\n/rates/multicountry) with totals and latency percentiles for the period."
      },
      "FlushMeterEventsRequest": {
        "properties": {
          "subscription_id": {
            "type": "integer",
            "title": "Subscription Id"
          }
        },
        "type": "object",
        "required": [
          "subscription_id"
        ],
        "title": "FlushMeterEventsRequest",
        "description": "Request for the flush-meter-events endpoint."
      },
      "FlushMeterEventsResponse": {
        "properties": {
          "subscription_id": {
            "type": "integer",
            "title": "Subscription Id"
          },
          "reports": {
            "items": {
              "$ref": "#/components/schemas/FlushReportItem"
            },
            "type": "array",
            "title": "Reports"
          },
          "total_credits_reported": {
            "type": "integer",
            "title": "Total Credits Reported"
          },
          "errors": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Errors",
            "default": []
          }
        },
        "type": "object",
        "required": [
          "subscription_id",
          "reports",
          "total_credits_reported"
        ],
        "title": "FlushMeterEventsResponse",
        "description": "Response from the flush-meter-events endpoint."
      },
      "FlushReportItem": {
        "properties": {
          "counter_id": {
            "type": "integer",
            "title": "Counter Id"
          },
          "period_start": {
            "type": "string",
            "format": "date-time",
            "title": "Period Start"
          },
          "request_source": {
            "type": "string",
            "title": "Request Source"
          },
          "credits_reported": {
            "type": "integer",
            "title": "Credits Reported"
          },
          "stripe_event_id": {
            "type": "string",
            "title": "Stripe Event Id"
          },
          "stripe_event_timestamp": {
            "type": "string",
            "format": "date-time",
            "title": "Stripe Event Timestamp"
          },
          "events_backfilled": {
            "type": "integer",
            "title": "Events Backfilled"
          }
        },
        "type": "object",
        "required": [
          "counter_id",
          "period_start",
          "request_source",
          "credits_reported",
          "stripe_event_id",
          "stripe_event_timestamp",
          "events_backfilled"
        ],
        "title": "FlushReportItem",
        "description": "Details of a single counter's report in the flush response."
      },
      "GiqCapabilitiesResponse": {
        "properties": {
          "entities": {
            "items": {
              "$ref": "#/components/schemas/GiqCapabilityItem"
            },
            "type": "array",
            "title": "Entities",
            "description": "Extracted capabilities."
          }
        },
        "type": "object",
        "title": "GiqCapabilitiesResponse"
      },
      "GiqCapabilityItem": {
        "properties": {
          "capability": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Capability",
            "description": "Capability or product term."
          },
          "category": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Category",
            "description": "Capability category."
          },
          "description": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Description",
            "description": "Capability description."
          },
          "count": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Count",
            "description": "Frequency count from GIQ."
          },
          "distance": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Distance",
            "description": "Similarity distance score."
          },
          "id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Id",
            "description": "GIQ capability identifier."
          }
        },
        "type": "object",
        "title": "GiqCapabilityItem"
      },
      "GiqFacetResponse": {
        "properties": {
          "facets": {
            "items": {
              "additionalProperties": true,
              "type": "object"
            },
            "type": "array",
            "title": "Facets",
            "description": "Facet entries from GIQ."
          }
        },
        "type": "object",
        "title": "GiqFacetResponse"
      },
      "GiqFiltersResponse": {
        "properties": {
          "entities": {
            "items": {
              "additionalProperties": true,
              "type": "object"
            },
            "type": "array",
            "title": "Entities",
            "description": "Filter facet entities."
          }
        },
        "type": "object",
        "title": "GiqFiltersResponse"
      },
      "GiqNaicsItem": {
        "properties": {
          "count": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Count",
            "description": "Entity count."
          },
          "code": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Code",
            "description": "NAICS code."
          },
          "short_code": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Short Code",
            "description": "Short NAICS code representation."
          },
          "level": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Level",
            "description": "Hierarchy level."
          },
          "title": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Title",
            "description": "NAICS title."
          }
        },
        "type": "object",
        "title": "GiqNaicsItem"
      },
      "GiqNaicsResponse": {
        "properties": {
          "entities": {
            "items": {
              "$ref": "#/components/schemas/GiqNaicsItem"
            },
            "type": "array",
            "title": "Entities",
            "description": "NAICS classifications."
          }
        },
        "type": "object",
        "title": "GiqNaicsResponse"
      },
      "GiqNewsListResponse": {
        "properties": {
          "type": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Type",
            "description": "GIQ response type identifier."
          },
          "count": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Count",
            "description": "Number of articles returned."
          },
          "total_count": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Total Count",
            "description": "Total articles available."
          },
          "entities": {
            "items": {
              "additionalProperties": true,
              "type": "object"
            },
            "type": "array",
            "title": "Entities",
            "description": "News article entities."
          }
        },
        "type": "object",
        "title": "GiqNewsListResponse"
      },
      "GiqNewsSearchParams": {
        "properties": {
          "exact_phrase": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Exact Phrase",
            "description": "Exact phrase to prioritize in AI search."
          },
          "best_match": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Best Match",
            "description": "Best-match keywords or phrases."
          },
          "exclusions": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Exclusions",
            "description": "Words or phrases to exclude."
          },
          "duration": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Duration",
            "description": "Maximum article age (e.g., '7d', '30d')."
          },
          "categories": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Categories",
            "description": "News categories to include."
          },
          "person": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Person",
            "description": "People to include in the search."
          },
          "thing": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Thing",
            "description": "Things/topics to include in the search."
          },
          "publisher_region": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Publisher Region",
            "description": "Publisher regions to include."
          }
        },
        "type": "object",
        "title": "GiqNewsSearchParams"
      },
      "GiqNewsSearchRequest": {
        "properties": {
          "keyword": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Keyword",
            "description": "Keyword to include in the news search."
          },
          "max_article_age": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Max Article Age",
            "description": "Maximum article age (e.g., '7d', '30d').",
            "default": "7d"
          },
          "news_categories": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "News Categories",
            "description": "News categories to filter by."
          },
          "person": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Person",
            "description": "People to include in the search."
          },
          "thing": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Thing",
            "description": "Things/topics to include in the search."
          },
          "publisher_region": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Publisher Region",
            "description": "Publisher regions to include."
          }
        },
        "type": "object",
        "title": "GiqNewsSearchRequest"
      },
      "GiqOrgFacetType": {
        "type": "string",
        "enum": [
          "naicsClassification",
          "revenue",
          "country",
          "region",
          "city",
          "all_country",
          "all_region",
          "all_city",
          "employees"
        ],
        "title": "GiqOrgFacetType"
      },
      "GiqOrganizationListResponse": {
        "properties": {
          "type": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Type",
            "description": "GIQ response type identifier."
          },
          "count": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Count",
            "description": "Number of entities returned."
          },
          "total_count": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Total Count",
            "description": "Total entities available."
          },
          "entities": {
            "items": {
              "additionalProperties": true,
              "type": "object"
            },
            "type": "array",
            "title": "Entities",
            "description": "Organization entities."
          }
        },
        "type": "object",
        "title": "GiqOrganizationListResponse"
      },
      "GiqOrganizationSearchRequest": {
        "properties": {
          "id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Id",
            "description": "GIQ organization ID to search or find similars."
          },
          "name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Name",
            "description": "Organization name to search."
          },
          "capabilities": {
            "anyOf": [
              {
                "items": {},
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Capabilities",
            "description": "Capabilities or products to filter by."
          },
          "country": {
            "anyOf": [
              {
                "items": {},
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Country",
            "description": "Country filters."
          },
          "region": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Region",
            "description": "Region filters."
          },
          "city": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "City",
            "description": "City filters."
          },
          "naics_code": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Naics Code",
            "description": "NAICS codes to filter by."
          },
          "similar": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Similar",
            "description": "Enable similarity search (requires an organization ID).",
            "default": false
          }
        },
        "type": "object",
        "title": "GiqOrganizationSearchRequest"
      },
      "HTTPValidationError": {
        "properties": {
          "detail": {
            "items": {
              "$ref": "#/components/schemas/ValidationError"
            },
            "type": "array",
            "title": "Detail"
          }
        },
        "type": "object",
        "title": "HTTPValidationError"
      },
      "HtsDocsSearchChapterItem": {
        "properties": {
          "chapter_number": {
            "type": "integer",
            "title": "Chapter Number",
            "description": "Chapter number (1-99)"
          },
          "chapter_label": {
            "type": "string",
            "title": "Chapter Label",
            "description": "Human-readable chapter name"
          },
          "section_number": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Section Number",
            "description": "Parent section number"
          },
          "subchapter_count": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Subchapter Count",
            "description": "Number of subchapters (Ch98/99)"
          },
          "match_type": {
            "type": "string",
            "enum": [
              "exact",
              "fuzzy"
            ],
            "title": "Match Type",
            "description": "How the match was found"
          },
          "match_score": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Match Score",
            "description": "Fuzzy match score (0-100)"
          },
          "nav_link": {
            "type": "string",
            "title": "Nav Link",
            "description": "Frontend navigation link"
          }
        },
        "type": "object",
        "required": [
          "chapter_number",
          "chapter_label",
          "match_type",
          "nav_link"
        ],
        "title": "HtsDocsSearchChapterItem",
        "description": "Search result item for a chapter match."
      },
      "HtsDocsSearchCodeItem": {
        "properties": {
          "hts_code": {
            "type": "string",
            "title": "Hts Code",
            "description": "Normalized 10-digit HTS code"
          },
          "htsno": {
            "type": "string",
            "title": "Htsno",
            "description": "Formatted HTS code with dots"
          },
          "description": {
            "type": "string",
            "title": "Description",
            "description": "HTS code description"
          },
          "chapter_number": {
            "type": "integer",
            "title": "Chapter Number",
            "description": "Chapter number"
          },
          "section_number": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Section Number",
            "description": "Section number"
          },
          "digit_length": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Digit Length",
            "description": "Code precision (4, 6, 8, 10)"
          },
          "match_type": {
            "type": "string",
            "enum": [
              "prefix",
              "description",
              "semantic"
            ],
            "title": "Match Type",
            "description": "How the match was found"
          },
          "match_score": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Match Score",
            "description": "Match score"
          },
          "nav_link": {
            "type": "string",
            "title": "Nav Link",
            "description": "Frontend navigation link"
          }
        },
        "type": "object",
        "required": [
          "hts_code",
          "htsno",
          "description",
          "chapter_number",
          "match_type",
          "nav_link"
        ],
        "title": "HtsDocsSearchCodeItem",
        "description": "Search result item for an HTS code match."
      },
      "HtsDocsSearchCounts": {
        "properties": {
          "sections": {
            "type": "integer",
            "title": "Sections",
            "description": "Number of section matches",
            "default": 0
          },
          "chapters": {
            "type": "integer",
            "title": "Chapters",
            "description": "Number of chapter matches",
            "default": 0
          },
          "codes": {
            "type": "integer",
            "title": "Codes",
            "description": "Number of code matches",
            "default": 0
          },
          "notes": {
            "type": "integer",
            "title": "Notes",
            "description": "Number of note matches",
            "default": 0
          },
          "total": {
            "type": "integer",
            "title": "Total",
            "description": "Total matches across all categories",
            "default": 0
          }
        },
        "type": "object",
        "title": "HtsDocsSearchCounts",
        "description": "Result counts by category."
      },
      "HtsDocsSearchMeta": {
        "properties": {
          "query_type_detected": {
            "type": "string",
            "enum": [
              "code",
              "chapter_ref",
              "section_ref",
              "subchapter_ref",
              "description"
            ],
            "title": "Query Type Detected",
            "description": "Auto-detected query intent"
          },
          "search_time_ms": {
            "type": "number",
            "title": "Search Time Ms",
            "description": "Total search execution time in ms"
          },
          "semantic_enabled": {
            "type": "boolean",
            "title": "Semantic Enabled",
            "description": "Whether semantic search was used"
          },
          "types_searched": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Types Searched",
            "description": "Document types that were searched"
          }
        },
        "type": "object",
        "required": [
          "query_type_detected",
          "search_time_ms",
          "semantic_enabled",
          "types_searched"
        ],
        "title": "HtsDocsSearchMeta",
        "description": "Search execution metadata."
      },
      "HtsDocsSearchNoteItem": {
        "properties": {
          "note_unique_id": {
            "type": "string",
            "title": "Note Unique Id",
            "description": "Unique note identifier"
          },
          "note_type": {
            "type": "string",
            "title": "Note Type",
            "description": "Type of note (us_note, chapter_note, etc.)"
          },
          "note_number": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Note Number",
            "description": "Note number within type"
          },
          "chapter_number": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Chapter Number",
            "description": "Associated chapter"
          },
          "subchapter_number": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Subchapter Number",
            "description": "Associated subchapter"
          },
          "section_number": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Section Number",
            "description": "Associated section"
          },
          "content_preview": {
            "type": "string",
            "title": "Content Preview",
            "description": "Truncated content preview"
          },
          "match_score": {
            "type": "number",
            "title": "Match Score",
            "description": "Semantic similarity score"
          },
          "nav_link": {
            "type": "string",
            "title": "Nav Link",
            "description": "Frontend navigation link"
          }
        },
        "type": "object",
        "required": [
          "note_unique_id",
          "note_type",
          "content_preview",
          "match_score",
          "nav_link"
        ],
        "title": "HtsDocsSearchNoteItem",
        "description": "Search result item for a note match."
      },
      "HtsDocsSearchQuickNav": {
        "properties": {
          "type": {
            "type": "string",
            "enum": [
              "section",
              "chapter",
              "subchapter",
              "code"
            ],
            "title": "Type",
            "description": "Target type for quick navigation"
          },
          "section_number": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Section Number",
            "description": "Target section"
          },
          "chapter_number": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Chapter Number",
            "description": "Target chapter"
          },
          "subchapter_number": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Subchapter Number",
            "description": "Target subchapter"
          },
          "hts_code": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Hts Code",
            "description": "Target HTS code"
          },
          "label": {
            "type": "string",
            "title": "Label",
            "description": "Display label for the quick nav button"
          },
          "nav_link": {
            "type": "string",
            "title": "Nav Link",
            "description": "Frontend navigation link"
          }
        },
        "type": "object",
        "required": [
          "type",
          "label",
          "nav_link"
        ],
        "title": "HtsDocsSearchQuickNav",
        "description": "Quick navigation hint for direct jumps.\n\nPopulated when query clearly references a specific chapter/section."
      },
      "HtsDocsSearchResults": {
        "properties": {
          "sections": {
            "items": {
              "$ref": "#/components/schemas/HtsDocsSearchSectionItem"
            },
            "type": "array",
            "title": "Sections",
            "description": "Matching sections"
          },
          "chapters": {
            "items": {
              "$ref": "#/components/schemas/HtsDocsSearchChapterItem"
            },
            "type": "array",
            "title": "Chapters",
            "description": "Matching chapters"
          },
          "codes": {
            "items": {
              "$ref": "#/components/schemas/HtsDocsSearchCodeItem"
            },
            "type": "array",
            "title": "Codes",
            "description": "Matching HTS codes"
          },
          "notes": {
            "items": {
              "$ref": "#/components/schemas/HtsDocsSearchNoteItem"
            },
            "type": "array",
            "title": "Notes",
            "description": "Matching notes"
          }
        },
        "type": "object",
        "title": "HtsDocsSearchResults",
        "description": "Container for categorized search results."
      },
      "HtsDocsSearchSectionItem": {
        "properties": {
          "section_number": {
            "type": "integer",
            "title": "Section Number",
            "description": "Section number (1-22)"
          },
          "section_label": {
            "type": "string",
            "title": "Section Label",
            "description": "Human-readable section name"
          },
          "chapter_range": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Chapter Range",
            "description": "Chapter range (e.g., '72-83')"
          },
          "match_type": {
            "type": "string",
            "enum": [
              "exact",
              "fuzzy"
            ],
            "title": "Match Type",
            "description": "How the match was found"
          },
          "match_score": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Match Score",
            "description": "Fuzzy match score (0-100)"
          },
          "nav_link": {
            "type": "string",
            "title": "Nav Link",
            "description": "Frontend navigation link"
          }
        },
        "type": "object",
        "required": [
          "section_number",
          "section_label",
          "match_type",
          "nav_link"
        ],
        "title": "HtsDocsSearchSectionItem",
        "description": "Search result item for a section match."
      },
      "HtsRateComponent": {
        "properties": {
          "htsno": {
            "type": "string",
            "title": "Htsno",
            "description": "Original HTS code format (e.g. '1012.10') 6-10 digits."
          },
          "hts_code": {
            "type": "string",
            "title": "Hts Code",
            "description": "Associated HTS code."
          },
          "rate_column": {
            "type": "string",
            "title": "Rate Column",
            "description": "One of general|special|other."
          },
          "rate_basis": {
            "type": "string",
            "title": "Rate Basis",
            "description": "The basis of the rate, e.g. 'ad valorem', 'specific', 'compound', etc."
          },
          "rate_usage": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Rate Usage",
            "description": "Usage identifier to indicate how to use the rate for the component, e.g. 'base', 'replace', 'additive', 'ignore'"
          },
          "rate_value": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Rate Value",
            "description": "Normalized rate (e.g. 0.05 for 5% or 2.5 for $2.50)."
          },
          "uom": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Uom",
            "description": "Unit of measure key (e.g. 'kilogram')."
          },
          "uom_extra": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Uom Extra",
            "description": "Any additional UOM context (e.g. 'of the fair retail value')."
          },
          "band_params": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/HtsRateComponentBand"
              },
              {
                "type": "null"
              }
            ],
            "description": "Optional band parameters for the rate component, if applicable."
          },
          "component_text": {
            "type": "string",
            "title": "Component Text",
            "description": "The cleaned, chunklevel rate text (without program codes)."
          },
          "base_text": {
            "type": "string",
            "title": "Base Text",
            "description": "The full original rate text, cleaned."
          },
          "lst_programs": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Lst Programs",
            "description": "List of program codes applicable to the rate, if any"
          },
          "lst_hts_refs": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Lst Hts Refs",
            "description": "List of HTS code references that were mentioned in the rate component text, if any"
          },
          "lst_footnotes_hts_refs": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Lst Footnotes Hts Refs",
            "description": "List of HTS codes mentioned in the footnotes related to this rate component, if any"
          },
          "lst_footnotes_text": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Lst Footnotes Text",
            "description": "List of footnotes attached to this rate column, if any"
          },
          "warning": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Warning",
            "description": "Any parser warnings (e.g. multiple matches)."
          },
          "match_scenario": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Match Scenario",
            "description": "The matching scenario used to parse this component (e.g. 'ad valorem')"
          },
          "conditions": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/SpecialRateCondition"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Conditions",
            "description": "List of special rate conditions that apply to this rate component."
          }
        },
        "type": "object",
        "required": [
          "htsno",
          "hts_code",
          "rate_column",
          "rate_basis",
          "component_text",
          "base_text"
        ],
        "title": "HtsRateComponent",
        "description": "Represents a component of an HTS (Harmonized Tariff Schedule) rate with its associated attributes.\n\nThis class is used to encapsulate structured data about HTS rates, including details such as the HTS code, rate\ninformation, unit of measure, associated program codes, references, footnotes, and parsing warnings or scenarios.\nIt is designed to support processing, normalization, and interpretation of tariff rate data.\n\nAttributes:\n    htsno: A string representing the original HTS code format (e.g. '1012.10') with 6-10 digits.\n    hts_code: The associated HTS code.\n    rate_column: A string representing the type of rate, which can be one of general|special|other.\n    rate_basis: A string representing the basis of the rate, such as 'ad valorem', 'specific', 'compound', etc.\n    rate_usage: Optional; a string indicating how to use the rate for the component, such as 'base', 'replace',\n    rate_value: Optional; the normalized rate value where a percentage (e.g. 5%) is represented as a float\n        (e.g. 0.05) and a dollar-based rate (e.g. $2.50) is represented as 2.5.\n    uom: Optional; the unit of measure key used for the rate (e.g. \"kilogram\").\n    uom_extra: Optional; additional context or description tied to the unit of measure (e.g. \"of the fair retail value\").\n    band_params: Optional; an instance of `HtsRateComponentBand` that contains band parameters for the rate component,\n    component_text: A string representing the cleaned, chunk-level rate text without program codes.\n    base_text: A string representing the original rate text in full, after cleaning.\n    lst_programs: A list of lists of program codes that are applicable to each segment or chunk of the rate.\n    lst_hts_refs: A list of HTS codes that are referenced directly by this rate chunk.\n    lst_footnotes_hts_refs: A list of HTS codes that are referenced through footnotes within this rate column.\n    lst_footnotes_text: A list of the text of footnotes that are attached to this rate column.\n    warning: Optional; a string containing any warnings from the parser, such as multiple matches during parsing.\n    match_scenario: Optional; a string describing the scenario that was used to parse this rate component (e.g.\n        \"ad valorem\").\n    conditions: Optional; a list of special rate conditions that apply to this rate component, such as country"
      },
      "HtsRateComponentBand": {
        "properties": {
          "supporting_text": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Supporting Text",
            "description": "Supporting text for the rate band, if any."
          },
          "band_low": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Band Low",
            "description": "Lower bound of the rate band."
          },
          "band_high": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Band High",
            "description": "Upper bound of the rate band."
          },
          "band_uom": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Band Uom",
            "description": "Unit of measure for the rate band."
          }
        },
        "type": "object",
        "required": [
          "band_uom"
        ],
        "title": "HtsRateComponentBand",
        "description": "Represents a band of rates for a specific HTS code.\n\nThis class is used to define the details of a rate band, which includes\nthe lower and upper bounds of the rate, the unit of measure, and the\neffective dates for the rate band. It is derived from `BaseModel`.\n\nAttributes:\n    band_low: float\n        The lower bound of the rate band.\n    band_high: float\n        The upper bound of the rate band.\n    band_uom: str\n        The unit of measure for the rate band."
      },
      "HtsScheduleEntry": {
        "properties": {
          "htsno": {
            "type": "string",
            "title": "Htsno",
            "description": "Original HTS code format (e.g. '1012.10') 6-10 digits."
          },
          "hts_code": {
            "type": "string",
            "title": "Hts Code",
            "description": "The 10-digit HTS code associated with this entry."
          },
          "description": {
            "type": "string",
            "title": "Description",
            "description": "Detailed description of the HTS code."
          },
          "indent_level": {
            "type": "integer",
            "title": "Indent Level",
            "description": "Indentation level of the HTS code in the hierarchy."
          },
          "units_of_measures": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Units Of Measures",
            "description": "Unit(s) of measure for this HTS code (e.g., 'kg', 'No.', 'L')."
          },
          "rate_components": {
            "items": {
              "$ref": "#/components/schemas/HtsRateComponent"
            },
            "type": "array",
            "title": "Rate Components",
            "description": "List of duty rate components applicable to this HTS code."
          },
          "footnotes": {
            "additionalProperties": {
              "items": {
                "additionalProperties": true,
                "type": "object"
              },
              "type": "array"
            },
            "type": "object",
            "title": "Footnotes",
            "description": "Footnotes associated with this HTS code, categorized by type."
          },
          "section_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Section Name",
            "description": "Name of the HTS section this code belongs to."
          },
          "chapter_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Chapter Name",
            "description": "Name of the HTS chapter this code belongs to."
          },
          "heading_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Heading Name",
            "description": "Name of the HTS heading this code belongs to."
          },
          "subheading_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Subheading Name",
            "description": "Name of the HTS subheading this code belongs to."
          },
          "suffix_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Suffix Name",
            "description": "Name of the HTS suffix this code belongs to."
          },
          "parent_hts_code": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Parent Hts Code",
            "description": "Parent HTS code in the hierarchy (if applicable)."
          },
          "raw_json_entry": {
            "additionalProperties": true,
            "type": "object",
            "title": "Raw Json Entry",
            "description": "Raw JSON entry from HTS source data."
          }
        },
        "type": "object",
        "required": [
          "htsno",
          "hts_code",
          "description",
          "indent_level"
        ],
        "title": "HtsScheduleEntry",
        "description": "Represents an entry for the PgHtsRateSchedule Database Table.\n\nThis model is used to represent the details of an HTS entry, typically for\ncustoms, import, or export purposes. Each entry consists of a code, description,\nindentation level, and additional optional fields such as unit of quantity,\nparent code, and rates. The `rates` field is a list of tariff duty rates associated\nwith this entry.\n\nAttributes:\n    htsno (str): Original HTS code format (e.g. '1012.10') 6-10 digits.\n    hts_code (str): The HTS code associated with this entry.\n    description (str): Detailed textual description of the HTS entry.\n    indent_level (int): Indentation level associated with this HTS code.\n    units_of_measures (Optional[str]): Unit of measurement for quantity, if applicable.\n    parent_hts_code (Optional[str]): Optional parent HTS code this entry belongs under.\n    rate_components (List[DutyRate]): A list of duty rates applicable to this HTS code.\n    footnotes (Dict[str, List[Dict[str, str]]]): Footnotes associated with this HTS code, categorized by type.\n    section_name (Optional[str]): Name of the section this HTS code belongs to, if applicable.\n    chapter_name (Optional[str]): Name of the chapter this HTS code belongs to, if applicable.\n    heading_name (Optional[str]): Name of the heading this HTS code belongs to, if applicable.\n    subheading_name (Optional[str]): Name of the subheading this HTS code belongs to\n    suffix_name (Optional[str]): Name of the suffix this HTS code belongs to, if applicable.",
        "examples": [
          {
            "chapter_name": "Iron and Steel",
            "description": "Flat-rolled iron/steel, hot-rolled, pickled",
            "footnotes": {},
            "heading_name": "Flat-rolled products",
            "hts_code": "7208101500",
            "htsno": "7208.10.15.00",
            "indent_level": 2,
            "parent_hts_code": "7208100000",
            "rate_components": [
              {
                "component_text": "Free",
                "rate_basis": "free",
                "rate_column": "general"
              }
            ],
            "raw_json_entry": {},
            "section_name": "Base Metals",
            "subheading_name": "In coils",
            "suffix_name": "Pickled",
            "units_of_measures": [
              "kg"
            ]
          }
        ]
      },
      "HtsSourceVersion": {
        "properties": {
          "source_id": {
            "type": "integer",
            "title": "Source Id",
            "description": "Primary key for the source version."
          },
          "year": {
            "type": "integer",
            "title": "Year",
            "description": "Tariff source year."
          },
          "version": {
            "type": "integer",
            "title": "Version",
            "description": "Tariff source version number."
          },
          "release_date_unixts": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Release Date Unixts",
            "description": "Release date of the revision as Unix timestamp"
          },
          "release_effective_date_unixts": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Release Effective Date Unixts",
            "description": "Effective date of the revision as Unix timestamp"
          },
          "release_notes": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Release Notes",
            "description": "Notes about the release."
          },
          "import_unixts": {
            "type": "number",
            "title": "Import Unixts",
            "description": "Timestamp when the source was imported."
          },
          "is_active": {
            "type": "boolean",
            "title": "Is Active",
            "description": "Flag indicating whether the revision should be considered in API responses.",
            "default": false
          }
        },
        "type": "object",
        "required": [
          "source_id",
          "year",
          "version",
          "import_unixts"
        ],
        "title": "HtsSourceVersion",
        "examples": [
          {
            "import_unixts": 1765318467.83208,
            "is_active": true,
            "release_date_unixts": 1764309600.0,
            "release_effective_date_unixts": 1764309600.0,
            "release_notes": "The changes in this revision reflect instruments and actions taken since 2025 Revision 30.",
            "source_id": 9,
            "version": 31,
            "year": 2025
          }
        ]
      },
      "HubBasicInfo": {
        "properties": {
          "code": {
            "type": "string",
            "title": "Code",
            "description": "Normalized code without dots"
          },
          "formatted_code": {
            "type": "string",
            "title": "Formatted Code",
            "description": "Display format with dots"
          },
          "description": {
            "type": "string",
            "title": "Description",
            "description": "Full description text"
          },
          "full_description": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Full Description",
            "description": "Combined heading + subheading + description (for base codes)"
          },
          "summary": {
            "type": "string",
            "title": "Summary",
            "description": "One-line summary for tooltips"
          },
          "chapter": {
            "type": "integer",
            "title": "Chapter",
            "description": "Chapter number"
          },
          "chapter_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Chapter Name",
            "description": "Chapter name"
          },
          "section_number": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Section Number",
            "description": "Section number"
          },
          "section_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Section Name",
            "description": "Section name"
          },
          "heading_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Heading Name",
            "description": "Heading description (4-digit level)"
          },
          "subheading_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Subheading Name",
            "description": "Subheading description (6-digit level)"
          },
          "subchapter_number": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Subchapter Number",
            "description": "Subchapter (ch99 only)"
          }
        },
        "type": "object",
        "required": [
          "code",
          "formatted_code",
          "description",
          "summary",
          "chapter"
        ],
        "title": "HubBasicInfo",
        "description": "Basic information for any HTS code (base or ch99)."
      },
      "HubClassification": {
        "properties": {
          "program_family": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Program Family",
            "description": "High-level legal authority (ieepa, section_301, etc.)"
          },
          "program_family_label": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Program Family Label",
            "description": "Human-readable label"
          },
          "program_type": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Program Type",
            "description": "Subdivision (ieepa_fentanyl_china, etc.)"
          },
          "rule_role": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Rule Role",
            "description": "Functional classification (additional_duty, exclusion, etc.)"
          },
          "rule_role_label": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Rule Role Label",
            "description": "Human-readable role"
          },
          "confidence": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Confidence",
            "description": "Classification confidence"
          },
          "primary_note_pattern": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Primary Note Pattern",
            "description": "Note pattern used (e.g., us_note:2)"
          },
          "product_group": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Product Group",
            "description": "Product group (steel, aluminum, vehicle, aircraft)"
          },
          "material_composition": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Material Composition",
            "description": "Material type (steel, aluminum)"
          },
          "material_applicability": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Material Applicability",
            "description": "Material applicability (multi_material_exemption)"
          },
          "applies_to_portion": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Applies To Portion",
            "description": "Portion of value if applicable"
          },
          "portion_basis": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Portion Basis",
            "description": "Basis (full_value, us_content)"
          },
          "derivative_flag": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Derivative Flag",
            "description": "Primary or derivative"
          },
          "exemption_type": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Exemption Type",
            "description": "Exemption type (reciprocal_232_exemption)"
          }
        },
        "type": "object",
        "title": "HubClassification",
        "description": "Enhanced classification with all source_metadata fields."
      },
      "HubConditionalCode": {
        "properties": {
          "hts_code": {
            "type": "string",
            "title": "Hts Code",
            "description": "Normalized HTS code."
          },
          "formatted_code": {
            "type": "string",
            "title": "Formatted Code",
            "description": "Dotted HTS code format."
          },
          "description": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Description",
            "description": "HTS code description."
          },
          "condition": {
            "type": "string",
            "title": "Condition",
            "description": "Condition type (quota_eligible, trq_in_quota, etc.)."
          }
        },
        "type": "object",
        "required": [
          "hts_code",
          "formatted_code",
          "condition"
        ],
        "title": "HubConditionalCode",
        "description": "Conditional code requiring user confirmation."
      },
      "HubCountryRef": {
        "properties": {
          "iso_code": {
            "type": "string",
            "title": "Iso Code",
            "description": "ISO alpha-2 country code."
          },
          "name": {
            "type": "string",
            "title": "Name",
            "description": "Country name."
          }
        },
        "type": "object",
        "required": [
          "iso_code",
          "name"
        ],
        "title": "HubCountryRef",
        "description": "Country reference with code and name."
      },
      "HubCountryScope": {
        "properties": {
          "mode": {
            "type": "string",
            "enum": [
              "list",
              "all",
              "all_except"
            ],
            "title": "Mode",
            "description": "Scope mode: 'list' (specific countries), 'all', or 'all_except'."
          },
          "countries": {
            "items": {
              "$ref": "#/components/schemas/HubCountryRef"
            },
            "type": "array",
            "title": "Countries",
            "description": "List of countries in scope."
          },
          "display_text": {
            "type": "string",
            "title": "Display Text",
            "description": "Human-readable scope description."
          },
          "country_specificity": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Country Specificity",
            "description": "Country codes from source_metadata (e.g., 'CN,HK')."
          }
        },
        "type": "object",
        "required": [
          "mode",
          "display_text"
        ],
        "title": "HubCountryScope",
        "description": "Country scope for Ch99 rules."
      },
      "HubDateConditions": {
        "properties": {
          "effective_start": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Effective Start",
            "description": "Start date in ISO format (YYYY-MM-DD)."
          },
          "effective_start_unixts": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Effective Start Unixts",
            "description": "Start date as Unix timestamp in seconds."
          },
          "effective_end": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Effective End",
            "description": "End date in ISO format (YYYY-MM-DD)."
          },
          "effective_end_unixts": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Effective End Unixts",
            "description": "End date as Unix timestamp in seconds."
          },
          "status": {
            "type": "string",
            "enum": [
              "active",
              "expired",
              "future"
            ],
            "title": "Status",
            "description": "Current status of the rule: 'active', 'expired', or 'future'."
          },
          "display_text": {
            "type": "string",
            "title": "Display Text",
            "description": "Human-readable date range description."
          },
          "transit_exclusions": {
            "items": {
              "$ref": "#/components/schemas/HubTransitExclusion"
            },
            "type": "array",
            "title": "Transit Exclusions",
            "description": "Transit/loading exclusion conditions."
          },
          "exclusion_ranges": {
            "items": {
              "$ref": "#/components/schemas/HubExclusionRange"
            },
            "type": "array",
            "title": "Exclusion Ranges",
            "description": "Date ranges excluded from applicability."
          }
        },
        "type": "object",
        "required": [
          "status",
          "display_text"
        ],
        "title": "HubDateConditions",
        "description": "Date conditions for Ch99 rules with direct timestamps."
      },
      "HubExclusionRange": {
        "properties": {
          "start": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Start",
            "description": "Start date of exclusion range."
          },
          "end": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "End",
            "description": "End date of exclusion range."
          }
        },
        "type": "object",
        "title": "HubExclusionRange",
        "description": "Date range exclusion for Ch99 rules."
      },
      "HubFieldChange": {
        "properties": {
          "field": {
            "type": "string",
            "title": "Field",
            "description": "Field that changed (e.g., additional_rate)."
          },
          "severity": {
            "type": "string",
            "enum": [
              "CRITICAL",
              "HIGH",
              "MEDIUM",
              "LOW"
            ],
            "title": "Severity",
            "description": "Impact severity of the change."
          },
          "change_type": {
            "type": "string",
            "title": "Change Type",
            "description": "Type: 'modified', 'added', or 'removed'."
          },
          "old_value": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Old Value",
            "description": "Previous value before change."
          },
          "new_value": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "New Value",
            "description": "New value after change."
          },
          "is_ripple": {
            "type": "boolean",
            "title": "Is Ripple",
            "description": "True if cascading change.",
            "default": false
          },
          "details": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Details",
            "description": "Additional context."
          }
        },
        "type": "object",
        "required": [
          "field",
          "severity",
          "change_type"
        ],
        "title": "HubFieldChange",
        "description": "Single field-level change within a version."
      },
      "HubFootnoteItem": {
        "properties": {
          "marker": {
            "type": "string",
            "title": "Marker",
            "description": "Footnote marker (e.g., '1', '*')."
          },
          "column": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Column",
            "description": "Rate column this footnote applies to."
          },
          "text": {
            "type": "string",
            "title": "Text",
            "description": "Footnote text content."
          },
          "hts_refs": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Hts Refs",
            "description": "HTS codes referenced by this footnote."
          }
        },
        "type": "object",
        "required": [
          "marker",
          "text"
        ],
        "title": "HubFootnoteItem",
        "description": "Single footnote item."
      },
      "HubFootnotesSection": {
        "properties": {
          "items": {
            "items": {
              "$ref": "#/components/schemas/HubFootnoteItem"
            },
            "type": "array",
            "title": "Items",
            "description": "List of footnote items."
          }
        },
        "type": "object",
        "title": "HubFootnotesSection",
        "description": "Footnotes section for base codes."
      },
      "HubHistorySection": {
        "properties": {
          "current_version": {
            "type": "string",
            "title": "Current Version",
            "description": "Version being queried (e.g., 2025-27)"
          },
          "first_appeared": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "First Appeared",
            "description": "Version where code/rule first appeared"
          },
          "latest_version": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Latest Version",
            "description": "Most recent available version"
          },
          "total_versions_tracked": {
            "type": "integer",
            "title": "Total Versions Tracked",
            "description": "Number of versions in timeline",
            "default": 0
          },
          "lookback_window": {
            "type": "integer",
            "title": "Lookback Window",
            "description": "How many versions back were included",
            "default": 2
          },
          "timeline": {
            "items": {
              "$ref": "#/components/schemas/HubVersionChange"
            },
            "type": "array",
            "title": "Timeline",
            "description": "Ordered version changes"
          }
        },
        "type": "object",
        "required": [
          "current_version"
        ],
        "title": "HubHistorySection",
        "description": "Enhanced version history section with timeline from comparisons."
      },
      "HubMaterialFlag": {
        "properties": {
          "type": {
            "type": "string",
            "title": "Type",
            "description": "Material type (steel, aluminum, etc.)."
          },
          "source_note": {
            "type": "string",
            "title": "Source Note",
            "description": "Note reference (Note 16, etc.)."
          },
          "description": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Description",
            "description": "Description of the material flag."
          }
        },
        "type": "object",
        "required": [
          "type",
          "source_note"
        ],
        "title": "HubMaterialFlag",
        "description": "Material composition flag."
      },
      "HubMaterialsSection": {
        "properties": {
          "has_material_considerations": {
            "type": "boolean",
            "title": "Has Material Considerations",
            "description": "Whether this code has material-specific tariff considerations.",
            "default": false
          },
          "types": {
            "items": {
              "$ref": "#/components/schemas/HubMaterialFlag"
            },
            "type": "array",
            "title": "Types",
            "description": "List of applicable material types."
          }
        },
        "type": "object",
        "title": "HubMaterialsSection",
        "description": "Material composition for base HTS codes."
      },
      "HubNoteItem": {
        "properties": {
          "note_id": {
            "type": "integer",
            "title": "Note Id",
            "description": "Database ID of the note."
          },
          "note_unique_id": {
            "type": "string",
            "title": "Note Unique Id",
            "description": "Unique identifier for the note."
          },
          "note_sort_key": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Note Sort Key",
            "description": "Sort key for ordering notes."
          },
          "note_type": {
            "type": "string",
            "title": "Note Type",
            "description": "Type of note (us_note, chapter_note, etc.)."
          },
          "note_number": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Note Number",
            "description": "Note number within its category."
          },
          "title": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Title",
            "description": "Note title if available."
          },
          "content_preview": {
            "type": "string",
            "title": "Content Preview",
            "description": "First 200 characters of content."
          },
          "content_full": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Content Full",
            "description": "Full content if requested."
          },
          "has_children": {
            "type": "boolean",
            "title": "Has Children",
            "description": "Whether note has child notes.",
            "default": false
          },
          "child_count": {
            "type": "integer",
            "title": "Child Count",
            "description": "Number of child notes.",
            "default": 0
          }
        },
        "type": "object",
        "required": [
          "note_id",
          "note_unique_id",
          "note_type",
          "content_preview"
        ],
        "title": "HubNoteItem",
        "description": "Single note item in the hub response."
      },
      "HubNotesSection": {
        "properties": {
          "primary": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/HubNoteItem"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Primary",
            "description": "Primary defining notes (ch99: from note_references)."
          },
          "code_specific": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/HubNoteItem"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Code Specific",
            "description": "Notes directly referencing this HTS code."
          },
          "footnoted": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/HubNoteItem"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Footnoted",
            "description": "Notes referenced via footnotes."
          },
          "chapter_notes": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/HubNoteItem"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Chapter Notes",
            "description": "Chapter-level notes."
          },
          "section_notes": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/HubNoteItem"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Section Notes",
            "description": "Section-level notes."
          },
          "statistical_notes": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/HubNoteItem"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Statistical Notes",
            "description": "Statistical notes."
          },
          "subheading_notes": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/HubNoteItem"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Subheading Notes",
            "description": "Subheading-level notes."
          },
          "us_notes": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/HubNoteItem"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Us Notes",
            "description": "U.S. notes."
          },
          "additional_us_notes": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/HubNoteItem"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Additional Us Notes",
            "description": "Additional U.S. notes."
          }
        },
        "type": "object",
        "title": "HubNotesSection",
        "description": "Notes section for the hub response."
      },
      "HubProductConditions": {
        "properties": {
          "requires_donation": {
            "type": "boolean",
            "title": "Requires Donation",
            "description": "Goods must qualify as humanitarian donation.",
            "default": false
          },
          "requires_ftz_exception": {
            "type": "boolean",
            "title": "Requires Ftz Exception",
            "description": "Foreign Trade Zone exception applies.",
            "default": false
          },
          "requires_informational": {
            "type": "boolean",
            "title": "Requires Informational",
            "description": "Goods must be informational materials.",
            "default": false
          },
          "exempts_informational": {
            "type": "boolean",
            "title": "Exempts Informational",
            "description": "Exempts informational materials from this rule.",
            "default": false
          },
          "exempts_personal_baggage": {
            "type": "boolean",
            "title": "Exempts Personal Baggage",
            "description": "Exempts personal baggage from this rule.",
            "default": false
          },
          "requires_civil_aircraft": {
            "type": "boolean",
            "title": "Requires Civil Aircraft",
            "description": "Applies only to civil aircraft parts.",
            "default": false
          },
          "usmca_interaction": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Usmca Interaction",
            "description": "USMCA interaction type if applicable."
          },
          "requires_chapter98_provisions": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Requires Chapter98 Provisions",
            "description": "Chapter 98 provisions that must be claimed."
          },
          "excludes_chapter98_provisions": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Excludes Chapter98 Provisions",
            "description": "Chapter 98 provisions that exclude this rule."
          }
        },
        "type": "object",
        "title": "HubProductConditions",
        "description": "Conditional requirement flags for product scope."
      },
      "HubProductScope": {
        "properties": {
          "includes_all": {
            "type": "boolean",
            "title": "Includes All",
            "description": "True if applies to all products.",
            "default": false
          },
          "included_codes": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/HubProductScopeItem"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Included Codes",
            "description": "All included HTS codes with descriptions."
          },
          "excluded_codes": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/HubProductScopeItem"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Excluded Codes",
            "description": "All excluded HTS codes with descriptions."
          },
          "included_conditional_codes": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/HubConditionalCode"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Included Conditional Codes",
            "description": "Codes requiring user confirmation."
          },
          "derived_from_notes": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Derived From Notes",
            "description": "Note unique IDs that define this scope."
          },
          "total_included_count": {
            "type": "integer",
            "title": "Total Included Count",
            "description": "Total number of included codes.",
            "default": 0
          },
          "total_excluded_count": {
            "type": "integer",
            "title": "Total Excluded Count",
            "description": "Total number of excluded codes.",
            "default": 0
          },
          "total_conditional_count": {
            "type": "integer",
            "title": "Total Conditional Count",
            "description": "Total number of conditional codes.",
            "default": 0
          },
          "conditions": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/HubProductConditions"
              },
              {
                "type": "null"
              }
            ],
            "description": "Conditional requirements for this rule."
          }
        },
        "type": "object",
        "title": "HubProductScope",
        "description": "Full product scope for Ch99 rules with all codes and conditions."
      },
      "HubProductScopeItem": {
        "properties": {
          "hts_code": {
            "type": "string",
            "title": "Hts Code",
            "description": "Normalized HTS code."
          },
          "formatted_code": {
            "type": "string",
            "title": "Formatted Code",
            "description": "Dotted HTS code format."
          },
          "description": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Description",
            "description": "HTS code description."
          }
        },
        "type": "object",
        "required": [
          "hts_code",
          "formatted_code"
        ],
        "title": "HubProductScopeItem",
        "description": "Single product in scope with full details."
      },
      "HubRateDetail": {
        "properties": {
          "value": {
            "anyOf": [
              {
                "type": "string",
                "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"
              },
              {
                "type": "null"
              }
            ],
            "title": "Value",
            "description": "Numeric rate value"
          },
          "unit": {
            "type": "string",
            "title": "Unit",
            "description": "Rate unit (percent, cents/kg, etc.)"
          },
          "display": {
            "type": "string",
            "title": "Display",
            "description": "Formatted display string"
          },
          "basis": {
            "type": "string",
            "title": "Basis",
            "description": "Rate basis (advalorem, specific, etc.)"
          }
        },
        "type": "object",
        "required": [
          "unit",
          "display",
          "basis"
        ],
        "title": "HubRateDetail",
        "description": "Rate detail for a single rate component."
      },
      "HubRatesSection": {
        "properties": {
          "general": {
            "$ref": "#/components/schemas/HubRateDetail",
            "description": "General (Column 1) duty rate."
          },
          "special": {
            "items": {
              "$ref": "#/components/schemas/HubSpecialRate"
            },
            "type": "array",
            "title": "Special",
            "description": "Special program rates."
          },
          "column_2": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/HubRateDetail"
              },
              {
                "type": "null"
              }
            ],
            "description": "Column 2 rate (for non-NTR countries)."
          },
          "eligible_programs": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Eligible Programs",
            "description": "Trade programs this code qualifies for."
          },
          "inherited_from": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Inherited From",
            "description": "HTS code where rates inherited from (null if direct)."
          },
          "inherited_from_formatted": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Inherited From Formatted",
            "description": "Formatted HTS code with dots (null if direct)."
          }
        },
        "type": "object",
        "required": [
          "general"
        ],
        "title": "HubRatesSection",
        "description": "Rate details for base HTS codes."
      },
      "HubRuleAssociations": {
        "properties": {
          "excluded_by": {
            "items": {
              "$ref": "#/components/schemas/HubRuleRef"
            },
            "type": "array",
            "title": "Excluded By",
            "description": "Rules that exclude this rule from applying."
          },
          "supersedes": {
            "items": {
              "$ref": "#/components/schemas/HubRuleRef"
            },
            "type": "array",
            "title": "Supersedes",
            "description": "Rules that this rule supersedes."
          },
          "related_rules": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/HubRuleRef"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Related Rules",
            "description": "Other related rules."
          }
        },
        "type": "object",
        "title": "HubRuleAssociations",
        "description": "Rule associations for Ch99 codes."
      },
      "HubRuleRef": {
        "properties": {
          "rule_code": {
            "type": "string",
            "title": "Rule Code",
            "description": "HTS code of the referenced rule."
          },
          "description_preview": {
            "type": "string",
            "title": "Description Preview",
            "description": "First 100 characters of rule description.",
            "default": ""
          },
          "relationship": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Relationship",
            "description": "Relationship type ('exclusion', 'supersedes')."
          },
          "additional_rate": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Additional Rate",
            "description": "Additional rate if applicable (decimal, e.g., 0.25 for 25%)."
          }
        },
        "type": "object",
        "required": [
          "rule_code"
        ],
        "title": "HubRuleRef",
        "description": "Reference to another rule with optional details."
      },
      "HubRulesSection": {
        "properties": {
          "country_scope": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/HubCountryScope"
              },
              {
                "type": "null"
              }
            ],
            "description": "Country applicability conditions"
          },
          "product_scope": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/HubProductScope"
              },
              {
                "type": "null"
              }
            ],
            "description": "Product applicability conditions"
          },
          "date_conditions": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/HubDateConditions"
              },
              {
                "type": "null"
              }
            ],
            "description": "Temporal applicability conditions"
          },
          "associations": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/HubRuleAssociations"
              },
              {
                "type": "null"
              }
            ],
            "description": "Rule exclusions, supersedes, and related rules"
          }
        },
        "type": "object",
        "title": "HubRulesSection",
        "description": "Ch99-specific rule conditions section (nested)."
      },
      "HubSpecialRate": {
        "properties": {
          "value": {
            "anyOf": [
              {
                "type": "string",
                "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"
              },
              {
                "type": "null"
              }
            ],
            "title": "Value",
            "description": "Numeric rate value"
          },
          "unit": {
            "type": "string",
            "title": "Unit",
            "description": "Rate unit (percent, cents/kg, etc.)"
          },
          "display": {
            "type": "string",
            "title": "Display",
            "description": "Formatted display string"
          },
          "basis": {
            "type": "string",
            "title": "Basis",
            "description": "Rate basis (advalorem, specific, etc.)"
          },
          "programs": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Programs",
            "description": "Program codes"
          }
        },
        "type": "object",
        "required": [
          "unit",
          "display",
          "basis"
        ],
        "title": "HubSpecialRate",
        "description": "Special rate with associated program codes."
      },
      "HubTransitExclusion": {
        "properties": {
          "loading_cutoff": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Loading Cutoff",
            "description": "Loading cutoff date in ISO format."
          },
          "entry_cutoff": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Entry Cutoff",
            "description": "Entry cutoff date in ISO format."
          }
        },
        "type": "object",
        "title": "HubTransitExclusion",
        "description": "Transit exclusion conditions for Ch99 rules."
      },
      "HubUIHints": {
        "properties": {
          "code_type_label": {
            "type": "string",
            "title": "Code Type Label",
            "description": "Display label for code type (e.g., 'Base HTS Code', 'Chapter 99 Rule')."
          },
          "sections_available": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Sections Available",
            "description": "Available UI sections for this code type."
          },
          "expandable_sections": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Expandable Sections",
            "description": "Sections that can be expanded/collapsed."
          },
          "primary_action": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Primary Action",
            "description": "Primary action button label."
          }
        },
        "type": "object",
        "required": [
          "code_type_label"
        ],
        "title": "HubUIHints",
        "description": "UI rendering hints."
      },
      "HubUnitsSection": {
        "properties": {
          "primary": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Primary",
            "description": "Primary unit of measure."
          },
          "secondary": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Secondary",
            "description": "Secondary unit of measure."
          },
          "all": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "All",
            "description": "All applicable units of measure."
          },
          "display": {
            "type": "string",
            "title": "Display",
            "description": "Display-formatted units string.",
            "default": ""
          }
        },
        "type": "object",
        "title": "HubUnitsSection",
        "description": "Units of measure for base codes."
      },
      "HubVersionChange": {
        "properties": {
          "version": {
            "type": "string",
            "title": "Version",
            "description": "Version identifier (e.g., '2025-27')."
          },
          "versions_compared": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Versions Compared",
            "description": "Comparison range (e.g., '2025-25 vs. 2025-26')."
          },
          "change_type": {
            "type": "string",
            "enum": [
              "added",
              "modified",
              "unchanged",
              "removed"
            ],
            "title": "Change Type",
            "description": "Type of change in this version."
          },
          "is_requested_version": {
            "type": "boolean",
            "title": "Is Requested Version",
            "description": "True for the version user queried.",
            "default": false
          },
          "changes_summary": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Changes Summary",
            "description": "Human-readable summary of changes."
          },
          "change_count": {
            "type": "integer",
            "title": "Change Count",
            "description": "Number of field changes.",
            "default": 0
          },
          "field_changes": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/HubFieldChange"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Field Changes",
            "description": "Detailed field changes (only for modified)."
          }
        },
        "type": "object",
        "required": [
          "version",
          "change_type"
        ],
        "title": "HubVersionChange",
        "description": "Single version change record with enhanced timeline support."
      },
      "ImportCountrySummary": {
        "properties": {
          "country_name": {
            "type": "string",
            "title": "Country Name",
            "description": "Country name."
          },
          "country_code": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Country Code",
            "description": "ISO 2-letter country code."
          },
          "total_customs_value_usd": {
            "type": "integer",
            "title": "Total Customs Value Usd",
            "description": "Total customs value in USD.",
            "default": 0
          },
          "years_with_data": {
            "type": "integer",
            "title": "Years With Data",
            "description": "Number of years with data.",
            "default": 0
          },
          "yearly_values": {
            "additionalProperties": {
              "type": "integer"
            },
            "type": "object",
            "title": "Yearly Values",
            "description": "Per-year breakdown: {year: value}."
          }
        },
        "additionalProperties": true,
        "type": "object",
        "required": [
          "country_name"
        ],
        "title": "ImportCountrySummary",
        "description": "Summary of import values for a country, aggregated across years.\n\nUsed for \"top countries\" queries where we rank countries by total import value.\n\nAttributes:\n    country_name (str): Country name.\n    country_code (Optional[str]): ISO 2-letter country code.\n    total_customs_value_usd (int): Total customs value across selected years.\n    years_with_data (int): Number of years with import data.\n    yearly_values (Dict[int, int]): Per-year breakdown of values."
      },
      "ImportDataSummary": {
        "properties": {
          "row_count": {
            "type": "integer",
            "title": "Row Count",
            "description": "Total number of rows.",
            "default": 0
          },
          "unique_hts_codes": {
            "type": "integer",
            "title": "Unique Hts Codes",
            "description": "Unique HTS codes count.",
            "default": 0
          },
          "unique_countries": {
            "type": "integer",
            "title": "Unique Countries",
            "description": "Unique countries count.",
            "default": 0
          },
          "unique_years": {
            "type": "integer",
            "title": "Unique Years",
            "description": "Unique years count.",
            "default": 0
          },
          "year_range": {
            "additionalProperties": {
              "anyOf": [
                {
                  "type": "integer"
                },
                {
                  "type": "null"
                }
              ]
            },
            "type": "object",
            "title": "Year Range",
            "description": "Year range: {min, max}."
          },
          "total_customs_value_usd": {
            "type": "integer",
            "title": "Total Customs Value Usd",
            "description": "Total customs value in USD.",
            "default": 0
          }
        },
        "type": "object",
        "title": "ImportDataSummary",
        "description": "Overall summary statistics for import data.\n\nProvides high-level metrics about the import data available in the database.\n\nAttributes:\n    row_count (int): Total number of import data rows.\n    unique_hts_codes (int): Number of unique HTS codes.\n    unique_countries (int): Number of unique countries.\n    unique_years (int): Number of unique years.\n    year_range (Dict[str, Optional[int]]): Min and max years available.\n    total_customs_value_usd (int): Sum of all customs values."
      },
      "ImportHtsSummary": {
        "properties": {
          "hts_code": {
            "type": "string",
            "title": "Hts Code",
            "description": "10-digit HTS code."
          },
          "total_customs_value_usd": {
            "type": "integer",
            "title": "Total Customs Value Usd",
            "description": "Total customs value in USD.",
            "default": 0
          },
          "years_with_data": {
            "type": "integer",
            "title": "Years With Data",
            "description": "Number of years with data.",
            "default": 0
          },
          "yearly_values": {
            "additionalProperties": {
              "type": "integer"
            },
            "type": "object",
            "title": "Yearly Values",
            "description": "Per-year breakdown: {year: value}."
          }
        },
        "type": "object",
        "required": [
          "hts_code"
        ],
        "title": "ImportHtsSummary",
        "description": "Summary of import values for an HTS code, aggregated across years.\n\nUsed for \"top HTS codes\" queries where we rank codes by total import value.\n\nAttributes:\n    hts_code (str): 10-digit HTS code.\n    total_customs_value_usd (int): Total customs value across selected years.\n    years_with_data (int): Number of years with import data.\n    yearly_values (Dict[int, int]): Per-year breakdown of values."
      },
      "MaterialComponent": {
        "properties": {
          "type": {
            "$ref": "#/components/schemas/MaterialType",
            "description": "Type of material: steel, aluminum, copper, non_us, or other."
          },
          "value_usd": {
            "anyOf": [
              {
                "type": "number",
                "minimum": 0.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Value Usd",
            "description": "Value of this material component in USD."
          },
          "percent_of_customs_value": {
            "anyOf": [
              {
                "type": "number",
                "maximum": 100.0,
                "minimum": 0.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Percent Of Customs Value",
            "description": "Percentage of total customs value this material represents."
          },
          "weight_kg": {
            "type": "number",
            "minimum": 0.0,
            "title": "Weight Kg",
            "description": "Weight of this material component in kilograms.",
            "default": 0
          },
          "process": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/MaterialProcessSteel"
              },
              {
                "$ref": "#/components/schemas/MaterialProcessAluminum"
              },
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Process",
            "description": "Processing details for the material (melt/pour country for steel, smelt country for aluminum)."
          }
        },
        "type": "object",
        "required": [
          "type"
        ],
        "title": "MaterialComponent",
        "description": "Represents a material component for Section 232 steel/aluminum evaluations.\n\nUsed to declare the material composition of imported goods for accurate\nSection 232 tariff calculations."
      },
      "MaterialProcessAluminum": {
        "properties": {
          "primary_smelt_country": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Primary Smelt Country",
            "description": "Country where aluminum was primary smelted (ISO alpha-2)."
          },
          "secondary_smelt_country": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Secondary Smelt Country",
            "description": "Country where aluminum was secondary smelted (ISO alpha-2)."
          },
          "most_recent_cast_country": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Most Recent Cast Country",
            "description": "Country where aluminum was most recently cast (ISO alpha-2)."
          }
        },
        "type": "object",
        "title": "MaterialProcessAluminum",
        "description": "Processing details for aluminum materials."
      },
      "MaterialProcessSteel": {
        "properties": {
          "melt_pour_country": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Melt Pour Country",
            "description": "Country where steel was melted and poured (ISO-3166 alpha-2)."
          }
        },
        "type": "object",
        "title": "MaterialProcessSteel"
      },
      "MaterialType": {
        "type": "string",
        "enum": [
          "steel",
          "aluminum",
          "copper",
          "non_us",
          "other"
        ],
        "title": "MaterialType"
      },
      "MessageRole": {
        "type": "string",
        "enum": [
          "user",
          "assistant",
          "system",
          "tool"
        ],
        "title": "MessageRole",
        "description": "Valid roles for chat messages."
      },
      "RateAdjustment": {
        "properties": {
          "hts_code": {
            "type": "string",
            "title": "Hts Code",
            "description": "The HTS 99 code to override (e.g., '9903.01.01' or '9903.88.15'). Accepts dotted or non-dotted format.",
            "examples": [
              "9903.88.15",
              "9903.01.01",
              "99038815"
            ]
          },
          "rate": {
            "type": "number",
            "minimum": 0.0,
            "title": "Rate",
            "description": "The new rate as a decimal that completely REPLACES the existing rate. Examples: 0.25 for 25%, 1.45 for 145%, 0.0 for free. No upper limit - rates can exceed 100% (e.g., 1.5 for 150%).",
            "examples": [
              0.25,
              0.5,
              1.45,
              0.0
            ]
          },
          "description": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Description",
            "description": "Optional description for the override (e.g., 'Forecasted Q2 rate increase').",
            "examples": [
              "Forecasted Q2 increase",
              "Exemption scenario",
              null
            ]
          }
        },
        "type": "object",
        "required": [
          "hts_code",
          "rate"
        ],
        "title": "RateAdjustment",
        "description": "A single rate override for a specific HTS 99 code.\n\nUsed for top-side rate forecasting where users want to model\nhypothetical rate changes (e.g., \"what if 9903.01.01 rate goes to 145%?\").\n\nIMPORTANT:\n- This is a COMPLETE OVERRIDE of the existing rate, not an additive adjustment.\n  The provided rate replaces the original rate entirely.\n- Only ad valorem (percentage-based) rates are supported.\n  Specific rates (e.g., $1.15/kg) are NOT supported in this version.",
        "examples": [
          {
            "hts_code": "9903.88.15",
            "rate": 0.5
          },
          {
            "description": "Forecasted increase",
            "hts_code": "9903.01.01",
            "rate": 1.45
          },
          {
            "description": "Exemption scenario",
            "hts_code": "9903.88.17",
            "rate": 0.0
          }
        ]
      },
      "ReciprocalContext": {
        "properties": {
          "hts_code": {
            "type": "string",
            "title": "Hts Code",
            "description": "HTS code being evaluated."
          },
          "country_of_origin": {
            "type": "string",
            "title": "Country Of Origin",
            "description": "Country of origin (ISO alpha-2)."
          },
          "import_date": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Import Date",
            "description": "Import date provided (YYYY-MM-DD)."
          },
          "loading_date": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Loading Date",
            "description": "Loading date provided (YYYY-MM-DD)."
          },
          "resolved_import_date": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Resolved Import Date",
            "description": "Import date used for evaluation (YYYY-MM-DD)."
          },
          "resolved_loading_date": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Resolved Loading Date",
            "description": "Loading date used for evaluation (YYYY-MM-DD)."
          },
          "defaulting_notes": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Defaulting Notes",
            "description": "Notes about date defaulting logic."
          },
          "value": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Value",
            "description": "Customs value in USD."
          },
          "quantity": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Quantity",
            "description": "Quantity of goods."
          },
          "rate_column": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Rate Column",
            "description": "Rate column used (general, special, other)."
          },
          "base_ad_valorem_rate": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Base Ad Valorem Rate",
            "description": "Base ad valorem rate from tariff schedule."
          },
          "base_specific_rate": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Base Specific Rate",
            "description": "Base specific rate from tariff schedule."
          },
          "admitted_to_ftz": {
            "type": "boolean",
            "title": "Admitted To Ftz",
            "description": "Whether goods were admitted to FTZ.",
            "default": false
          },
          "is_donation": {
            "type": "boolean",
            "title": "Is Donation",
            "description": "Whether goods are a humanitarian donation.",
            "default": false
          },
          "is_informational": {
            "type": "boolean",
            "title": "Is Informational",
            "description": "Whether goods are informational materials.",
            "default": false
          },
          "is_personal_baggage": {
            "type": "boolean",
            "title": "Is Personal Baggage",
            "description": "Whether goods are personal baggage.",
            "default": false
          },
          "usmca_claim": {
            "type": "boolean",
            "title": "Usmca Claim",
            "description": "Whether USMCA preferential claim made.",
            "default": false
          },
          "program_qualified": {
            "type": "boolean",
            "title": "Program Qualified",
            "description": "Whether declarant affirms program eligibility.",
            "default": true
          },
          "chapter98_provision": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Chapter98 Provision",
            "description": "Chapter 98 provision claimed."
          },
          "materials": {
            "anyOf": [
              {
                "items": {
                  "additionalProperties": true,
                  "type": "object"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Materials",
            "description": "Material composition for Section 232."
          }
        },
        "type": "object",
        "required": [
          "hts_code",
          "country_of_origin"
        ],
        "title": "ReciprocalContext",
        "description": "Summary of the inputs used when evaluating reciprocal rates."
      },
      "ReciprocalDebug": {
        "properties": {
          "matched_rules": {
            "items": {
              "additionalProperties": true,
              "type": "object"
            },
            "type": "array",
            "title": "Matched Rules",
            "description": "Rules that matched the evaluation criteria."
          },
          "details": {
            "items": {
              "additionalProperties": true,
              "type": "object"
            },
            "type": "array",
            "title": "Details",
            "description": "Detailed evaluation information."
          },
          "base_rate_summary": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Base Rate Summary",
            "description": "Summary of base rates used."
          },
          "resolved_import_date": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Resolved Import Date",
            "description": "Import date used (YYYY-MM-DD)."
          },
          "resolved_loading_date": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Resolved Loading Date",
            "description": "Loading date used (YYYY-MM-DD)."
          },
          "defaulting_notes": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Defaulting Notes",
            "description": "Notes about date defaulting."
          }
        },
        "type": "object",
        "title": "ReciprocalDebug",
        "description": "Verbose reciprocal artefacts available when explicitly requested."
      },
      "ReciprocalResponse": {
        "properties": {
          "error": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Error",
            "description": "Error message if reciprocal evaluation failed."
          },
          "context": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/ReciprocalContext"
              },
              {
                "type": "null"
              }
            ],
            "description": "Input context used for evaluation."
          },
          "totals": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/ReciprocalTotals"
              },
              {
                "type": "null"
              }
            ],
            "description": "Aggregated additional duty totals."
          },
          "rules": {
            "items": {
              "$ref": "#/components/schemas/ReciprocalRule"
            },
            "type": "array",
            "title": "Rules",
            "description": "Individual Chapter 99 rules evaluated."
          },
          "conditional_exemptions": {
            "items": {
              "$ref": "#/components/schemas/ConditionalExemptionResponse"
            },
            "type": "array",
            "title": "Conditional Exemptions",
            "description": "Conditional exemption rules that may apply based on product characteristics. To apply these exemptions, resubmit with the rule code in selected_code_conditions."
          },
          "debug": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/ReciprocalDebug"
              },
              {
                "type": "null"
              }
            ],
            "description": "Debug information if requested."
          }
        },
        "type": "object",
        "title": "ReciprocalResponse",
        "description": "Structured reciprocal payload embedded in the calculation response."
      },
      "ReciprocalRule": {
        "properties": {
          "rule_code": {
            "type": "string",
            "title": "Rule Code",
            "description": "Chapter 99 rule code (e.g., '9903.88.03')."
          },
          "description": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Description",
            "description": "Rule description text."
          },
          "related_99_codes": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Related 99 Codes",
            "description": "Related Chapter 99 codes."
          },
          "additional_duty_rate": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Additional Duty Rate",
            "description": "Additional duty rate (0.25 for 25%)."
          },
          "computed_rate": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Computed Rate",
            "description": "Computed effective rate."
          },
          "computed_amount": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Computed Amount",
            "description": "Computed duty amount in USD."
          },
          "applies": {
            "type": "boolean",
            "title": "Applies",
            "description": "Whether this rule applies.",
            "default": false
          }
        },
        "type": "object",
        "required": [
          "rule_code"
        ],
        "title": "ReciprocalRule",
        "description": "Concise duty breakdown for a reciprocal rate rule."
      },
      "ReciprocalTotals": {
        "properties": {
          "additional_rate": {
            "type": "number",
            "title": "Additional Rate",
            "description": "Total additional rate from reciprocal rules.",
            "default": 0.0
          },
          "additional_duty_amount": {
            "type": "number",
            "title": "Additional Duty Amount",
            "description": "Total additional duty amount in USD.",
            "default": 0.0
          }
        },
        "type": "object",
        "title": "ReciprocalTotals",
        "description": "Aggregated additional duty results from reciprocal evaluation."
      },
      "SpecialRateCondition": {
        "properties": {
          "code": {
            "type": "string",
            "title": "Code",
            "description": "SPI code, e.g. 'AU', 'A+'."
          },
          "program_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Program Name",
            "description": "Full program name."
          }
        },
        "type": "object",
        "required": [
          "code"
        ],
        "title": "SpecialRateCondition",
        "description": "Represents a special rate condition model.\n\nThis class is used to define the details of a special rate condition,\ncommonly used in trade agreements or customs declarations. It contains\nan identification code and an optional program name providing additional\ncontext about the special rate condition. This class is derived\nfrom `BaseModel`.\n\nAttributes:\n    code: str\n        The SPI (Special Program Indicator) code. Example: \"AU\", \"A+\".\n    program_name: Optional[str]\n        The descriptive name of the special program. Example:\n        \"US-Australia Free Trade Agreement\"."
      },
      "UsageBySource": {
        "properties": {
          "request_source": {
            "type": "string",
            "title": "Request Source",
            "description": "Request origin: 'neo_ui', 'direct', or 'internal'."
          },
          "consumed_credits": {
            "type": "integer",
            "title": "Consumed Credits",
            "description": "Total credits consumed from this source."
          },
          "denied_credits": {
            "type": "integer",
            "title": "Denied Credits",
            "description": "Credits for requests denied by hard-stop enforcement."
          },
          "overage_credits": {
            "type": "integer",
            "title": "Overage Credits",
            "description": "Credits consumed beyond included_credits."
          }
        },
        "type": "object",
        "required": [
          "request_source",
          "consumed_credits",
          "denied_credits",
          "overage_credits"
        ],
        "title": "UsageBySource",
        "description": "Credit usage breakdown for a single request source."
      },
      "UsagePeriod": {
        "properties": {
          "period_start": {
            "type": "string",
            "format": "date-time",
            "title": "Period Start",
            "description": "Start of the time bucket."
          },
          "period_end": {
            "type": "string",
            "format": "date-time",
            "title": "Period End",
            "description": "End of the time bucket."
          },
          "consumed_credits": {
            "type": "integer",
            "title": "Consumed Credits",
            "description": "Credits consumed in this period."
          },
          "overage_credits": {
            "type": "integer",
            "title": "Overage Credits",
            "description": "Overage credits in this period."
          },
          "denied_credits": {
            "type": "integer",
            "title": "Denied Credits",
            "description": "Denied credits in this period."
          },
          "tier_code": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Tier Code",
            "description": "Active tier during this period."
          }
        },
        "type": "object",
        "required": [
          "period_start",
          "period_end",
          "consumed_credits",
          "overage_credits",
          "denied_credits"
        ],
        "title": "UsagePeriod",
        "description": "Usage data for a single time-series bucket."
      },
      "V3BreakdownCharge": {
        "properties": {
          "type": {
            "type": "string",
            "enum": [
              "percent_based",
              "unit_based"
            ],
            "title": "Type",
            "description": "Charge type: 'percent_based' or 'unit_based'."
          },
          "listed_rate": {
            "$ref": "#/components/schemas/V3ListedRate",
            "description": "Listed rate details."
          },
          "applied_rate": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Applied Rate",
            "description": "Rate actually applied."
          },
          "per_unit_rate": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Per Unit Rate",
            "description": "Per-unit rate for specific duties."
          },
          "computed_amount": {
            "type": "number",
            "title": "Computed Amount",
            "description": "Computed duty amount in USD."
          },
          "coverage": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/V3Coverage"
              },
              {
                "type": "null"
              }
            ],
            "description": "Coverage metadata."
          }
        },
        "type": "object",
        "required": [
          "type",
          "listed_rate",
          "computed_amount"
        ],
        "title": "V3BreakdownCharge",
        "description": "A single charge entry within a breakdown row."
      },
      "V3BreakdownItem": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id",
            "description": "Unique identifier for this breakdown item."
          },
          "line_seq": {
            "type": "integer",
            "title": "Line Seq",
            "description": "Sequence number in the breakdown."
          },
          "kind": {
            "type": "string",
            "enum": [
              "base",
              "reciprocal",
              "adjustment",
              "total"
            ],
            "title": "Kind",
            "description": "Type of breakdown item."
          },
          "source_ref": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Source Ref",
            "description": "Reference to source rule/rate."
          },
          "description": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Description",
            "description": "Description of this breakdown item."
          },
          "charges": {
            "items": {
              "$ref": "#/components/schemas/V3BreakdownCharge"
            },
            "type": "array",
            "title": "Charges",
            "description": "Individual charges in this item."
          },
          "totals": {
            "$ref": "#/components/schemas/V3DutyTotals",
            "description": "Total duties for this item."
          },
          "percent_of_cost": {
            "type": "number",
            "title": "Percent Of Cost",
            "description": "Duty as percentage of cargo value."
          },
          "programs": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Programs",
            "description": "Applicable trade programs."
          },
          "conditions": {
            "items": {
              "$ref": "#/components/schemas/V3Condition"
            },
            "type": "array",
            "title": "Conditions",
            "description": "Conditions affecting this item."
          },
          "applies": {
            "type": "boolean",
            "title": "Applies",
            "description": "Whether this item applies to the calculation.",
            "default": true
          },
          "non_application_reason": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Non Application Reason",
            "description": "Reason if item doesn't apply."
          }
        },
        "type": "object",
        "required": [
          "id",
          "line_seq",
          "kind",
          "totals",
          "percent_of_cost"
        ],
        "title": "V3BreakdownItem",
        "description": "Structured breakdown row covering base, reciprocal, or total lines."
      },
      "V3CargoValue": {
        "properties": {
          "amount": {
            "type": "number",
            "title": "Amount",
            "description": "Cargo value amount."
          },
          "currency": {
            "type": "string",
            "title": "Currency",
            "description": "Currency code."
          },
          "quantity": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Quantity",
            "description": "Cargo quantity."
          },
          "qty_uom": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Qty Uom",
            "description": "Quantity unit of measure."
          }
        },
        "type": "object",
        "required": [
          "amount",
          "currency"
        ],
        "title": "V3CargoValue",
        "description": "Cargo value echo used by V3 summary."
      },
      "V3Condition": {
        "properties": {
          "tag": {
            "type": "string",
            "title": "Tag",
            "description": "Condition tag/identifier."
          },
          "detail": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Detail",
            "description": "Condition detail text."
          }
        },
        "type": "object",
        "required": [
          "tag"
        ],
        "title": "V3Condition",
        "description": "Condition or note associated with a breakdown row."
      },
      "V3Coverage": {
        "properties": {
          "quantity": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Quantity",
            "description": "Quantity covered."
          },
          "uom": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Uom",
            "description": "Unit of measure."
          },
          "value_used": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Value Used",
            "description": "Value used for calculation."
          },
          "derived_qty": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Derived Qty",
            "description": "Derived quantity if converted."
          },
          "derived_uom": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Derived Uom",
            "description": "Derived unit of measure."
          }
        },
        "type": "object",
        "title": "V3Coverage",
        "description": "Coverage metadata for a breakdown charge."
      },
      "V3DutyTotals": {
        "properties": {
          "percent_based": {
            "type": "number",
            "title": "Percent Based",
            "description": "Total from percentage-based (ad valorem) duties in USD.",
            "default": 0.0
          },
          "unit_based": {
            "type": "number",
            "title": "Unit Based",
            "description": "Total from unit-based (specific) duties in USD.",
            "default": 0.0
          },
          "total": {
            "type": "number",
            "title": "Total",
            "description": "Combined total duty in USD.",
            "default": 0.0
          }
        },
        "type": "object",
        "title": "V3DutyTotals",
        "description": "Duty totals grouped by axis for V3 summary/breakdown blocks."
      },
      "V3EffectiveRates": {
        "properties": {
          "percent_based": {
            "type": "number",
            "title": "Percent Based",
            "description": "Effective ad valorem rate (e.g., 0.25 for 25%).",
            "default": 0.0
          },
          "unit_based": {
            "type": "number",
            "title": "Unit Based",
            "description": "Effective specific rate per unit.",
            "default": 0.0
          },
          "total": {
            "type": "number",
            "title": "Total",
            "description": "Combined effective rate as percentage of value.",
            "default": 0.0
          }
        },
        "type": "object",
        "title": "V3EffectiveRates",
        "description": "Effective duty rates grouped by axis for V3 summary."
      },
      "V3Flags": {
        "properties": {
          "has_reciprocal": {
            "type": "boolean",
            "title": "Has Reciprocal",
            "description": "Whether reciprocal (Chapter 99) duties apply."
          },
          "has_quota": {
            "type": "boolean",
            "title": "Has Quota",
            "description": "Whether quota restrictions apply.",
            "default": false
          },
          "calculation_methods": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Calculation Methods",
            "description": "Calculation methods used (e.g., 'simple', 'banded')."
          }
        },
        "type": "object",
        "required": [
          "has_reciprocal"
        ],
        "title": "V3Flags",
        "description": "Flag container describing calculation characteristics."
      },
      "V3ListedRate": {
        "properties": {
          "value": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Value",
            "description": "Numeric rate value."
          },
          "display": {
            "type": "string",
            "title": "Display",
            "description": "Display string (e.g., '25%', '2.5/kg')."
          },
          "uom": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Uom",
            "description": "Unit of measure for specific rates."
          },
          "cap": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/V3ListedRateCap"
              },
              {
                "type": "null"
              }
            ],
            "description": "Rate cap details if applicable."
          },
          "notes": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Notes",
            "description": "Notes about the rate."
          }
        },
        "type": "object",
        "required": [
          "display"
        ],
        "title": "V3ListedRate",
        "description": "Listed rate details included in breakdown charges."
      },
      "V3ListedRateCap": {
        "properties": {
          "kind": {
            "anyOf": [
              {
                "type": "string",
                "enum": [
                  "min",
                  "max",
                  "band_cap",
                  "other"
                ]
              },
              {
                "type": "null"
              }
            ],
            "title": "Kind",
            "description": "Type of cap: 'min', 'max', 'band_cap', or 'other'."
          },
          "value": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Value",
            "description": "Cap value."
          },
          "uom": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Uom",
            "description": "Unit of measure for the cap."
          }
        },
        "type": "object",
        "title": "V3ListedRateCap",
        "description": "Optional cap metadata for listed rates."
      },
      "V3Summary": {
        "properties": {
          "currency_code": {
            "type": "string",
            "title": "Currency Code",
            "description": "Currency code (e.g., 'USD')."
          },
          "cargo_value": {
            "$ref": "#/components/schemas/V3CargoValue",
            "description": "Cargo value details."
          },
          "duty_totals": {
            "additionalProperties": {
              "$ref": "#/components/schemas/V3DutyTotals"
            },
            "propertyNames": {
              "enum": [
                "base",
                "reciprocal",
                "net",
                "adjustments"
              ]
            },
            "type": "object",
            "title": "Duty Totals",
            "description": "Duty totals by category."
          },
          "effective_rates": {
            "additionalProperties": {
              "$ref": "#/components/schemas/V3EffectiveRates"
            },
            "propertyNames": {
              "enum": [
                "base",
                "reciprocal",
                "net",
                "adjustments"
              ]
            },
            "type": "object",
            "title": "Effective Rates",
            "description": "Effective rates by category."
          },
          "valuation_basis": {
            "$ref": "#/components/schemas/V3ValuationBasis",
            "description": "Valuation basis used."
          },
          "flags": {
            "$ref": "#/components/schemas/V3Flags",
            "description": "Calculation flags."
          }
        },
        "type": "object",
        "required": [
          "currency_code",
          "cargo_value",
          "duty_totals",
          "effective_rates",
          "valuation_basis",
          "flags"
        ],
        "title": "V3Summary",
        "description": "Top-level summary block for V3 response augmentation."
      },
      "V3ValuationBasis": {
        "properties": {
          "label": {
            "type": "string",
            "const": "declared_value",
            "title": "Label",
            "description": "Valuation basis type.",
            "default": "declared_value"
          },
          "amount": {
            "type": "number",
            "title": "Amount",
            "description": "Valuation amount in specified currency."
          },
          "currency": {
            "type": "string",
            "title": "Currency",
            "description": "Currency code (e.g., 'USD')."
          },
          "notes": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Notes",
            "description": "Notes about the valuation basis."
          }
        },
        "type": "object",
        "required": [
          "amount",
          "currency"
        ],
        "title": "V3ValuationBasis",
        "description": "Declared value basis used for percent-of-cost calculations."
      },
      "ValidationError": {
        "properties": {
          "loc": {
            "items": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "integer"
                }
              ]
            },
            "type": "array",
            "title": "Location"
          },
          "msg": {
            "type": "string",
            "title": "Message"
          },
          "type": {
            "type": "string",
            "title": "Error Type"
          },
          "input": {
            "title": "Input"
          },
          "ctx": {
            "type": "object",
            "title": "Context"
          }
        },
        "type": "object",
        "required": [
          "loc",
          "msg",
          "type"
        ],
        "title": "ValidationError"
      }
    },
    "securitySchemes": {
      "APIKeyHeader": {
        "type": "apiKey",
        "description": "API key for authentication. Format: ntf_<random_chars>",
        "in": "header",
        "name": "X-API-Key"
      }
    }
  },
  "tags": [
    {
      "name": "Duty Calculations",
      "description": "Calculate tariff duties for import entries. Single item, batch, and multi-country duty computations with full rate breakdowns."
    },
    {
      "name": "HTS Codes",
      "description": "Retrieve HTS code details, hub views, and batch lookups. Core code-level data retrieval endpoints."
    },
    {
      "name": "Schedule",
      "description": "Chapter and section details from the HTS schedule. Metadata, notes, and rate information at the chapter/section level."
    },
    {
      "name": "Countries",
      "description": "Country reference data including ISO codes, names, and trade relationship metadata."
    },
    {
      "name": "Trade Programs",
      "description": "Trade preference programs (GSP, USMCA, etc.) and country eligibility information."
    },
    {
      "name": "Materials",
      "description": "Section 232 material classifications. Material categories for steel, aluminum, and derivative products."
    },
    {
      "name": "Notes & Documents",
      "description": "HTS notes, legal documents, and parsed content. Filtered note retrieval and document content access."
    },
    {
      "name": "Schedule Navigation",
      "description": "Browse the HTS hierarchy. Section and chapter listings for building navigation UIs."
    },
    {
      "name": "Document Navigation",
      "description": "Tree structures and indexes for notes and documents. Lightweight navigation data for content browsers."
    },
    {
      "name": "HTS Search",
      "description": "Search HTS codes by prefix, description, or autocomplete. Core discovery endpoints for finding codes."
    },
    {
      "name": "Documentation Search",
      "description": "Search across HTS documentation including notes, sections, and semantic content."
    },
    {
      "name": "GIQ Organization Search",
      "description": "GIQ-backed organization search, suggestion, facets, capabilities, and NAICS endpoints."
    },
    {
      "name": "GIQ News",
      "description": "GIQ-backed news search, AI-enhanced search, and filter endpoints."
    },
    {
      "name": "Available Versions",
      "description": "List available HTS revisions. Query which HTS source versions are available in the system."
    },
    {
      "name": "Version Comparison",
      "description": "Compare HTS codes and releases across revisions. Track rate changes and identify differences between versions."
    },
    {
      "name": "Import Data",
      "description": "US import trade statistics by HTS code and country. Sourced from USITC DataWeb for trade analysis and volume insights."
    }
  ],
  "security": [
    {
      "APIKeyHeader": []
    }
  ]
}
